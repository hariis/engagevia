Object.extend(Ajax.InPlaceEditor.prototype,{handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);if(this._oldInnerHTML){this.element.innerHTML=this._oldInnerHTML;this._oldInnerHTML=null}this.leaveEditMode()}});Object.extend(Ajax.InPlaceEditor.DefaultCallbacks,{onFailure:function(b,a){alert("Error communication with the server: "+a.responseText.stripTags())}});Object.extend(Ajax.InPlaceEditor.prototype,{initialize:function(c,b,a){this.url=b;this.element=c=$(c);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(a);Object.extend(this.options,a||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId)){this.options.formId=""}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl)}if(!this.options.externalControl){this.options.externalControlOnly=false}this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners();if(this.options.editOnBlank&&this.getText().length==0){this.enterEditMode()}},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);this.element.innerHTML=this._oldInnerHTML;this._oldInnerHTML=null;this.leaveEditMode()},wrapUp:function(a){this.leaveEditMode();if(this.options.editOnBlank&&this.getText().length==0){this.enterEditMode()}this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.DefaultOptions,{editOnBlank:true});Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){if(!a){return}function b(c,d){if(c in a||d===undefined){return}a[c]=d}b("cancelControl",(a.cancelLink?"link":(a.cancelButton?"button":a.cancelLink==a.cancelButton==false?false:undefined)));b("okControl",(a.okLink?"link":(a.okButton?"button":a.okLink==a.okButton==false?false:undefined)));b("highlightColor",a.highlightcolor);b("highlightEndColor",a.highlightendcolor)};var tinymce={majorVersion:"3",minorVersion:"2.2.3",releaseDate:"2009-03-26",_init:function(){var d=this,p=document,n=window,q=navigator,w=q.userAgent,r,x,s,t,u,i;d.isOpera=n.opera&&opera.buildNumber;d.isWebKit=/WebKit/.test(w);d.isIE=!d.isWebKit&&!d.isOpera&&(/MSIE/gi).test(w)&&(/Explorer/gi).test(q.appName);d.isIE6=d.isIE&&/MSIE [56]/.test(w);d.isGecko=!d.isWebKit&&/Gecko/.test(w);d.isMac=w.indexOf("Mac")!=-1;d.isAir=/adobeair/i.test(w);if(n.tinyMCEPreInit){d.suffix=tinyMCEPreInit.suffix;d.baseURL=tinyMCEPreInit.base;d.query=tinyMCEPreInit.query;return}d.suffix="";x=p.getElementsByTagName("base");for(r=0;r<x.length;r++){if(i=x[r].href){if(/^https?:\/\/[^\/]+$/.test(i)){i+="/"}t=i?i.match(/.*\//)[0]:""}}function v(a){if(a.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(a.src)){if(/_(src|dev)\.js/g.test(a.src)){d.suffix="_src"}if((u=a.src.indexOf("?"))!=-1){d.query=a.src.substring(u+1)}d.baseURL=a.src.substring(0,a.src.lastIndexOf("/"));if(t&&d.baseURL.indexOf("://")==-1){d.baseURL=t+d.baseURL}return d.baseURL}return null}x=p.getElementsByTagName("script");for(r=0;r<x.length;r++){if(v(x[r])){return}}s=p.getElementsByTagName("head")[0];if(s){x=s.getElementsByTagName("script");for(r=0;r<x.length;r++){if(v(x[r])){return}}}return},is:function(d,e){var f=typeof(d);if(!e){return f!="undefined"}if(e=="array"&&(d.hasOwnProperty&&d instanceof Array)){return true}return f==e},each:function(i,g,j){var h,f;if(!i){return 0}j=j||i;if(typeof(i.length)!="undefined"){for(h=0,f=i.length;h<f;h++){if(g.call(j,i[h],h,i)===false){return 0}}}else{for(h in i){if(i.hasOwnProperty(h)){if(g.call(j,i[h],h,i)===false){return 0}}}}return 1},map:function(a,f){var e=[];tinymce.each(a,function(b){e.push(f(b))});return e},grep:function(a,f){var e=[];tinymce.each(a,function(b){if(!f||f(b)){e.push(b)}});return e},inArray:function(h,g){var f,a;if(h){for(f=0,a=h.length;f<a;f++){if(h[f]===g){return f}}}return -1},extend:function(e,g){var h,a=arguments;for(h=1;h<a.length;h++){g=a[h];tinymce.each(g,function(b,c){if(typeof(b)!=="undefined"){e[c]=b}})}return e},trim:function(b){return(b?""+b:"").replace(/^\s*|\s*$/g,"")},create:function(c,r){var k=this,q,o,n,m,p,l=0;c=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(c);n=c[3].match(/(^|\.)(\w+)$/i)[2];o=k.createNS(c[3].replace(/\.\w+$/,""));if(o[n]){return}if(c[2]=="static"){o[n]=r;if(this.onCreate){this.onCreate(c[2],c[3],o[n])}return}if(!r[n]){r[n]=function(){};l=1}o[n]=r[n];k.extend(o[n].prototype,r);if(c[5]){q=k.resolve(c[5]).prototype;m=c[5].match(/\.(\w+)$/i)[1];p=o[n];if(l){o[n]=function(){return q[m].apply(this,arguments)}}else{o[n]=function(){this.parent=q[m];return p.apply(this,arguments)}}o[n].prototype[n]=o[n];k.each(q,function(b,a){o[n].prototype[a]=q[a]});k.each(r,function(b,a){if(q[a]){o[n].prototype[a]=function(){this.parent=q[a];return b.apply(this,arguments)}}else{if(a!=n){o[n].prototype[a]=b}}})}k.each(r["static"],function(b,a){o[n][a]=b});if(this.onCreate){this.onCreate(c[2],c[3],o[n].prototype)}},walk:function(h,e,g,f){f=f||this;if(h){if(g){h=h[g]}tinymce.each(h,function(a,b){if(e.call(f,a,b,g)===false){return false}tinymce.walk(a,e,g,f)})}},createNS:function(g,h){var e,f;h=h||window;g=g.split(".");for(e=0;e<g.length;e++){f=g[e];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(g,h){var e,f;h=h||window;g=g.split(".");for(e=0,f=g.length;e<f;e++){h=h[g[e]];if(!h){break}}return h},addUnload:function(j,k){var l=this,h=window;j={func:j,scope:k||this};if(!l.unloads){function f(){var c=l.unloads,b,a;if(c){for(a in c){b=c[a];if(b&&b.func){b.func.call(b.scope,1)}}if(h.detachEvent){h.detachEvent("onbeforeunload",i);h.detachEvent("onunload",f)}else{if(h.removeEventListener){h.removeEventListener("unload",f,false)}}l.unloads=b=c=h=f=null;if(window.CollectGarbage){window.CollectGarbage()}}}function i(){var a=document;if(a.readyState=="interactive"){function b(){a.detachEvent("onstop",b);f();a=null}a.attachEvent("onstop",b);window.setTimeout(function(){a.detachEvent("onstop",b)},0)}}if(h.attachEvent){h.attachEvent("onunload",f);h.attachEvent("onbeforeunload",i)}else{if(h.addEventListener){h.addEventListener("unload",f,false)}}l.unloads=[j]}else{l.unloads.push(j)}return j},removeUnload:function(f){var e=this.unloads,d=null;tinymce.each(e,function(a,b){if(a&&a.func==f){e.splice(b,1);d=f;return false}});return d},explode:function(d,c){return d?tinymce.map(d.split(c||","),tinymce.trim):d},_addVer:function(c){var d;if(!this.query){return c}d=(c.indexOf("?")==-1?"?":"&")+this.query;if(c.indexOf("#")==-1){return c+d}return c.replace("#",d+"#")}};window.tinymce=tinymce;tinymce._init();tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(b){this.scope=b||this;this.listeners=[]},add:function(d,c){this.listeners.push({cb:d,scope:c||this.scope});return d},addToTop:function(d,c){this.listeners.unshift({cb:d,scope:c||this.scope});return d},remove:function(e){var d=this.listeners,f=null;tinymce.each(d,function(a,b){if(e==a.cb){f=e;d.splice(b,1);return false}});return f},dispatch:function(){var h,j=arguments,i,a=this.listeners,c;for(i=0;i<a.length;i++){c=a[i];h=c.cb.apply(c.scope,j);if(h===false){break}}return h}});(function(){var b=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(k,i){var j=this,a,l,m;i=j.settings=i||{};if(/^(mailto|tel|news|javascript|about):/i.test(k)||/^\s*#/.test(k)){j.source=k;return}if(k.indexOf("/")===0&&k.indexOf("//")!==0){k=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+k}if(k.indexOf(":/")===-1&&k.indexOf("//")!==0){k=(i.base_uri.protocol||"http")+"://mce_host"+j.toAbsPath(i.base_uri.path,k)}k=k.replace(/@@/g,"(mce_at)");k=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(k);b(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(c,e){var d=k[e];if(d){d=d.replace(/\(mce_at\)/g,"@@")}j[c]=d});if(m=i.base_uri){if(!j.protocol){j.protocol=m.protocol}if(!j.userInfo){j.userInfo=m.userInfo}if(!j.port&&j.host=="mce_host"){j.port=m.port}if(!j.host||j.host=="mce_host"){j.host=m.host}j.source=""}},setPath:function(d){var a=this;d=/^(.*?)\/?(\w+)?$/.exec(d);a.path=d[0];a.directory=d[1];a.file=d[2];a.source="";a.getURI()},toRelative:function(a){var f=this,e;if(a==="./"){return a}a=new tinymce.util.URI(a,{base_uri:f});if((a.host!="mce_host"&&f.host!=a.host&&a.host)||f.port!=a.port||f.protocol!=a.protocol){return a.getURI()}e=f.toRelPath(f.path,a.path);if(a.query){e+="?"+a.query}if(a.anchor){e+="#"+a.anchor}return e},toAbsolute:function(a,d){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host?d:0)},toRelPath:function(j,i){var n,k=0,m="",l,a;j=j.substring(0,j.lastIndexOf("/"));j=j.split("/");n=i.split("/");if(j.length>=n.length){for(l=0,a=j.length;l<a;l++){if(l>=n.length||j[l]!=n[l]){k=l+1;break}}}if(j.length<n.length){for(l=0,a=n.length;l<a;l++){if(l>=j.length||j[l]!=n[l]){k=l+1;break}}}if(k==1){return i}for(l=0,a=j.length-(k-1);l<a;l++){m+="../"}for(l=k-1,a=n.length;l<a;l++){if(l!=k-1){m+="/"+n[l]}else{m+=n[l]}}return m},toAbsPath:function(j,i){var l,a=0,h=[],k;k=/\/$/.test(i)?"/":"";j=j.split("/");i=i.split("/");b(j,function(c){if(c){h.push(c)}});j=h;for(l=i.length-1,h=[];l>=0;l--){if(i[l].length==0||i[l]=="."){continue}if(i[l]==".."){a++;continue}if(a>0){a--;continue}h.push(i[l])}l=j.length-a;if(l<=0){return"/"+h.reverse().join("/")+k}return"/"+j.slice(0,l).join("/")+"/"+h.reverse().join("/")+k},getURI:function(e){var f,a=this;if(!a.source||e){f="";if(!e){if(a.protocol){f+=a.protocol+"://"}if(a.userInfo){f+=a.userInfo+"@"}if(a.host){f+=a.host}if(a.port){f+=":"+a.port}}if(a.path){f+=a.path}if(a.query){f+="?"+a.query}if(a.anchor){f+="#"+a.anchor}a.source=f}return a.source}})})();(function(){var b=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var a=this.get(e),f;if(a){b(a.split("&"),function(c){c=c.split("=");f=f||{};f[unescape(c[0])]=unescape(c[1])})}return f},setHash:function(d,a,l,m,e,n){var k="";b(a,function(c,f){k+=(!k?"":"&")+escape(f)+"="+escape(c)});this.set(d,k,l,m,e,n)},get:function(a){var c=document.cookie,e,j=a+"=",k;if(!c){return}k=c.indexOf("; "+j);if(k==-1){k=c.indexOf(j);if(k!=0){return null}}else{k+=2}e=c.indexOf(";",k);if(e==-1){e=c.length}return unescape(c.substring(k+j.length,e))},set:function(d,a,j,k,e,l){document.cookie=d+"="+escape(a)+((j)?"; expires="+j.toGMTString():"")+((k)?"; path="+escape(k):"")+((e)?"; domain="+e:"")+((l)?"; secure":"")},remove:function(d,a){var f=new Date();f.setTime(f.getTime()-1000);this.set(d,"",f,a,f)}})})();tinymce.create("static tinymce.util.JSON",{serialize:function(h){var j,g,i=tinymce.util.JSON.serialize,f;if(h==null){return"null"}f=typeof h;if(f=="string"){g="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+h.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(a,b){j=g.indexOf(b);if(j+1){return"\\"+g.charAt(j+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+'"'}if(f=="object"){if(h.hasOwnProperty&&h instanceof Array){for(j=0,g="[";j<h.length;j++){g+=(j>0?",":"")+i(h[j])}return g+"]"}g="{";for(j in h){g+=typeof h[j]!="function"?(g.length>1?',"':'"')+j+'":'+i(h[j]):""}return g+"}"}return""+h},parse:function(s){try{return eval("("+s+")")}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(k){var i,m,c=window,j=0;k.scope=k.scope||this;k.success_scope=k.success_scope||k.scope;k.error_scope=k.error_scope||k.scope;k.async=k.async===false?false:true;k.data=k.data||"";function n(a){i=0;try{i=new ActiveXObject(a)}catch(b){}return i}i=c.XMLHttpRequest?new XMLHttpRequest():n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP");if(i){if(i.overrideMimeType){i.overrideMimeType(k.content_type)}i.open(k.type||(k.data?"POST":"GET"),k.url,k.async);if(k.content_type){i.setRequestHeader("Content-Type",k.content_type)}i.send(k.data);function l(){if(!k.async||i.readyState==4||j++>10000){if(k.success&&j<10000&&i.status==200){k.success.call(k.success_scope,""+i.responseText,i,k)}else{if(k.error){k.error.call(k.error_scope,j>10000?"TIMED_OUT":"GENERAL",i,k)}}i=null}else{c.setTimeout(l,10)}}if(!k.async){return l()}m=c.setTimeout(l,10)}}});(function(){var f=tinymce.extend,d=tinymce.util.JSON,e=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(a){this.settings=f({},a);this.count=0},send:function(a){var b=a.error,c=a.success;a=f(this.settings,a);a.success=function(i,j){i=d.parse(i);if(typeof(i)=="undefined"){i={error:"JSON Parse error."}}if(i.error){b.call(a.error_scope||a.scope,i.error,j)}else{c.call(a.success_scope||a.scope,i.result)}};a.error=function(i,j){b.call(a.error_scope||a.scope,i,j)};a.data=d.serialize({id:a.id||"c"+(this.count++),method:a.method,params:a.params});a.content_type="application/json";e.send(a)},"static":{sendRPC:function(a){return new tinymce.util.JSONRequest().send(a)}}})}());(function(j){var h=j.each,f=j.is;var i=j.isWebKit,g=j.isIE;j.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,c){var d=this;d.doc=a;d.win=window;d.files={};d.cssFlicker=false;d.counter=0;d.boxModel=!j.isIE||a.compatMode=="CSS1Compat";d.stdMode=a.documentMode===8;this.settings=c=j.extend({keep_values:false,hex_colors:1,process_html:1},c);if(j.isIE6){try{a.execCommand("BackgroundImageCache",false,true)}catch(b){d.cssFlicker=true}}j.addUnload(d.destroy,d)},getRoot:function(){var b=this,a=b.settings;return(a&&b.get(a.root_element))||b.doc.body},getViewPort:function(b){var a,c;b=!b?this.win:b;a=b.document;c=this.boxModel?a.documentElement:a.body;return{x:b.pageXOffset||c.scrollLeft,y:b.pageYOffset||c.scrollTop,w:b.innerWidth||c.clientWidth,h:b.innerHeight||c.clientHeight}},getRect:function(a){var b,d=this,c;a=d.get(a);b=d.getPos(a);c=d.getSize(a);return{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var c=this,d,b;a=c.get(a);d=c.getStyle(a,"width");b=c.getStyle(a,"height");if(d.indexOf("px")===-1){d=0}if(b.indexOf("px")===-1){b=0}return{w:parseInt(d)||a.offsetWidth||a.clientWidth,h:parseInt(b)||a.offsetHeight||a.clientHeight}},is:function(a,b){return j.dom.Sizzle.matches(b,a.nodeType?[a]:a).length>0},getParent:function(a,b,c){return this.getParents(a,b,c,false)},getParents:function(q,c,e,a){var n=this,o,d=n.settings,b=[];q=n.get(q);a=a===undefined;if(d.strict_root){e=e||n.getRoot()}if(f(c,"string")){o=c;if(c==="*"){c=function(k){return k.nodeType==1}}else{c=function(k){return n.is(k,o)}}}while(q){if(q==e){break}if(!c||c(q)){if(a){b.push(q)}else{return q}}q=q.parentNode}return a?b:null},get:function(b){var a;if(b&&this.doc&&typeof(b)=="string"){a=b;b=this.doc.getElementById(b);if(b&&b.id!==a){return this.doc.getElementsByName(a)[1]}}return b},select:function(a,b){var c=this;return j.dom.Sizzle(a,c.get(b)||c.get(c.settings.root_element)||c.doc,[])},add:function(c,a,m,d,b){var e=this;return this.run(c,function(o){var k,l;k=f(a,"string")?e.doc.createElement(a):a;e.setAttribs(k,m);if(d){if(d.nodeType){k.appendChild(d)}else{e.setHTML(k,d)}}return !b?o.appendChild(k):k})},create:function(a,c,b){return this.add(this.doc.createElement(a),a,c,b,1)},createHTML:function(a,k,c){var b="",d=this,e;b+="<"+a;for(e in k){if(k.hasOwnProperty(e)){b+=" "+e+'="'+d.encode(k[e])+'"'}}if(j.is(c)){return b+">"+c+"</"+a+">"}return b+" />"},remove:function(a,c){var b=this;return this.run(a,function(d){var e,n,o;e=d.parentNode;if(!e){return null}if(c){for(o=d.childNodes.length-1;o>=0;o--){b.insertAfter(d.childNodes[o],d)}}if(b.fixPsuedoLeaks){e=d.cloneNode(true);c="IELeakGarbageBin";n=b.get(c)||b.add(b.doc.body,"div",{id:c,style:"display:none"});n.appendChild(d);n.innerHTML="";return e}return e.removeChild(d)})},setStyle:function(a,d,c){var b=this;return b.run(a,function(e){var m,n;m=e.style;d=d.replace(/-(\D)/g,function(l,k){return k.toUpperCase()});if(b.pixelStyles.test(d)&&(j.is(c,"number")||/^[\-0-9\.]+$/.test(c))){c+="px"}switch(d){case"opacity":if(g){m.filter=c===""?"":"alpha(opacity="+(c*100)+")";if(!a.currentStyle||!a.currentStyle.hasLayout){m.display="inline-block"}}m[d]=m["-moz-opacity"]=m["-khtml-opacity"]=c||"";break;case"float":g?m.styleFloat=c:m.cssFloat=c;break;default:m[d]=c||""}if(b.settings.update_styles){b.setAttrib(e,"mce_style")}})},getStyle:function(a,d,b){a=this.get(a);if(!a){return false}if(this.doc.defaultView&&b){d=d.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(d)}catch(c){return null}}d=d.replace(/-(\D)/g,function(e,l){return l.toUpperCase()});if(d=="float"){d=g?"styleFloat":"cssFloat"}if(a.currentStyle&&b){return a.currentStyle[d]}return a.style[d]},setStyles:function(b,a){var d=this,c=d.settings,e;e=c.update_styles;c.update_styles=0;h(a,function(n,m){d.setStyle(b,m,n)});c.update_styles=e;if(c.update_styles){d.setAttrib(b,c.cssText)}},setAttrib:function(b,a,d){var c=this;if(!b||!a){return}if(c.settings.strict){a=a.toLowerCase()}return this.run(b,function(e){var l=c.settings;switch(a){case"style":if(!f(d,"string")){h(d,function(n,k){c.setStyle(e,k,n)});return}if(l.keep_values){if(d&&!c._isRes(d)){e.setAttribute("mce_style",d,2)}else{e.removeAttribute("mce_style",2)}}e.style.cssText=d;break;case"class":e.className=d||"";break;case"src":case"href":if(l.keep_values){if(l.url_converter){d=l.url_converter.call(l.url_converter_scope||c,d,a,e)}c.setAttrib(e,"mce_"+a,d,2)}break;case"shape":e.setAttribute("mce_style",d);break}if(f(d)&&d!==null&&d.length!==0){e.setAttribute(a,""+d,2)}else{e.removeAttribute(a,2)}})},setAttribs:function(b,a){var c=this;return this.run(b,function(d){h(a,function(l,e){c.setAttrib(d,e,l)})})},getAttrib:function(b,a,c){var e,d=this;b=d.get(b);if(!b||b.nodeType!==1){return false}if(!f(c)){c=""}if(/^(src|href|style|coords|shape)$/.test(a)){e=b.getAttribute("mce_"+a);if(e){return e}}if(g&&d.props[a]){e=b[d.props[a]];e=e&&e.nodeValue?e.nodeValue:e}if(!e){e=b.getAttribute(a,2)}if(a==="style"){e=e||b.style.cssText;if(e){e=d.serializeStyle(d.parseStyle(e));if(d.settings.keep_values&&!d._isRes(e)){b.setAttribute("mce_style",e)}}}if(i&&a==="class"&&e){e=e.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(g){switch(a){case"rowspan":case"colspan":if(e===1){e=""}break;case"size":if(e==="+0"||e===20||e===0){e=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(e===0){e=""}break;case"hspace":if(e===-1){e=""}break;case"maxlength":case"tabindex":if(e===32768||e===2147483647||e==="32768"){e=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(e===65535){return a}return c;case"shape":e=e.toLowerCase();break;default:if(a.indexOf("on")===0&&e){e=(""+e).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1")}}}return(e!==undefined&&e!==null&&e!=="")?""+e:c},getPos:function(a){var m=this,n=0,b=0,d,c=m.doc,e;a=m.get(a);if(a&&g&&!m.stdMode){a=a.getBoundingClientRect();d=m.boxModel?c.documentElement:c.body;n=m.getStyle(m.select("html")[0],"borderWidth");n=(n=="medium"||m.boxModel&&!m.isIE6)&&2||n;a.top+=m.win.self!=m.win.top?2:0;return{x:a.left+d.scrollLeft-n,y:a.top+d.scrollTop-n}}e=a;while(e){n+=e.offsetLeft||0;b+=e.offsetTop||0;e=e.offsetParent}e=a;while(e){if(!/^table-row|inline.*/i.test(m.getStyle(e,"display",1))){n-=e.scrollLeft||0;b-=e.scrollTop||0}e=e.parentNode;if(!e.nodeType||e.nodeType==9||e.nodeName.toLowerCase()=="body"){break}}return{x:n,y:b}},parseStyle:function(d){var c=this,b=c.settings,a={};if(!d){return a}function l(p,t,r){var x,s,k,y;x=a[p+"-top"+t];if(!x){return}s=a[p+"-right"+t];if(x!=s){return}k=a[p+"-bottom"+t];if(s!=k){return}y=a[p+"-left"+t];if(k!=y){return}a[r]=y;delete a[p+"-top"+t];delete a[p+"-right"+t];delete a[p+"-bottom"+t];delete a[p+"-left"+t]}function e(t,k,q,r){var s;s=a[k];if(!s){return}s=a[q];if(!s){return}s=a[r];if(!s){return}a[t]=a[k]+" "+a[q]+" "+a[r];delete a[k];delete a[q];delete a[r]}d=d.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");h(d.split(";"),function(k){var o,p=[];if(k){k=k.replace(/_MCE_SEMI_/g,";");k=k.replace(/url\([^\)]+\)/g,function(m){p.push(m);return"url("+p.length+")"});k=k.split(":");o=j.trim(k[1]);o=o.replace(/url\(([^\)]+)\)/g,function(m,n){return p[parseInt(n)-1]});o=o.replace(/rgb\([^\)]+\)/g,function(m){return c.toHex(m)});if(b.url_converter){o=o.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(n,m){return"url("+b.url_converter.call(b.url_converter_scope||c,c.decode(m),"style",null)+")"})}a[j.trim(k[0]).toLowerCase()]=o}});l("border","","border");l("border","-width","border-width");l("border","-color","border-color");l("border","-style","border-style");l("padding","","padding");l("margin","","margin");e("border","border-width","border-style","border-color");if(g){if(a.border=="medium none"){a.border=""}}return a},serializeStyle:function(a){var b="";h(a,function(c,d){if(d&&c){if(j.isGecko&&d.indexOf("-moz-")===0){return}switch(d){case"color":case"background-color":c=c.toLowerCase();break}b+=(b?" ":"")+d+": "+c+";"}});return b},loadCSS:function(c){var b=this,a=b.doc;if(!c){c=""}h(c.split(","),function(d){if(b.files[d]){return}b.files[d]=true;b.add(b.select("head")[0],"link",{rel:"stylesheet",href:j._addVer(d)})})},addClass:function(b,a){return this.run(b,function(d){var c;if(!a){return 0}if(this.hasClass(d,a)){return d.className}c=this.removeClass(d,a);return d.className=(c!=""?(c+" "):"")+a})},removeClass:function(b,a){var d=this,c;return d.run(b,function(e){var l;if(d.hasClass(e,a)){if(!c){c=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g")}l=e.className.replace(c," ");return e.className=j.trim(l!=" "?l:"")}return e.className})},hasClass:function(a,b){a=this.get(a);if(!a||!b){return false}return(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return !a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(!a?"mce_":a)+(this.counter++)},setHTML:function(a,b){var c=this;return this.run(a,function(d){var r,n,p,s,e,r;b=c.processHTML(b);if(g){function t(){try{d.innerHTML="<br />"+b;d.removeChild(d.firstChild)}catch(k){while(d.firstChild){d.firstChild.removeNode()}r=c.create("div");r.innerHTML="<br />"+b;h(r.childNodes,function(l,m){if(m){d.appendChild(l)}})}}if(c.settings.fix_ie_paragraphs){b=b.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')}t();if(c.settings.fix_ie_paragraphs){p=d.getElementsByTagName("p");for(n=p.length-1,r=0;n>=0;n--){s=p[n];if(!s.hasChildNodes()){if(!s.mce_keep){r=1;break}s.removeAttribute("mce_keep")}}}if(r){b=b.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">');b=b.replace(/<\/p>/g,"</div>");t();if(c.settings.fix_ie_paragraphs){p=d.getElementsByTagName("DIV");for(n=p.length-1;n>=0;n--){s=p[n];if(s.mce_tmp){e=c.doc.createElement("p");s.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(l,m){var k;if(m!=="mce_tmp"){k=s.getAttribute(m);if(!k&&m==="class"){k=s.className}e.setAttribute(m,k)}});for(r=0;r<s.childNodes.length;r++){e.appendChild(s.childNodes[r].cloneNode(true))}s.swapNode(e)}}}}}else{d.innerHTML=b}return b})},processHTML:function(a){var c=this,b=c.settings;if(!b.process_html){return a}if(j.isGecko){a=a.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>");a=a.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")}else{if(g){a=a.replace(/&apos;/g,"&#39;");a=a.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}}a=a.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(b.keep_values){if(/<script|style/.test(a)){function d(e){e=e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");e=e.replace(/^[\r\n]*|[\r\n]*$/g,"");e=e.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");e=e.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return e}a=a.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(e,m,n){n=d(n);if(!m){m=' type="text/javascript"'}if(n){n="<!--\n"+n+"\n// -->"}return"<mce:script"+m+">"+n+"</mce:script>"});a=a.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(e,m,n){n=d(n);return"<mce:style"+m+"><!--\n"+n+"\n--></mce:style><style"+m+' mce_bogus="1">'+n+"</style>"})}a=a.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->");a=a.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(n,e){function m(r,s,k){var l=k;if(n.indexOf("mce_"+s)!=-1){return r}if(s=="style"){if(c._isRes(k)){return r}if(b.hex_colors){l=l.replace(/rgb\([^\)]+\)/g,function(o){return c.toHex(o)})}if(b.url_converter){l=l.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(o,p){return"url("+c.encode(b.url_converter.call(b.url_converter_scope||c,c.decode(p),s,e))+")"})}}else{if(s!="coords"&&s!="shape"){if(b.url_converter){l=c.encode(b.url_converter.call(b.url_converter_scope||c,c.decode(k),s,e))}}}return" "+s+'="'+k+'" mce_'+s+'="'+l+'"'}n=n.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,m);n=n.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,m);return n.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,m)})}return a},getOuterHTML:function(b){var a;b=this.get(b);if(!b){return null}if(b.outerHTML!==undefined){return b.outerHTML}a=(b.ownerDocument||this.doc).createElement("body");a.appendChild(b.cloneNode(true));return a.innerHTML},setOuterHTML:function(b,c,a){var d=this;return this.run(b,function(n){var e,m;n=d.get(n);a=a||n.ownerDocument||d.doc;if(g&&n.nodeType==1){n.outerHTML=c}else{m=a.createElement("body");m.innerHTML=c;e=m.lastChild;while(e){d.insertAfter(e.cloneNode(true),n);e=e.previousSibling}d.remove(n)}})},decode:function(c){var b,a,d;if(/&[^;]+;/.test(c)){b=this.doc.createElement("div");b.innerHTML=c;a=b.firstChild;d="";if(a){do{d+=a.nodeValue}while(a.nextSibling)}return d||c}return c},encode:function(a){return a?(""+a).replace(/[<>&\"]/g,function(b,c){switch(b){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return b}):a},insertAfter:function(a,b){var c=this;b=c.get(b);return this.run(a,function(d){var e,l;e=b.parentNode;l=b.nextSibling;if(l){e.insertBefore(d,l)}else{e.appendChild(d)}return d})},isBlock:function(a){if(a.nodeType&&a.nodeType!==1){return false}a=a.nodeName||a;return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TR|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(a)},replace:function(a,b,d){var c=this;if(f(b,"array")){a=a.cloneNode(true)}return c.run(b,function(e){if(d){h(e.childNodes,function(l){a.appendChild(l.cloneNode(true))})}if(c.fixPsuedoLeaks&&e.nodeType===1){e.parentNode.insertBefore(a,e);c.remove(e);return a}return e.parentNode.replaceChild(a,e)})},findCommonAncestor:function(b,d){var a=b,c;while(a){c=d;while(c&&a!=c){c=c.parentNode}if(a==c){break}a=a.parentNode}if(!a&&b.ownerDocument){return b.ownerDocument.documentElement}return a},toHex:function(c){var a=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);function b(d){d=parseInt(d).toString(16);return d.length>1?d:"0"+d}if(a){c="#"+b(a[1])+b(a[2])+b(a[3]);return c}return c},getClasses:function(){var b=this,p=[],c,a={},r=b.settings.class_filter,d;if(b.classes){return b.classes}function q(k){h(k.imports,function(l){q(l)});h(k.cssRules||k.rules,function(l){switch(l.type||1){case 1:if(l.selectorText){h(l.selectorText.split(","),function(m){m=m.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(m)||!/\.[\w\-]+$/.test(m)){return}d=m;m=m.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(r&&!(m=r(m,d))){return}if(!a[m]){p.push({"class":m});a[m]=1}})}break;case 3:q(l.styleSheet);break}})}try{h(b.doc.styleSheets,q)}catch(e){}if(p.length>0){b.classes=p}return p},run:function(b,c,d){var e=this,a;if(e.doc&&typeof(b)==="string"){b=e.get(b)}if(!b){return false}d=d||this;if(!b.nodeType&&(b.length||b.length===0)){a=[];h(b,function(k,m){if(k){if(typeof(k)=="string"){k=e.doc.getElementById(k)}a.push(c.call(d,k,m))}});return a}return c.call(d,b)},getAttribs:function(a){var b;a=this.get(a);if(!a){return[]}if(g){b=[];if(a.nodeName=="OBJECT"){return a.attributes}a.cloneNode(false).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(c,d){b.push({specified:1,nodeName:d})});return b}return a.attributes},destroy:function(a){var b=this;b.win=b.doc=b.root=null;if(!a){j.removeUnload(b.destroy)}},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new j.dom.Range(this)},split:function(e,p,b){var a=this,t=a.createRng(),d,q,c;function s(k,l){k=k[l];if(k&&k[l]&&k[l].nodeType==1&&r(k[l])){a.remove(k[l])}}function r(k){k=a.getOuterHTML(k);k=k.replace(/<(img|hr|table)/gi,"-");k=k.replace(/<[^>]+>/g,"");return k.replace(/[ \t\r\n]+|&nbsp;|&#160;/g,"")==""}if(e&&p){t.setStartBefore(e);t.setEndBefore(p);d=t.extractContents();t=a.createRng();t.setStartAfter(p);t.setEndAfter(e);q=t.extractContents();c=e.parentNode;s(d,"lastChild");if(!r(d)){c.insertBefore(d,e)}if(b){c.replaceChild(b,p)}else{c.insertBefore(p,e)}s(q,"firstChild");if(!r(q)){c.insertBefore(q,e)}a.remove(e);return b||p}},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});j.DOM=new j.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(m){var k=0,p=1,n=2,o=tinymce.extend;function l(a,c){var d,b;if(a.parentNode!=c){return -1}for(b=c.firstChild,d=0;b!=a;b=b.nextSibling){d++}return d}function q(a){var b=0;while(a.previousSibling){b++;a=a.previousSibling}return b}function j(c,b){var a;if(c.nodeType==3){return c}if(b<0){return c}a=c.firstChild;while(a!=null&&b>0){--b;a=a.nextSibling}if(a!=null){return a}return c}function r(a){var b=a.doc;o(this,{dom:a,startContainer:b,startOffset:0,endContainer:b,endOffset:0,collapsed:true,commonAncestorContainer:b,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3})}o(r.prototype,{setStart:function(a,b){this._setEndPoint(true,a,b)},setEnd:function(a,b){this._setEndPoint(false,a,b)},setStartBefore:function(a){this.setStart(a.parentNode,q(a))},setStartAfter:function(a){this.setStart(a.parentNode,q(a)+1)},setEndBefore:function(a){this.setEnd(a.parentNode,q(a))},setEndAfter:function(a){this.setEnd(a.parentNode,q(a)+1)},collapse:function(a){var b=this;if(a){b.endContainer=b.startContainer;b.endOffset=b.startOffset}else{b.startContainer=b.endContainer;b.startOffset=b.endOffset}b.collapsed=true},selectNode:function(a){this.setStartBefore(a);this.setEndAfter(a)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,g){var b=this,e=b.startContainer,f=b.startOffset,c=b.endContainer,d=b.endOffset;if(a===0){return b._compareBoundaryPoints(e,f,e,f)}if(a===1){return b._compareBoundaryPoints(e,f,c,d)}if(a===2){return b._compareBoundaryPoints(c,d,c,d)}if(a===3){return b._compareBoundaryPoints(c,d,e,f)}},deleteContents:function(){this._traverse(n)},extractContents:function(){return this._traverse(k)},cloneContents:function(){return this._traverse(p)},insertNode:function(a){var d=this,b,c;if(a.nodeType===3||a.nodeType===4){b=d.startContainer.splitText(d.startOffset);d.startContainer.parentNode.insertBefore(a,b)}else{if(d.startContainer.childNodes.length>0){c=d.startContainer.childNodes[d.startOffset]}d.startContainer.insertBefore(a,c)}},surroundContents:function(a){var c=this,b=c.extractContents();c.insertNode(a);a.appendChild(b);c.selectNode(a)},cloneRange:function(){var a=this;return o(new r(a.dom),{startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset,collapsed:a.collapsed,commonAncestorContainer:a.commonAncestorContainer})},_isCollapsed:function(){return(this.startContainer==this.endContainer&&this.startOffset==this.endOffset)},_compareBoundaryPoints:function(e,c,g,d){var b,f,h,a,i,u;if(e==g){if(c==d){return 0}else{if(c<d){return -1}else{return 1}}}b=g;while(b&&b.parentNode!=e){b=b.parentNode}if(b){f=0;h=e.firstChild;while(h!=b&&f<c){f++;h=h.nextSibling}if(c<=f){return -1}else{return 1}}b=e;while(b&&b.parentNode!=g){b=b.parentNode}if(b){f=0;h=g.firstChild;while(h!=b&&f<d){f++;h=h.nextSibling}if(f<d){return -1}else{return 1}}a=this.dom.findCommonAncestor(e,g);i=e;while(i&&i.parentNode!=a){i=i.parentNode}if(!i){i=a}u=g;while(u&&u.parentNode!=a){u=u.parentNode}if(!u){u=a}if(i==u){return 0}h=a.firstChild;while(h){if(h==i){return -1}if(h==u){return 1}h=h.nextSibling}},_setEndPoint:function(c,e,f){var b=this,d,a;if(c){b.startContainer=e;b.startOffset=f}else{b.endContainer=e;b.endOffset=f}d=b.endContainer;while(d.parentNode){d=d.parentNode}a=b.startContainer;while(a.parentNode){a=a.parentNode}if(a!=d){b.collapse(c)}else{if(b._compareBoundaryPoints(b.startContainer,b.startOffset,b.endContainer,b.endOffset)>0){b.collapse(c)}}b.collapsed=b._isCollapsed();b.commonAncestorContainer=b.dom.findCommonAncestor(b.startContainer,b.endContainer)},_traverse:function(a){var w=this,b,e=0,i=0,g,c,f,d,h,t;if(w.startContainer==w.endContainer){return w._traverseSameContainer(a)}for(b=w.endContainer,g=b.parentNode;g!=null;b=g,g=g.parentNode){if(g==w.startContainer){return w._traverseCommonStartContainer(b,a)}++e}for(b=w.startContainer,g=b.parentNode;g!=null;b=g,g=g.parentNode){if(g==w.endContainer){return w._traverseCommonEndContainer(b,a)}++i}c=i-e;f=w.startContainer;while(c>0){f=f.parentNode;c--}d=w.endContainer;while(c<0){d=d.parentNode;c++}for(h=f.parentNode,t=d.parentNode;h!=t;h=h.parentNode,t=t.parentNode){f=h;d=t}return w._traverseCommonAncestors(f,d,a)},_traverseSameContainer:function(d){var a=this,b,i,h,g,f,c,e;if(d!=n){b=a.dom.doc.createDocumentFragment()}if(a.startOffset==a.endOffset){return b}if(a.startContainer.nodeType==3){i=a.startContainer.nodeValue;h=i.substring(a.startOffset,a.endOffset);if(d!=p){a.startContainer.deleteData(a.startOffset,a.endOffset-a.startOffset);a.collapse(true)}if(d==n){return null}b.appendChild(a.dom.doc.createTextNode(h));return b}g=j(a.startContainer,a.startOffset);f=a.endOffset-a.startOffset;while(f>0){c=g.nextSibling;e=a._traverseFullySelected(g,d);if(b){b.appendChild(e)}--f;g=c}if(d!=p){a.collapse(true)}return b},_traverseCommonStartContainer:function(h,c){var i=this,a,g,f,e,b,d;if(c!=n){a=i.dom.doc.createDocumentFragment()}g=i._traverseRightBoundary(h,c);if(a){a.appendChild(g)}f=l(h,i.startContainer);e=f-i.startOffset;if(e<=0){if(c!=p){i.setEndBefore(h);i.collapse(false)}return a}g=h.previousSibling;while(e>0){b=g.previousSibling;d=i._traverseFullySelected(g,c);if(a){a.insertBefore(d,a.firstChild)}--e;g=b}if(c!=p){i.setEndBefore(h);i.collapse(false)}return a},_traverseCommonEndContainer:function(e,c){var i=this,a,d,h,g,b,f;if(c!=n){a=i.dom.doc.createDocumentFragment()}h=i._traverseLeftBoundary(e,c);if(a){a.appendChild(h)}d=l(e,i.endContainer);++d;g=i.endOffset-d;h=e.nextSibling;while(g>0){b=h.nextSibling;f=i._traverseFullySelected(h,c);if(a){a.appendChild(f)}--g;h=b}if(c!=p){i.setStartAfter(e);i.collapse(true)}return a},_traverseCommonAncestors:function(c,h,y){var i=this,f,t,d,b,a,g,x,e;if(y!=n){t=i.dom.doc.createDocumentFragment()}f=i._traverseLeftBoundary(c,y);if(t){t.appendChild(f)}d=c.parentNode;b=l(c,d);a=l(h,d);++b;g=a-b;x=c.nextSibling;while(g>0){e=x.nextSibling;f=i._traverseFullySelected(x,y);if(t){t.appendChild(f)}x=e;--g}f=i._traverseRightBoundary(h,y);if(t){t.appendChild(f)}if(y!=p){i.setStartAfter(c);i.collapse(true)}return t},_traverseRightBoundary:function(c,b){var t=this,g=j(t.endContainer,t.endOffset-1),a,d,e,i,h;var f=g!=t.endContainer;if(g==c){return t._traverseNode(g,f,false,b)}a=g.parentNode;d=t._traverseNode(a,false,false,b);while(a!=null){while(g!=null){e=g.previousSibling;i=t._traverseNode(g,f,false,b);if(b!=n){d.insertBefore(i,d.firstChild)}f=true;g=e}if(a==c){return d}g=a.previousSibling;a=a.parentNode;h=t._traverseNode(a,false,false,b);if(b!=n){h.appendChild(d)}d=h}return null},_traverseLeftBoundary:function(c,b){var t=this,f=j(t.startContainer,t.startOffset);var e=f!=t.startContainer,a,d,g,i,h;if(f==c){return t._traverseNode(f,e,true,b)}a=f.parentNode;d=t._traverseNode(a,false,true,b);while(a!=null){while(f!=null){g=f.nextSibling;i=t._traverseNode(f,e,true,b);if(b!=n){d.appendChild(i)}e=true;f=g}if(a==c){return d}f=a.nextSibling;a=a.parentNode;h=t._traverseNode(a,false,true,b);if(b!=n){h.appendChild(d)}d=h}return null},_traverseNode:function(h,d,a,t){var i=this,e,f,c,g,b;if(d){return i._traverseFullySelected(h,t)}if(h.nodeType==3){e=h.nodeValue;if(a){g=i.startOffset;f=e.substring(g);c=e.substring(0,g)}else{g=i.endOffset;f=e.substring(0,g);c=e.substring(g)}if(t!=p){h.nodeValue=c}if(t==n){return null}b=h.cloneNode(false);b.nodeValue=f;return b}if(t==n){return null}return h.cloneNode(false)},_traverseFullySelected:function(a,b){var c=this;if(b!=n){return b==p?a.cloneNode(true):a}a.parentNode.removeChild(a);return null}});m.Range=r})(tinymce.dom);(function(){function b(f){var a=this;function e(){var c=f.dom,d=f.getRng(),p=c.createRng(),n={},o={};if(d.item){p.setStartBefore(d.item(0));p.setEndAfter(d.item(0));return p}function m(i,j,k){var g,h,r;g=i.duplicate();g.collapse(j);element=g.parentElement();if(element.currentStyle.display=="block"){g=i.duplicate();h=i.duplicate();if(j){g.moveStart("character",1)}else{g.moveEnd("character",-1)}if(g.text!=h.text){g=h}g.collapse(j);element=g.parentElement()}k.parent=element;k.range=g}function l(i){var s=i.range,k,t,g,j,h=0;i.offset=0;i.parent=s.parentElement();s.pasteHTML('<span id="_mce"></span>');g=c.get("_mce");t=i.parent.childNodes;for(k=0;k<t.length;k++){if(t[k]==g){i.index=h;break}if(k>0&&(t[k].nodeType!=3||t[k-1].nodeType!=3)){h++}}j=g.previousSibling;if(j){if(j.nodeType===3){do{i.offset+=j.nodeValue.length}while((j=j.previousSibling)&&j.nodeType==3)}else{i.index++}}c.remove(g);return i}m(d,true,n);m(d,false,o);l(n);l(o);n.parent.normalize();o.parent.normalize();p.setStart(n.parent.childNodes[n.index],n.offset);p.setEnd(o.parent.childNodes[o.index],o.offset);a.addRange(p);return p}this.addRange=function(n){var d,l,m,p=f.dom.doc.body;if(n.startContainer.nodeType==1){d=p.createControlRange();d.addElement(n.startContainer.childNodes[n.startOffset]);return}function o(i){var g,k,h,j;g=i?n.startContainer:n.endContainer;k=i?n.startOffset:n.endOffset;g.nodeValue=g.nodeValue.substring(0,k)+"\uFEFF"+g.nodeValue.substring(k);h=p.createTextRange();h.moveToElementText(g.parentNode);j=h.text.indexOf("\uFEFF");g.nodeValue=g.nodeValue.replace(/\uFEFF/,"");if(i){l=j}else{m=j}}function c(i){var h,g=i?n.startContainer:n.endContainer;h=p.createTextRange();h.moveToElementText(g.parentNode);h.collapse(true);h.move("character",i?l:m);if(i){d.setEndPoint("StartToStart",h)}else{d.setEndPoint("EndToStart",h)}}d=p.createTextRange();o(true);o(false);c(true);c(false);d.select()};this.getRangeAt=function(){return e()}}tinymce.dom.TridentSelection=b})();(function(){var z=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,y=0,w=Object.prototype.toString,F=Array.prototype.splice,t=Array.prototype.push,E=Array.prototype.sort;var I=function(k,j,p,f){p=p||[];var s=j=j||document;if(j.nodeType!==1&&j.nodeType!==9){return[]}if(!k||typeof k!=="string"){return p}var o=[],m,r,d,g,q,l,n=true,c=H(j);z.lastIndex=0;while((m=z.exec(k))!==null){o.push(m[1]);if(m[2]){l=RegExp.rightContext;break}}if(o.length>1&&D.exec(k)){if(o.length===2&&C.relative[o[0]]){r=v(o[0]+o[1],j)}else{r=C.relative[o[0]]?[j]:I(o.shift(),j);while(o.length){k=o.shift();if(C.relative[k]){k+=o.shift()}r=v(k,r)}}}else{if(!f&&o.length>1&&j.nodeType===9&&!c&&C.match.ID.test(o[0])&&!C.match.ID.test(o[o.length-1])){var b=I.find(o.shift(),j,c);j=b.expr?I.filter(b.expr,b.set)[0]:b.set[0]}if(j){var b=f?{expr:o.pop(),set:A(f)}:I.find(o.pop(),o.length===1&&(o[0]==="~"||o[0]==="+")&&j.parentNode?j.parentNode:j,c);r=b.expr?I.filter(b.expr,b.set):b.set;if(o.length>0){d=A(r)}else{n=false}while(o.length){var h=o.pop(),a=h;if(!C.relative[h]){h=""}else{a=o.pop()}if(a==null){a=j}C.relative[h](d,a,c)}}else{d=o=[]}}if(!d){d=r}if(!d){throw"Syntax error, unrecognized expression: "+(h||k)}if(w.call(d)==="[object Array]"){if(!n){t.apply(p,d)}else{if(j&&j.nodeType===1){for(var i=0;d[i]!=null;i++){if(d[i]&&(d[i]===true||d[i].nodeType===1&&B(j,d[i]))){t.call(p,r[i])}}}else{for(var i=0;d[i]!=null;i++){if(d[i]&&d[i].nodeType===1){t.call(p,r[i])}}}}}else{A(d,p)}if(l){I(l,s,p,f);I.uniqueSort(p)}return p};I.uniqueSort=function(a){if(x){hasDuplicate=false;E.call(a,x);if(hasDuplicate){for(var b=1;b<a.length;b++){if(a[b]===a[b-1]){F.call(a,b--,1)}}}}};I.matches=function(b,a){return I(b,null,null,a)};I.find=function(c,b,a){var d,g;if(!c){return[]}for(var h=0,i=C.order.length;h<i;h++){var f=C.order[h],g;if((g=C.match[f].exec(c))){var j=RegExp.leftContext;if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(/\\/g,"");d=C.find[f](g,b,a);if(d!=null){c=c.replace(C.match[f],"");break}}}}if(!d){d=b.getElementsByTagName("*")}return{set:d,expr:c}};I.filter=function(b,c,p,l){var n=b,k=[],g=c,i,f,h=c&&c[0]&&H(c[0]);while(b&&c.length){for(var d in C.filter){if((i=C.match[d].exec(b))!=null){var o=C.filter[d],m,q;f=false;if(g==k){k=[]}if(C.preFilter[d]){i=C.preFilter[d](i,g,p,k,l,h);if(!i){f=m=true}else{if(i===true){continue}}}if(i){for(var j=0;(q=g[j])!=null;j++){if(q){m=o(q,i,j,g);var a=l^!!m;if(p&&m!=null){if(a){f=true}else{g[j]=false}}else{if(a){k.push(q);f=true}}}}}if(m!==undefined){if(!p){g=k}b=b.replace(C.match[d],"");if(!f){return[]}break}}}if(b==n){if(f==null){throw"Syntax error, unrecognized expression: "+b}else{break}}n=b}return g};var C=I.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(c,b,d){var g=typeof b==="string",a=g&&!/\W/.test(b),f=g&&!a;if(a&&!d){b=b.toUpperCase()}for(var h=0,i=c.length,j;h<i;h++){if((j=c[h])){while((j=j.previousSibling)&&j.nodeType!==1){}c[h]=f||j&&j.nodeName===b?j||false:j===b}}if(f){I.filter(b,c,true)}},">":function(i,f,h){var b=typeof f==="string";if(b&&!/\W/.test(f)){f=h?f:f.toUpperCase();for(var d=0,g=i.length;d<g;d++){var a=i[d];if(a){var c=a.parentNode;i[d]=c.nodeName===f?c:false}}}else{for(var d=0,g=i.length;d<g;d++){var a=i[d];if(a){i[d]=b?a.parentNode:a.parentNode===f}}if(b){I.filter(f,i,true)}}},"":function(c,f,a){var d=y++,g=u;if(!f.match(/\W/)){var b=f=a?f:f.toUpperCase();g=J}g("parentNode",f,d,c,b,a)},"~":function(c,f,a){var d=y++,g=u;if(typeof f==="string"&&!f.match(/\W/)){var b=f=a?f:f.toUpperCase();g=J}g("previousSibling",f,d,c,b,a)}},find:{ID:function(c,b,a){if(typeof b.getElementById!=="undefined"&&!a){var d=b.getElementById(c[1]);return d?[d]:[]}},NAME:function(d,a,h){if(typeof a.getElementsByName!=="undefined"){var f=[],b=a.getElementsByName(d[1]);for(var c=0,g=b.length;c<g;c++){if(b[c].getAttribute("name")===d[1]){f.push(b[c])}}return f.length===0?null:f}},TAG:function(b,a){return a.getElementsByTagName(b[1])}},preFilter:{CLASS:function(c,f,d,g,i,h){c=" "+c[1].replace(/\\/g,"")+" ";if(h){return c}for(var b=0,a;(a=f[b])!=null;b++){if(a){if(i^(a.className&&(" "+a.className+" ").indexOf(c)>=0)){if(!d){g.push(a)}}else{if(d){f[b]=false}}}}return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(b,c){for(var a=0;c[a]===false;a++){}return c[a]&&H(c[a])?b[1]:b[1].toUpperCase()},CHILD:function(b){if(b[1]=="nth"){var a=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(b[2]=="even"&&"2n"||b[2]=="odd"&&"2n+1"||!/\D/.test(b[2])&&"0n+"+b[2]||b[2]);b[2]=(a[1]+(a[2]||1))-0;b[3]=a[3]-0}b[0]=y++;return b},ATTR:function(b,f,d,g,a,h){var c=b[1].replace(/\\/g,"");if(!h&&C.attrMap[c]){b[1]=C.attrMap[c]}if(b[2]==="~="){b[4]=" "+b[4]+" "}return b},PSEUDO:function(b,f,d,g,a){if(b[1]==="not"){if(b[3].match(z).length>1||/^\w/.test(b[3])){b[3]=I(b[3],null,null,f)}else{var c=I.filter(b[3],f,d,true^a);if(!d){g.push.apply(g,c)}return false}}else{if(C.match.POS.test(b[0])||C.match.CHILD.test(b[0])){return true}}return b},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){a.parentNode.selectedIndex;return a.selected===true},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!I(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toUpperCase()==="BUTTON"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(b,c,d,a){return c===a.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==b}},filter:{PSEUDO:function(i,d,c,h){var f=d[1],b=C.filters[f];if(b){return b(i,c,d,h)}else{if(f==="contains"){return(i.textContent||i.innerText||"").indexOf(d[3])>=0}else{if(f==="not"){var a=d[3];for(var c=0,g=a.length;c<g;c++){if(a[c]===i){return false}}return true}}}},CHILD:function(c,i){var f=i[1],k=c;switch(f){case"only":case"first":while(k=k.previousSibling){if(k.nodeType===1){return false}}if(f=="first"){return true}k=c;case"last":while(k=k.nextSibling){if(k.nodeType===1){return false}}return true;case"nth":var j=i[2],a=i[3];if(j==1&&a==0){return true}var g=i[0],b=c.parentNode;if(b&&(b.sizcache!==g||!c.nodeIndex)){var h=0;for(k=b.firstChild;k;k=k.nextSibling){if(k.nodeType===1){k.nodeIndex=++h}}b.sizcache=g}var d=c.nodeIndex-a;if(j==0){return d==0}else{return(d%j==0&&d/j>=0)}}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return(b==="*"&&a.nodeType===1)||a.nodeName===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,c){var d=c[1],g=C.attrHandle[d]?C.attrHandle[d](a):a[d]!=null?a[d]:a.getAttribute(d),h=g+"",b=c[2],f=c[4];return g==null?b==="!=":b==="="?h===f:b==="*="?h.indexOf(f)>=0:b==="~="?(" "+h+" ").indexOf(f)>=0:!f?h&&g!==false:b==="!="?h!=f:b==="^="?h.indexOf(f)===0:b==="$="?h.substr(h.length-f.length)===f:b==="|="?h===f||h.substr(0,f.length+1)===f+"-":false},POS:function(b,f,d,a){var g=f[2],c=C.setFilters[g];if(c){return c(b,d,f,a)}}}};var D=C.match.POS;for(var G in C.match){C.match[G]=new RegExp(C.match[G].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var A=function(a,b){a=Array.prototype.slice.call(a);if(b){t.apply(b,a);return b}return a};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(e){A=function(a,b){var d=b||[];if(w.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length==="number"){for(var c=0,f=a.length;c<f;c++){d.push(a[c])}}else{for(var c=0;a[c];c++){d.push(a[c])}}}return d}}var x;if(document.documentElement.compareDocumentPosition){x=function(b,c){var a=b.compareDocumentPosition(c)&4?-1:b===c?0:1;if(a===0){hasDuplicate=true}return a}}else{if("sourceIndex" in document.documentElement){x=function(b,c){var a=b.sourceIndex-c.sourceIndex;if(a===0){hasDuplicate=true}return a}}else{if(document.createRange){x=function(b,d){var c=b.ownerDocument.createRange(),f=d.ownerDocument.createRange();c.selectNode(b);c.collapse(true);f.selectNode(d);f.collapse(true);var a=c.compareBoundaryPoints(Range.START_TO_END,f);if(a===0){hasDuplicate=true}return a}}}}(function(){var b=document.createElement("form"),a="script"+(new Date).getTime();b.innerHTML="<input name='"+a+"'/>";var c=document.documentElement;c.insertBefore(b,c.firstChild);if(!!document.getElementById(a)){C.find.ID=function(f,d,h){if(typeof d.getElementById!=="undefined"&&!h){var g=d.getElementById(f[1]);return g?g.id===f[1]||typeof g.getAttributeNode!=="undefined"&&g.getAttributeNode("id").nodeValue===f[1]?[g]:undefined:[]}};C.filter.ID=function(d,g){var f=typeof d.getAttributeNode!=="undefined"&&d.getAttributeNode("id");return d.nodeType===1&&f&&f.nodeValue===g}}c.removeChild(b)})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0){C.find.TAG=function(g,b){var c=b.getElementsByTagName(g[1]);if(g[1]==="*"){var d=[];for(var f=0;c[f];f++){if(c[f].nodeType===1){d.push(c[f])}}c=d}return c}}a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"){C.attrHandle.href=function(b){return b.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var c=I,a=document.createElement("div");a.innerHTML="<p class='TEST'></p>";if(a.querySelectorAll&&a.querySelectorAll(".TEST").length===0){return}I=function(i,d,g,f){d=d||document;if(!f&&d.nodeType===9&&!H(d)){try{return A(d.querySelectorAll(i),g)}catch(h){}}return c(i,d,g,f)};for(var b in c){I[b]=c[b]}})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName("e").length===0){return}a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}C.order.splice(1,0,"CLASS");C.find.CLASS=function(d,c,b){if(typeof c.getElementsByClassName!=="undefined"&&!b){return c.getElementsByClassName(d[1])}}})()}function J(l,g,h,a,f,b){var c=l=="previousSibling"&&!b;for(var j=0,k=a.length;j<k;j++){var d=a[j];if(d){if(c&&d.nodeType===1){d.sizcache=h;d.sizset=j}d=d[l];var i=false;while(d){if(d.sizcache===h){i=a[d.sizset];break}if(d.nodeType===1&&!b){d.sizcache=h;d.sizset=j}if(d.nodeName===g){i=d;break}d=d[l]}a[j]=i}}}function u(l,g,h,a,f,b){var c=l=="previousSibling"&&!b;for(var j=0,k=a.length;j<k;j++){var d=a[j];if(d){if(c&&d.nodeType===1){d.sizcache=h;d.sizset=j}d=d[l];var i=false;while(d){if(d.sizcache===h){i=a[d.sizset];break}if(d.nodeType===1){if(!b){d.sizcache=h;d.sizset=j}if(typeof g!=="string"){if(d===g){i=true;break}}else{if(I.filter(g,[d]).length>0){i=d;break}}}d=d[l]}a[j]=i}}}var B=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var H=function(a){return a.nodeType===9&&a.documentElement.nodeName!=="HTML"||!!a.ownerDocument&&a.ownerDocument.documentElement.nodeName!=="HTML"};var v=function(g,h){var c=[],b="",a,d=h.nodeType?[h]:h;while((a=C.match.PSEUDO.exec(g))){b+=a[0];g=g.replace(C.match.PSEUDO,"")}g=C.relative[g]?g+"*":g;for(var i=0,f=d.length;i<f;i++){I(g,d[i],c)}return I.filter(b,c)};window.tinymce.dom.Sizzle=I})();(function(k){var i=k.each,l=k.DOM,g=k.isIE,j=k.isWebKit,h;k.create("static tinymce.dom.Event",{inits:[],events:[],add:function(a,o,b,d){var n,f=this,e=f.events,c;if(a&&a.hasOwnProperty&&a instanceof Array){c=[];i(a,function(m){m=l.get(m);c.push(f.add(m,o,b,d))});return c}a=l.get(a);if(!a){return}n=function(m){m=m||window.event;if(m&&!m.target&&g){m.target=m.srcElement}if(!d){return b(m)}return b.call(d,m)};if(o=="unload"){k.unloads.unshift({func:n});return n}if(o=="init"){if(f.domLoaded){n()}else{f.inits.push(n)}return n}e.push({obj:a,name:o,func:b,cfunc:n,scope:d});f._add(a,o,n);return b},remove:function(b,a,c){var f=this,n=f.events,e=false,d;if(b&&b.hasOwnProperty&&b instanceof Array){d=[];i(b,function(m){m=l.get(m);d.push(f.remove(m,a,c))});return d}b=l.get(b);i(n,function(m,p){if(m.obj==b&&m.name==a&&(!c||(m.func==c||m.cfunc==c))){n.splice(p,1);f._remove(b,a,m.cfunc);e=true;return false}});return e},clear:function(a){var c=this,e=c.events,d,b;if(a){a=l.get(a);for(d=e.length-1;d>=0;d--){b=e[d];if(b.obj===a){c._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null;e.splice(d,1)}}}},cancel:function(a){if(!a){return false}this.stop(a);return this.prevent(a)},stop:function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}return false},prevent:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false},_unload:function(){var a=h;i(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc);b.obj=b.cfunc=null});a.events=[];a=null},_add:function(b,a,c){if(b.attachEvent){b.attachEvent("on"+a,c)}else{if(b.addEventListener){b.addEventListener(a,c,false)}else{b["on"+a]=c}}},_remove:function(b,a,c){if(b){try{if(b.detachEvent){b.detachEvent("on"+a,c)}else{if(b.removeEventListener){b.removeEventListener(a,c,false)}else{b["on"+a]=null}}}catch(d){}}},_pageInit:function(){var a=h;if(a.domLoaded){return}a._remove(window,"DOMContentLoaded",a._pageInit);a.domLoaded=true;i(a.inits,function(b){b()});a.inits=[]},_wait:function(){var a;if(window.tinyMCE_GZ&&tinyMCE_GZ.loaded){h.domLoaded=1;return}if(g&&document.location.protocol!="https:"){document.write("<script id=__ie_onload defer src='javascript:\"\"';><\/script>");l.get("__ie_onload").onreadystatechange=function(){if(this.readyState=="complete"){h._pageInit();l.get("__ie_onload").onreadystatechange=null}}}else{h._add(window,"DOMContentLoaded",h._pageInit,h);if(g||j){a=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(a);h._pageInit()}},10)}}}});h=k.dom.Event;h._wait();k.addUnload(h._unload)})(tinymce);(function(d){var c=d.each;d.create("tinymce.dom.Element",{Element:function(a,h){var j=this,b,i;h=h||{};j.id=a;j.dom=b=h.dom||d.DOM;j.settings=h;if(!d.isIE){i=j.dom.get(j.id)}c(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(e){j[e]=function(){var g=[a],f;for(f=0;f<arguments.length;f++){g.push(arguments[f])}g=b[e].apply(b,g);j.update(e);return g}})},on:function(a,b,f){return d.dom.Event.add(this.id,a,b,f)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var a=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||a.clientWidth),h:parseInt(this.getStyle("height")||a.clientHeight)}},moveTo:function(b,a){this.setStyles({left:b,top:a})},moveBy:function(f,a){var b=this.getXY();this.moveTo(b.x+f,b.y+a)},resizeTo:function(b,a){this.setStyles({width:b,height:a})},resizeBy:function(f,a){var b=this.getSize();this.resizeTo(b.w+f,b.h+a)},update:function(g){var b=this,h,a=b.dom;if(d.isIE6&&b.settings.blocker){g=g||"";if(g.indexOf("get")===0||g.indexOf("has")===0||g.indexOf("is")===0){return}if(g=="remove"){a.remove(b.blocker);return}if(!b.blocker){b.blocker=a.uniqueId();h=a.add(b.settings.container||a.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});a.setStyle(h,"opacity",0)}else{h=a.get(b.blocker)}a.setStyle(h,"left",b.getStyle("left",1));a.setStyle(h,"top",b.getStyle("top",1));a.setStyle(h,"width",b.getStyle("width",1));a.setStyle(h,"height",b.getStyle("height",1));a.setStyle(h,"display",b.getStyle("display",1));a.setStyle(h,"zIndex",parseInt(b.getStyle("zIndex",1)||0)-1)}}})})(tinymce);(function(j){function h(a){return a.replace(/[\n\r]+/g,"")}var f=j.is,g=j.isIE,i=j.each;j.create("tinymce.dom.Selection",{Selection:function(a,b,c){var d=this;d.dom=a;d.win=b;d.serializer=c;i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){d[e]=new j.util.Dispatcher(d)});if(!d.win.getSelection){d.tridentSel=new j.dom.TridentSelection(d)}j.addUnload(d.destroy,d)},getContent:function(o){var p=this,n=p.getRng(),b=p.dom.create("body"),d=p.getSel(),e,c,a;o=o||{};e=c="";o.get=true;o.format=o.format||"html";p.onBeforeGetContent.dispatch(p,o);if(o.format=="text"){return p.isCollapsed()?"":(n.text||(d.toString?d.toString():""))}if(n.cloneContents){a=n.cloneContents();if(a){b.appendChild(a)}}else{if(f(n.item)||f(n.htmlText)){b.innerHTML=n.item?n.item(0).outerHTML:n.htmlText}else{b.innerHTML=n.toString()}}if(/^\s/.test(b.innerHTML)){e=" "}if(/\s+$/.test(b.innerHTML)){c=" "}o.getInner=true;o.content=p.isCollapsed()?"":e+p.serializer.serialize(b,o)+c;p.onGetContent.dispatch(p,o);return o.content},setContent:function(d,e){var m=this,c=m.getRng(),a,b=m.win.document;e=e||{format:"html"};e.set=true;d=e.content=m.dom.processHTML(d);m.onBeforeSetContent.dispatch(m,e);d=e.content;if(c.insertNode){d+='<span id="__caret">_</span>';c.deleteContents();c.insertNode(m.getRng().createContextualFragment(d));a=m.dom.get("__caret");c=b.createRange();c.setStartBefore(a);c.setEndAfter(a);m.setRng(c);m.dom.remove("__caret")}else{if(c.item){b.execCommand("Delete",false,null);c=m.getRng()}c.pasteHTML(d)}m.onSetContent.dispatch(m,e)},getStart:function(){var c=this,b=c.getRng(),a;if(g){if(b.item){return b.item(0)}b=b.duplicate();b.collapse(1);a=b.parentElement();if(a&&a.nodeName=="BODY"){return a.firstChild}return a}else{a=b.startContainer;if(a.nodeName=="BODY"){return a.firstChild}return c.dom.getParent(a,"*")}},getEnd:function(){var c=this,b=c.getRng(),a;if(g){if(b.item){return b.item(0)}b=b.duplicate();b.collapse(0);a=b.parentElement();if(a&&a.nodeName=="BODY"){return a.lastChild}return a}else{a=b.endContainer;if(a.nodeName=="BODY"){return a.lastChild}return c.dom.getParent(a,"*")}},getBookmark:function(c){var F=this,C=F.getRng(),J,B,D,r=F.dom.getViewPort(F.win),e,t,a,A,d=-16777215,E,H=F.dom.getRoot(),I=0,G=0,b;B=r.x;D=r.y;if(c=="simple"){return{rng:C,scrollX:B,scrollY:D}}if(g){if(C.item){e=C.item(0);i(F.dom.select(e.nodeName),function(k,l){if(e==k){t=l;return false}});return{tag:e.nodeName,index:t,scrollX:B,scrollY:D}}J=F.dom.doc.body.createTextRange();J.moveToElementText(H);J.collapse(true);a=Math.abs(J.move("character",d));J=C.duplicate();J.collapse(true);t=Math.abs(J.move("character",d));J=C.duplicate();J.collapse(false);A=Math.abs(J.move("character",d))-t;return{start:t-a,length:A,scrollX:B,scrollY:D}}e=F.getNode();E=F.getSel();if(!E){return null}if(e&&e.nodeName=="IMG"){return{scrollX:B,scrollY:D}}function s(k,o,l){var m=F.dom.doc.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,false),n,q=0,p={};while((n=m.nextNode())!=null){if(n==o){p.start=q}if(n==l){p.end=q;return p}q+=h(n.nodeValue||"").length}return null}if(E.anchorNode==E.focusNode&&E.anchorOffset==E.focusOffset){e=s(H,E.anchorNode,E.focusNode);if(!e){return{scrollX:B,scrollY:D}}h(E.anchorNode.nodeValue||"").replace(/^\s+/,function(k){I=k.length});return{start:Math.max(e.start+E.anchorOffset-I,0),end:Math.max(e.end+E.focusOffset-I,0),scrollX:B,scrollY:D,beg:E.anchorOffset-I==0}}else{e=s(H,C.startContainer,C.endContainer);if(!e){return{scrollX:B,scrollY:D}}return{start:Math.max(e.start+C.startOffset-I,0),end:Math.max(e.end+C.endOffset-G,0),scrollX:B,scrollY:D,beg:C.startOffset-I==0}}},moveToBookmark:function(c){var b=this,u=b.getRng(),a=b.getSel(),r=b.dom.getRoot(),d,t,q;function s(m,G,k){var n=b.dom.doc.createTreeWalker(m,NodeFilter.SHOW_TEXT,null,false),E,H=0,o={},F,l,p,w;while((E=n.nextNode())!=null){p=w=0;q=E.nodeValue||"";t=h(q).length;H+=t;if(H>=G&&!o.startNode){F=G-(H-t);if(c.beg&&F>=t){continue}o.startNode=E;o.startOffset=F+w}if(H>=k){o.endNode=E;o.endOffset=k-(H-t)+w;return o}}return null}if(!c){return false}b.win.scrollTo(c.scrollX,c.scrollY);if(g){if(u=c.rng){try{u.select()}catch(e){}return true}b.win.focus();if(c.tag){u=r.createControlRange();i(b.dom.select(c.tag),function(k,l){if(l==c.index){u.addElement(k)}})}else{try{if(c.start<0){return true}u=a.createRange();u.moveToElementText(r);u.collapse(true);u.moveStart("character",c.start);u.moveEnd("character",c.length)}catch(v){return true}}try{u.select()}catch(e){}return true}if(!a){return false}if(c.rng){a.removeAllRanges();a.addRange(c.rng)}else{if(f(c.start)&&f(c.end)){try{d=s(r,c.start,c.end);if(d){u=b.dom.doc.createRange();u.setStart(d.startNode,d.startOffset);u.setEnd(d.endNode,d.endOffset);a.removeAllRanges();a.addRange(u)}if(!j.isOpera){b.win.focus()}}catch(e){}}}},select:function(u,e){var b=this,v=b.getRng(),a=b.getSel(),c,d,n,r=b.win.document;function t(k,l){var m,o;if(k){m=r.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,false);while(k=m.nextNode()){o=k;if(j.trim(k.nodeValue).length!=0){if(l){return k}else{o=k}}}}return o}if(g){try{c=r.body;if(/^(IMG|TABLE)$/.test(u.nodeName)){v=c.createControlRange();v.addElement(u)}else{v=c.createTextRange();v.moveToElementText(u)}v.select()}catch(s){}}else{if(e){d=t(u,1)||b.dom.select("br:first",u)[0];n=t(u,0)||b.dom.select("br:last",u)[0];if(d&&n){v=r.createRange();if(d.nodeName=="BR"){v.setStartBefore(d)}else{v.setStart(d,0)}if(n.nodeName=="BR"){v.setEndBefore(n)}else{v.setEnd(n,n.nodeValue.length)}}else{v.selectNode(u)}}else{v.selectNode(u)}b.setRng(v)}return u},isCollapsed:function(){var c=this,a=c.getRng(),b=c.getSel();if(!a||a.item){return false}return !b||a.boundingWidth==0||a.collapsed},collapse:function(d){var c=this,b=c.getRng(),a;if(b.item){a=b.item(0);b=this.win.document.body.createTextRange();b.moveToElementText(a)}b.collapse(!!d);c.setRng(b)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(a){var d=this,c,b;if(a&&d.tridentSel){return d.tridentSel.getRangeAt(0)}try{if(c=d.getSel()){b=c.rangeCount>0?c.getRangeAt(0):(c.createRange?c.createRange():d.win.document.createRange())}}catch(e){}if(!b){b=g?d.win.document.body.createTextRange():d.win.document.createRange()}return b},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){b.removeAllRanges();b.addRange(a)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;b.setContent(b.dom.getOuterHTML(a));return a},getNode:function(){var d=this,b=d.getRng(),c=d.getSel(),a;if(!g){if(!b){return d.dom.getRoot()}a=b.commonAncestorContainer;if(!b.collapsed){if(j.isWebKit&&c.anchorNode&&c.anchorNode.nodeType==1){return c.anchorNode.childNodes[c.anchorOffset]}if(b.startContainer==b.endContainer){if(b.startOffset-b.endOffset<2){if(b.startContainer.hasChildNodes()){a=b.startContainer.childNodes[b.startOffset]}}}}return d.dom.getParent(a,"*")}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(o,p){var e=this,d=e.dom,a,n,b,c=[];a=d.getParent(o||e.getStart(),d.isBlock);n=d.getParent(p||e.getEnd(),d.isBlock);if(a){c.push(a)}if(a&&n&&a!=n){b=a;while((b=b.nextSibling)&&b!=n){if(d.isBlock(b)){c.push(b)}}}if(n&&a!=n){c.push(n)}return c},destroy:function(a){var b=this;b.win=null;if(!a){j.removeUnload(b.destroy)}}})})(tinymce);(function(b){b.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(d){function a(){var c=document.implementation;if(!c||!c.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(f){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(f){}}else{return c.createDocument("","",null)}}this.doc=a();this.valid=b.isOpera||b.isWebKit;this.reset()},reset:function(){var a=this,d=a.doc;if(d.firstChild){d.removeChild(d.firstChild)}a.node=d.appendChild(d.createElement("html"))},writeStartElement:function(d){var a=this;a.node=a.node.appendChild(a.doc.createElement(d))},writeAttribute:function(d,a){if(this.valid){a=a.replace(/>/g,"%MCGT%")}this.node.setAttribute(d,a)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var a=this,d=a.node;d.appendChild(a.doc.createTextNode(""));a.node=d.parentNode},writeText:function(a){if(this.valid){a=a.replace(/>/g,"%MCGT%")}this.node.appendChild(this.doc.createTextNode(a))},writeCDATA:function(a){this.node.appendChild(this.doc.createCDATA(a))},writeComment:function(a){if(b.isIE){a=a.replace(/^\-|\-$/g," ")}this.node.appendChild(this.doc.createComment(a.replace(/\-\-/g," ")))},getContent:function(){var a;a=this.doc.xml||new XMLSerializer().serializeToString(this.doc);a=a.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");a=a.replace(/ ?\/>/g," />");if(this.valid){a=a.replace(/\%MCGT%/g,"&gt;")}return a}})})(tinymce);(function(b){b.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(a){this.settings=b.extend({indent_char:" ",indentation:1},a);this.reset()},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0},writeStartElement:function(a){this._writeAttributesEnd();this.writeRaw("<"+a);this.tags.push(a);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(e,a){var f=this;f.writeRaw(" "+f.encode(e)+'="'+f.encode(a)+'"')},writeEndElement:function(){var a;if(this.tags.length>0){a=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+a+">")}if(this.settings.indentation>0){this.writeRaw("\n")}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n")}}},writeText:function(a){this._writeAttributesEnd();this.writeRaw(this.encode(a));this.count++},writeCDATA:function(a){this._writeAttributesEnd();this.writeRaw("<![CDATA["+a+"]]>");this.count++},writeComment:function(a){this._writeAttributesEnd();this.writeRaw("<!-- "+a+"-->");this.count++},writeRaw:function(a){this.str+=a},encode:function(a){return a.replace(/[<>&"]/g,function(d){switch(d){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return d})},getContent:function(){return this.str},_writeAttributesEnd:function(a){if(!this.inAttr){return}this.inAttr=false;if(a&&this.elementCount==this.count){this.writeRaw(" />");return false}this.writeRaw(">");return true}})})(tinymce);(function(l){var j=l.extend,k=l.each,h=l.util.Dispatcher,m=l.isIE,i=l.isGecko;function n(a){return a.replace(/([?+*])/g,".$1")}l.create("tinymce.dom.Serializer",{Serializer:function(a){var b=this;b.key=0;b.onPreProcess=new h(b);b.onPostProcess=new h(b);try{b.writer=new l.dom.XMLWriter()}catch(c){b.writer=new l.dom.StringWriter()}b.settings=a=j({dom:l.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},a);b.dom=a.dom;if(a.remove_redundant_brs){b.onPostProcess.add(function(e,d){d.content=d.content.replace(/<br \/>(\s*<\/li>)/g,"$1")})}if(a.element_format=="html"){b.onPostProcess.add(function(e,d){d.content=d.content.replace(/<([^>]+) \/>/g,"<$1>")})}if(a.fix_list_elements){b.onPreProcess.add(function(x,C){var f,p,r=["ol","ul"],A,B,d,g=/^(OL|UL)$/,o;function e(s,q){var u=q.split(","),t;while((s=s.previousSibling)!=null){for(t=0;t<u.length;t++){if(s.nodeName==u[t]){return s}}}return null}for(p=0;p<r.length;p++){f=b.dom.select(r[p],C.node);for(A=0;A<f.length;A++){B=f[A];d=B.parentNode;if(g.test(d.nodeName)){o=e(B,"LI");if(!o){o=b.dom.create("li");o.innerHTML="&nbsp;";o.appendChild(B);d.insertBefore(o,d.firstChild)}else{o.appendChild(B)}}}}})}if(a.fix_table_elements){b.onPreProcess.add(function(e,d){k(b.dom.select("p table",d.node),function(f){b.dom.split(b.dom.getParent(f,"p"),f)})})}},setEntities:function(e){var g=this,c,a,d={},f="",b;if(g.entityLookup){return}c=e.split(",");for(a=0;a<c.length;a+=2){b=c[a];if(b==34||b==38||b==60||b==62){continue}d[String.fromCharCode(c[a])]=c[a+1];b=parseInt(c[a]).toString(16);f+="\\u"+"0000".substring(b.length)+b}if(!f){g.settings.entity_encoding="raw";return}g.entitiesRE=new RegExp("["+f+"]","g");g.entityLookup=d},setValidChildRules:function(a){this.childRules=null;this.addValidChildRules(a)},addValidChildRules:function(b){var c=this,a,e,d;if(!b){return}a="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment";e="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment";d="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP";k(b.split(","),function(p){var g=p.split(/\[|\]/),f;p="";k(g[1].split("|"),function(o){if(p){p+="|"}switch(o){case"%itrans":o=e;break;case"%itrans_na":o=e.substring(2);break;case"%istrict":o=a;break;case"%istrict_na":o=a.substring(2);break;case"%btrans":o=d;break;case"%bstrict":o=d;break}p+=o});f=new RegExp("^("+p.toLowerCase()+")$","i");k(g[0].split("/"),function(o){c.childRules=c.childRules||{};c.childRules[o]=f})});b="";k(c.childRules,function(g,f){if(b){b+="|"}b+=f});c.parentElementsRE=new RegExp("^("+b.toLowerCase()+")$","i")},setRules:function(a){var b=this;b._setup();b.rules={};b.wildRules=[];b.validElements={};return b.addRules(a)},addRules:function(b){var c=this,a;if(!b){return}c._setup();k(b.split(","),function(d){var p=d.split(/\[|\]/),e=p[0].split("/"),g,f,s,t=[];if(a){f=l.extend([],a.attribs)}if(p.length>1){k(p[1].split("|"),function(o){var r={},q;f=f||[];o=o.replace(/::/g,"~");o=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(o);o[2]=o[2].replace(/~/g,":");if(o[1]=="!"){g=g||[];g.push(o[2])}if(o[1]=="-"){for(q=0;q<f.length;q++){if(f[q].name==o[2]){f.splice(q,1);return}}}switch(o[3]){case"=":r.defaultVal=o[4]||"";break;case":":r.forcedVal=o[4];break;case"<":r.validVals=o[4].split("?");break}if(/[*.?]/.test(o[2])){s=s||[];r.nameRE=new RegExp("^"+n(o[2])+"$");s.push(r)}else{r.name=o[2];f.push(r)}t.push(o[2])})}k(e,function(q,r){var o=q.charAt(0),x=1,y={};if(a){if(a.noEmpty){y.noEmpty=a.noEmpty}if(a.fullEnd){y.fullEnd=a.fullEnd}if(a.padd){y.padd=a.padd}}switch(o){case"-":y.noEmpty=true;break;case"+":y.fullEnd=true;break;case"#":y.padd=true;break;default:x=0}e[r]=q=q.substring(x);c.validElements[q]=1;if(/[*.?]/.test(e[0])){y.nameRE=new RegExp("^"+n(e[0])+"$");c.wildRules=c.wildRules||{};c.wildRules.push(y)}else{y.name=e[0];if(e[0]=="@"){a=y}c.rules[q]=y}y.attribs=f;if(g){y.requiredAttribs=g}if(s){q="";k(t,function(u){if(q){q+="|"}q+="("+n(u)+")"});y.validAttribsRE=new RegExp("^"+q.toLowerCase()+"$");y.wildAttribs=s}})});b="";k(c.validElements,function(d,e){if(b){b+="|"}if(e!="@"){b+=e}});c.validElementsRE=new RegExp("^("+n(b.toLowerCase())+")$")},findRule:function(a){var d=this,b=d.rules,e,c;d._setup();c=b[a];if(c){return c}b=d.wildRules;for(e=0;e<b.length;e++){if(b[e].nameRE.test(a)){return b[e]}}return null},findAttribRule:function(d,a){var c,b=d.wildAttribs;for(c=0;c<b.length;c++){if(b[c].nameRE.test(a)){return b[c]}}return null},serialize:function(a,b){var c,d=this;d._setup();b=b||{};b.format=b.format||"html";d.processObj=b;a=a.cloneNode(true);d.key=""+(parseInt(d.key)+1);if(!b.no_events){b.node=a;d.onPreProcess.dispatch(d,b)}d.writer.reset();d._serializeNode(a,b.getInner);b.content=d.writer.getContent();if(!b.no_events){d.onPostProcess.dispatch(d,b)}d._postProcess(b);b.node=null;return l.trim(b.content)},_postProcess:function(f){var e=this,c=e.settings,d=f.content,a=[],b;if(f.format=="html"){b=e._protect({content:d,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});d=b.content;if(c.entity_encoding!=="raw"){d=e._encode(d)}if(!f.set){d=d.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,c.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(c.remove_linebreaks){d=d.replace(/\r?\n|\r/g," ");d=d.replace(/(<[^>]+>)\s+/g,"$1 ");d=d.replace(/\s+(<\/[^>]+>)/g," $1");d=d.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>");d=d.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");d=d.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(c.apply_source_formatting&&c.indent_mode=="simple"){d=d.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");d=d.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>");d=d.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");d=d.replace(/\n\n/g,"\n")}}d=e._unprotect(d,b);d=d.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>");if(c.entity_encoding=="raw"){d=d.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>")}}f.content=d},_serializeNode:function(s,J){var b=this,a=b.settings,e=b.writer,H,L,t,f,g,d,G,M,c,K,w,v,I;if(!a.node_filter||a.node_filter(s)){switch(s.nodeType){case 1:if(s.hasAttribute?s.hasAttribute("mce_bogus"):s.getAttribute("mce_bogus")){return}I=false;H=s.hasChildNodes();K=s.getAttribute("mce_name")||s.nodeName.toLowerCase();if(m){if(s.scopeName!=="HTML"&&s.scopeName!=="html"){K=s.scopeName+":"+K}}if(K.indexOf("mce:")===0){K=K.substring(4)}if(!b.validElementsRE.test(K)||(b.invalidElementsRE&&b.invalidElementsRE.test(K))||J){I=true;break}if(m){if(a.fix_content_duplication){if(s.mce_serialized==b.key){return}s.mce_serialized=b.key}if(K.charAt(0)=="/"){K=K.substring(1)}}else{if(i){if(s.nodeName==="BR"&&s.getAttribute("type")=="_moz"){return}}}if(b.childRules){if(b.parentElementsRE.test(b.elementName)){if(!b.childRules[b.elementName].test(K)){I=true;break}}b.elementName=K}w=b.findRule(K);K=w.name||K;if((!H&&w.noEmpty)||(m&&!K)){I=true;break}if(w.requiredAttribs){d=w.requiredAttribs;for(f=d.length-1;f>=0;f--){if(this.dom.getAttrib(s,d[f])!==""){break}}if(f==-1){I=true;break}}e.writeStartElement(K);if(w.attribs){for(f=0,G=w.attribs,g=G.length;f<g;f++){d=G[f];c=b._getAttrib(s,d);if(c!==null){e.writeAttribute(d.name,c)}}}if(w.validAttribsRE){G=b.dom.getAttribs(s);for(f=G.length-1;f>-1;f--){M=G[f];if(M.specified){d=M.nodeName.toLowerCase();if(a.invalid_attrs.test(d)||!w.validAttribsRE.test(d)){continue}v=b.findAttribRule(w,d);c=b._getAttrib(s,v,d);if(c!==null){e.writeAttribute(d,c)}}}}if(w.padd){if(H&&(t=s.firstChild)&&t.nodeType===1&&s.childNodes.length===1){if(t.hasAttribute?t.hasAttribute("mce_bogus"):t.getAttribute("mce_bogus")){e.writeText("\u00a0")}}else{if(!H){e.writeText("\u00a0")}}}break;case 3:if(b.childRules&&b.parentElementsRE.test(b.elementName)){if(!b.childRules[b.elementName].test(s.nodeName)){return}}return e.writeText(s.nodeValue);case 4:return e.writeCDATA(s.nodeValue);case 8:return e.writeComment(s.nodeValue)}}else{if(s.nodeType==1){H=s.hasChildNodes()}}if(H){t=s.firstChild;while(t){b._serializeNode(t);b.elementName=K;t=t.nextSibling}}if(!I){if(H||!a.closed.test(K)){e.writeFullEndElement()}else{e.writeEndElement()}}},_protect:function(b){var c=this;b.items=b.items||[];function d(e){return e.replace(/[\r\n\\]/g,function(f){if(f==="\n"){return"\\n"}else{if(f==="\\"){return"\\\\"}}return"\\r"})}function a(e){return e.replace(/\\[\\rn]/g,function(f){if(f==="\\n"){return"\n"}else{if(f==="\\\\"){return"\\"}}return"\r"})}k(b.patterns,function(e){b.content=a(d(b.content).replace(e.pattern,function(r,q,f,g){f=a(f);if(e.encode){f=c._encode(f)}b.items.push(f);return q+"<!--mce:"+(b.items.length-1)+"-->"+g}))});return b},_unprotect:function(b,a){b=b.replace(/\<!--mce:([0-9]+)--\>/g,function(c,d){return a.items[parseInt(d)]});a.items=[];return b},_encode:function(a){var c=this,b=c.settings,d;if(b.entity_encoding!=="raw"){if(b.entity_encoding.indexOf("named")!=-1){c.setEntities(b.entities);d=c.entityLookup;a=a.replace(c.entitiesRE,function(f){var e;if(e=d[f]){f="&"+e+";"}return f})}if(b.entity_encoding.indexOf("numeric")!=-1){a=a.replace(/[\u007E-\uFFFF]/g,function(e){return"&#"+e.charCodeAt(0)+";"})}}return a},_setup:function(){var b=this,a=this.settings;if(b.done){return}b.done=1;b.setRules(a.valid_elements);b.addRules(a.extended_valid_elements);b.addValidChildRules(a.valid_child_elements);if(a.invalid_elements){b.invalidElementsRE=new RegExp("^("+n(a.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")}if(a.attrib_value_filter){b.attribValueFilter=a.attribValueFilter}},_getAttrib:function(a,d,e){var b,c;e=e||d.name;if(d.forcedVal&&(c=d.forcedVal)){if(c==="{$uid}"){return this.dom.uniqueId()}return c}c=this.dom.getAttrib(a,e);if(this.settings.bool_attrs.test(e)&&c){c=(""+c).toLowerCase();if(c==="false"||c==="0"){return null}c=e}switch(e){case"rowspan":case"colspan":if(c=="1"){c=""}break}if(this.attribValueFilter){c=this.attribValueFilter(e,c,a)}if(d.validVals){for(b=d.validVals.length-1;b>=0;b--){if(c==d.validVals[b]){break}}if(b==-1){return null}}if(c===""&&typeof(d.defaultVal)!="undefined"){c=d.defaultVal;if(c==="{$uid}"){return this.dom.uniqueId()}return c}else{if(e=="class"&&this.processObj.get){c=c.replace(/\s?mceItem\w+\s?/g,"")}}if(c===""){return null}return c}})})(tinymce);(function(tinymce){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(s){this.settings=s||{};this.queue=[];this.lookup={}},isDone:function(u){return this.lookup[u]?this.lookup[u].state==2:0},markDone:function(u){this.lookup[u]={state:2,url:u}},add:function(u,cb,s,pr){var t=this,lo=t.lookup,o;if(o=lo[u]){if(cb&&o.state==2){cb.call(s||this)}return o}o={state:0,url:u,func:cb,scope:s||this};if(pr){t.queue.unshift(o)}else{t.queue.push(o)}lo[u]=o;return o},load:function(u,cb,s){var t=this,o;if(o=t.lookup[u]){if(cb&&o.state==2){cb.call(s||t)}return o}function loadScript(u){if(Event.domLoaded||t.settings.strict_mode){tinymce.util.XHR.send({url:tinymce._addVer(u),error:t.settings.error,async:false,success:function(co){t.eval(co)}})}else{document.write('<script type="text/javascript" src="'+tinymce._addVer(u)+'"><\/script>')}}if(!tinymce.is(u,"string")){each(u,function(u){loadScript(u)});if(cb){cb.call(s||t)}}else{loadScript(u);if(cb){cb.call(s||t)}}},loadQueue:function(cb,s){var t=this;if(!t.queueLoading){t.queueLoading=1;t.queueCallbacks=[];t.loadScripts(t.queue,function(){t.queueLoading=0;if(cb){cb.call(s||t)}each(t.queueCallbacks,function(o){o.func.call(o.scope)})})}else{if(cb){t.queueCallbacks.push({func:cb,scope:s||t})}}},eval:function(co){var w=window;if(!w.execScript){try{eval.call(w,co)}catch(ex){eval(co,w)}}else{w.execScript(co)}},loadScripts:function(sc,cb,s){var t=this,lo=t.lookup;function done(o){o.state=2;if(o.func){o.func.call(o.scope||t)}}function allDone(){var l;l=sc.length;each(sc,function(o){o=lo[o.url];if(o.state===2){done(o);l--}else{load(o)}});if(l===0&&cb){cb.call(s||t);cb=0}}function load(o){if(o.state>0){return}o.state=1;tinymce.dom.ScriptLoader.loadScript(o.url,function(){done(o);allDone()})}each(sc,function(o){var u=o.url;if(!lo[u]){lo[u]=o;t.queue.push(o)}else{o=lo[u]}if(o.state>0){return}if(!Event.domLoaded&&!t.settings.strict_mode){var ix,ol="";if(cb||o.func){o.state=1;ix=tinymce.dom.ScriptLoader._addOnLoad(function(){done(o);allDone()});if(tinymce.isIE){ol=' onreadystatechange="'}else{ol=' onload="'}ol+="tinymce.dom.ScriptLoader._onLoad(this,'"+u+"',"+ix+');"'}document.write('<script type="text/javascript" src="'+tinymce._addVer(u)+'"'+ol+"><\/script>");if(!o.func){done(o)}}else{load(o)}});allDone()},"static":{_addOnLoad:function(f){var t=this;t._funcs=t._funcs||[];t._funcs.push(f);return t._funcs.length-1},_onLoad:function(e,u,ix){if(!tinymce.isIE||e.readyState=="complete"){this._funcs[ix].call(this)}},loadScript:function(u,cb){var id=tinymce.DOM.uniqueId(),e;function done(){Event.clear(id);tinymce.DOM.remove(id);if(cb){cb.call(document,u);cb=0}}if(tinymce.isIE){tinymce.util.XHR.send({url:tinymce._addVer(u),async:false,success:function(co){window.execScript(co);done()}})}else{e=tinymce.DOM.create("script",{id:id,type:"text/javascript",src:tinymce._addVer(u)});Event.add(e,"load",done);(document.getElementsByTagName("head")[0]||document.body).appendChild(e)}}}});tinymce.ScriptLoader=new tinymce.dom.ScriptLoader()})(tinymce);(function(f){var d=f.DOM,e=f.is;f.create("tinymce.ui.Control",{Control:function(a,b){this.id=a;this.settings=b=b||{};this.rendered=false;this.onRender=new f.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.disabled=0;this.active=0},setDisabled:function(b){var a;if(b!=this.disabled){a=d.get(this.id);if(a&&this.settings.unavailable_prefix){if(b){this.prevTitle=a.title;a.title=this.settings.unavailable_prefix+": "+a.title}else{a.title=this.prevTitle}}this.setState("Disabled",b);this.setState("Enabled",!b);this.disabled=b}},isDisabled:function(){return this.disabled},setActive:function(a){if(a!=this.active){this.setState("Active",a);this.active=a}},isActive:function(){return this.active},setState:function(a,c){var b=d.get(this.id);a=this.classPrefix+a;if(c){d.addClass(b,a)}else{d.removeClass(b,a)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){d.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;if(e(a.disabled)){b=a.disabled;a.disabled=-1;a.setDisabled(b)}if(e(a.active)){b=a.active;a.active=-1;a.setActive(b)}},remove:function(){d.remove(this.id);this.destroy()},destroy:function(){f.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,d){this.parent(c,d);this.controls=[];this.lookup={}},add:function(b){this.lookup[b.id]=b;this.controls.push(b);return b},get:function(b){return this.lookup[b]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(c,d){this.parent(c,d);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});(function(i){var j=i.is,f=i.DOM,h=i.each,g=i.walk;i.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b);this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a);this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent();if(j(a.selected)){a.setSelected(a.selected)}}})})(tinymce);(function(i){var j=i.is,f=i.DOM,h=i.each,g=i.walk;i.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(a,b){var c=this;c.parent(a,b);c.items={};c.collapsed=false;c.menuCount=0;c.onAddItem=new i.util.Dispatcher(this)},expand:function(a){var b=this;if(a){g(b,function(c){if(c.expand){c.expand()}},"items",b)}b.collapsed=false},collapse:function(a){var b=this;if(a){g(b,function(c){if(c.collapse){c.collapse()}},"items",b)}b.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(a){if(!a.settings){a=new i.ui.MenuItem(a.id||f.uniqueId(),a)}this.onAddItem.dispatch(this,a);return this.items[a.id]=a},addSeparator:function(){return this.add({separator:true})},addMenu:function(a){if(!a.collapse){a=this.createMenu(a)}this.menuCount++;return this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;g(a,function(b){if(b.removeAll){b.removeAll()}else{b.remove()}b.destroy()},"items",a);a.items={}},createMenu:function(a){var b=new i.ui.Menu(a.id||f.uniqueId(),a);b.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return b}})})(tinymce);(function(j){var k=j.is,l=j.DOM,i=j.each,h=j.dom.Event,g=j.dom.Element;j.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||l.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;if(k(b.icons)&&!b.icons){b["class"]+=" mceNoIcons"}this.parent(a,b);this.onShowMenu=new j.util.Dispatcher(this);this.onHideMenu=new j.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var c=this,b=c.settings,d;a.container=a.container||b.container;a.parent=c;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;d=new j.ui.DropMenu(a.id||l.uniqueId(),a);d.onAddItem.add(c.onAddItem.dispatch,c.onAddItem);return d},update:function(){var d=this,c=d.settings,f=l.get("menu_"+d.id+"_tbl"),a=l.get("menu_"+d.id+"_co"),e,b;e=c.max_width?Math.min(f.clientWidth,c.max_width):f.clientWidth;b=c.max_height?Math.min(f.clientHeight,c.max_height):f.clientHeight;if(!l.boxModel){d.element.setStyles({width:e+2,height:b+2})}else{d.element.setStyles({width:e,height:b})}if(c.max_width){l.setStyle(a,"width",e)}if(c.max_height){l.setStyle(a,"height",b);if(f.clientHeight<c.max_height){l.setStyle(a,"overflow","hidden")}}},showMenu:function(c,f,a){var C=this,e=C.settings,d,B=l.getViewPort(),E,t,D,b,y=2,w,x,s=C.classPrefix;C.collapse(1);if(C.isMenuVisible){return}if(!C.rendered){d=l.add(C.settings.container,C.renderNode());i(C.items,function(m){m.postRender()});C.element=new g("menu_"+C.id,{blocker:1,container:e.container})}else{d=l.get("menu_"+C.id)}if(!j.isOpera){l.setStyles(d,{left:-65535,top:-65535})}l.show(d);C.update();c+=e.offset_x||0;f+=e.offset_y||0;B.w-=4;B.h-=4;if(e.constrain){E=d.clientWidth-y;t=d.clientHeight-y;D=B.x+B.w;b=B.y+B.h;if((c+e.vp_offset_x+E)>D){c=a?a-E:Math.max(0,(D-e.vp_offset_x)-E)}if((f+e.vp_offset_y+t)>b){f=Math.max(0,(b-e.vp_offset_y)-t)}}l.setStyles(d,{left:c,top:f});C.element.update();C.isMenuVisible=1;C.mouseClickFunc=h.add(d,"click",function(n){var m;n=n.target;if(n&&(n=l.getParent(n,"TR"))&&!l.hasClass(n,s+"ItemSub")){m=C.items[n.id];if(m.isDisabled()){return}w=C;while(w){if(w.hideMenu){w.hideMenu()}w=w.settings.parent}if(m.settings.onclick){m.settings.onclick(n)}return h.cancel(n)}});if(C.hasMenus()){C.mouseOverFunc=h.add(d,"mouseover",function(m){var p,n,o;m=m.target;if(m&&(m=l.getParent(m,"TR"))){p=C.items[m.id];if(C.lastMenu){C.lastMenu.collapse(1)}if(p.isDisabled()){return}if(m&&l.hasClass(m,s+"ItemSub")){n=l.getRect(m);p.showMenu((n.x+n.w-y),n.y-y,n.x);C.lastMenu=p;l.addClass(l.get(p.id).firstChild,s+"ItemActive")}}})}C.onShowMenu.dispatch(C);if(e.keyboard_focus){h.add(d,"keydown",C._keyHandler,C);l.select("a","menu_"+C.id)[0].focus();C._focusIdx=0}},hideMenu:function(a){var d=this,b=l.get("menu_"+d.id),c;if(!d.isMenuVisible){return}h.remove(b,"mouseover",d.mouseOverFunc);h.remove(b,"click",d.mouseClickFunc);h.remove(b,"keydown",d._keyHandler);l.hide(b);d.isMenuVisible=0;if(!a){d.collapse(1)}if(d.element){d.element.hide()}if(c=l.get(d.id)){l.removeClass(c.firstChild,d.classPrefix+"ItemActive")}d.onHideMenu.dispatch(d)},add:function(a){var c=this,b;a=c.parent(a);if(c.isRendered&&(b=l.get("menu_"+c.id))){c._add(l.select("tbody",b)[0],a)}return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){l.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var b=this,a=l.get("menu_"+b.id);h.remove(a,"mouseover",b.mouseOverFunc);h.remove(a,"click",b.mouseClickFunc);if(b.element){b.element.remove()}l.remove(a)},renderNode:function(){var d=this,c=d.settings,a,e,b,f;f=l.create("div",{id:"menu_"+d.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000"});b=l.add(f,"div",{id:"menu_"+d.id+"_co","class":d.classPrefix+(c["class"]?" "+c["class"]:"")});d.element=new g("menu_"+d.id,{blocker:1,container:c.container});if(c.menu_line){l.add(b,"span",{"class":d.classPrefix+"Line"})}a=l.add(b,"table",{id:"menu_"+d.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});e=l.add(a,"tbody");i(d.items,function(n){d._add(e,n)});d.rendered=true;return f},_keyHandler:function(a){var b=this,c=a.keyCode;function d(e){var n=b._focusIdx+e,f=l.select("a","menu_"+b.id)[n];if(f){b._focusIdx=n;f.focus()}}switch(c){case 38:d(-1);return;case 40:d(1);return;case 13:return;case 27:return this.hideMenu()}},_add:function(f,o){var n,a=o.settings,b,d,e,c=this.classPrefix,r;if(a.separator){d=l.add(f,"tr",{id:o.id,"class":c+"ItemSeparator"});l.add(d,"td",{"class":c+"ItemSeparator"});if(n=d.previousSibling){l.addClass(n,"mceLast")}return}n=d=l.add(f,"tr",{id:o.id,"class":c+"Item "+c+"ItemEnabled"});n=e=l.add(n,"td");n=b=l.add(n,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});l.addClass(e,a["class"]);r=l.add(n,"span",{"class":"mceIcon"+(a.icon?" mce_"+a.icon:"")});if(a.icon_src){l.add(r,"img",{src:a.icon_src})}n=l.add(n,a.element||"span",{"class":"mceText",title:o.settings.title},o.settings.title);if(o.settings.style){l.setAttrib(n,"style",o.settings.style)}if(f.childNodes.length==1){l.addClass(d,"mceFirst")}if((n=d.previousSibling)&&l.hasClass(n,c+"ItemSeparator")){l.addClass(d,"mceFirst")}if(o.collapse){l.addClass(d,c+"ItemSub")}if(n=d.previousSibling){l.removeClass(n,"mceLast")}l.addClass(d,"mceLast")}})})(tinymce);(function(c){var d=c.DOM;c.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b){this.parent(a,b);this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,b=this.settings,g,h;h=d.encode(b.label||"");g='<a id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+b["class"]+(h?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+d.encode(b.title)+'">';if(b.image){g+='<img class="mceIcon" src="'+b.image+'" />'+h+"</a>"}else{g+='<span class="mceIcon '+b["class"]+'"></span>'+(h?'<span class="'+a+'Label">'+h+"</span>":"")+"</a>"}return g},postRender:function(){var b=this,a=b.settings;c.dom.Event.add(b.id,"click",function(e){if(!b.isDisabled()){return a.onclick.call(a.scope,e)}})}})})(tinymce);(function(i){var j=i.DOM,f=i.dom.Event,h=i.each,g=i.util.Dispatcher;i.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,b){var c=this;c.parent(a,b);c.items=[];c.onChange=new g(c);c.onPostRender=new g(c);c.onAdd=new g(c);c.onRenderMenu=new i.util.Dispatcher(this);c.classPrefix="mceListBox"},select:function(c){var d=this,a,b;if(c==undefined){return d.selectByIndex(-1)}if(c&&c.call){b=c}else{b=function(e){return e==c}}if(c!=d.selectedValue){h(d.items,function(e,l){if(b(e.value)){a=1;d.selectByIndex(l);return false}});if(!a){d.selectByIndex(-1)}}},selectByIndex:function(d){var c=this,b,a;if(d!=c.selectedIndex){b=j.get(c.id+"_text");a=c.items[d];if(a){c.selectedValue=a.value;c.selectedIndex=d;j.setHTML(b,j.encode(a.title));j.removeClass(b,"mceTitle")}else{j.setHTML(b,j.encode(c.settings.title));j.addClass(b,"mceTitle");c.selectedValue=c.selectedIndex=null}b=0}},add:function(a,d,b){var c=this;b=b||{};b=i.extend(b,{title:a,value:d});c.items.push(b);c.onAdd.dispatch(c,b)},getLength:function(){return this.items.length},renderHTML:function(){var b="",d=this,c=d.settings,a=d.classPrefix;b='<table id="'+d.id+'" cellpadding="0" cellspacing="0" class="'+a+" "+a+"Enabled"+(c["class"]?(" "+c["class"]):"")+'"><tbody><tr>';b+="<td>"+j.createHTML("a",{id:d.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},j.encode(d.settings.title))+"</td>";b+="<td>"+j.createHTML("a",{id:d.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";b+="</tr></tbody></table>";return b},showMenu:function(){var d=this,a,b,c=j.get(this.id),e;if(d.isDisabled()||d.items.length==0){return}if(d.menu&&d.menu.isMenuVisible){return d.hideMenu()}if(!d.isMenuRendered){d.renderMenu();d.isMenuRendered=true}a=j.getPos(this.settings.menu_container);b=j.getPos(c);e=d.menu;e.settings.offset_x=b.x;e.settings.offset_y=b.y;e.settings.keyboard_focus=!i.isOpera;if(d.oldID){e.items[d.oldID].setSelected(0)}h(d.items,function(l){if(l.value===d.selectedValue){e.items[l.id].setSelected(1);d.oldID=l.id}});e.showMenu(0,c.clientHeight);f.add(j.doc,"mousedown",d.hideMenu,d);j.addClass(d.id,d.classPrefix+"Selected")},hideMenu:function(a){var b=this;if(a&&a.type=="mousedown"&&(a.target.id==b.id+"_text"||a.target.id==b.id+"_open")){return}if(!a||!j.getParent(a.target,".mceMenu")){j.removeClass(b.id,b.classPrefix+"Selected");f.remove(j.doc,"mousedown",b.hideMenu,b);if(b.menu){b.menu.hideMenu()}}},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});b.onHideMenu.add(a.hideMenu,a);b.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(a.settings.onselect("")!==false){a.select("")}}});h(a.items,function(c){c.id=j.uniqueId();c.onclick=function(){if(a.settings.onselect(c.value)!==false){a.select(c.value)}};b.add(c)});a.onRenderMenu.dispatch(a,b);a.menu=b},postRender:function(){var b=this,a=b.classPrefix;f.add(b.id,"click",b.showMenu,b);f.add(b.id+"_text","focus",function(c){if(!b._focused){b.keyDownHandler=f.add(b.id+"_text","keydown",function(d){var n=-1,m,e=d.keyCode;h(b.items,function(k,l){if(b.selectedValue==k.value){n=l}});if(e==38){m=b.items[n-1]}else{if(e==40){m=b.items[n+1]}else{if(e==13){m=b.selectedValue;b.selectedValue=null;b.settings.onselect(m);return f.cancel(d)}}}if(m){b.hideMenu();b.select(m.value)}})}b._focused=1});f.add(b.id+"_text","blur",function(){f.remove(b.id+"_text","keydown",b.keyDownHandler);b._focused=0});if(i.isIE6||!j.boxModel){f.add(b.id,"mouseover",function(){if(!j.hasClass(b.id,a+"Disabled")){j.addClass(b.id,a+"Hover")}});f.add(b.id,"mouseout",function(){if(!j.hasClass(b.id,a+"Disabled")){j.removeClass(b.id,a+"Hover")}})}b.onPostRender.dispatch(b,j.get(b.id))},destroy:function(){this.parent();f.clear(this.id+"_text")}})})(tinymce);(function(i){var j=i.DOM,f=i.dom.Event,h=i.each,g=i.util.Dispatcher;i.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b);this.classPrefix="mceNativeListBox"},setDisabled:function(a){j.get(this.id).disabled=a},isDisabled:function(){return j.get(this.id).disabled},select:function(c){var d=this,a,b;if(c==undefined){return d.selectByIndex(-1)}if(c&&c.call){b=c}else{b=function(e){return e==c}}if(c!=d.selectedValue){h(d.items,function(e,l){if(b(e.value)){a=1;d.selectByIndex(l);return false}});if(!a){d.selectByIndex(-1)}}},selectByIndex:function(a){j.get(this.id).selectedIndex=a+1;this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,d,e){var b,c=this;e=e||{};e.value=d;if(c.isRendered()){j.add(j.get(this.id),"option",e,a)}b={title:a,value:d,attribs:e};c.items.push(b);c.onAdd.dispatch(c,b)},getLength:function(){return j.get(this.id).options.length-1},renderHTML:function(){var a,b=this;a=j.createHTML("option",{value:""},"-- "+b.settings.title+" --");h(b.items,function(c){a+=j.createHTML("option",{value:c.value},c.title)});a=j.createHTML("select",{id:b.id,"class":"mceNativeListBox"},a);return a},postRender:function(){var b=this,a;b.rendered=true;function c(d){var e=b.items[d.target.selectedIndex-1];if(e&&(e=e.value)){b.onChange.dispatch(b,e);if(b.settings.onselect){b.settings.onselect(e)}}}f.add(b.id,"change",c);f.add(b.id,"keydown",function(d){var e;f.remove(b.id,"change",a);e=f.add(b.id,"blur",function(){f.add(b.id,"change",c);f.remove(b.id,"blur",e)});if(d.keyCode==13||d.keyCode==32){c(d);return f.cancel(d)}});b.onPostRender.dispatch(b,j.get(b.id))}})})(tinymce);(function(h){var e=h.DOM,f=h.dom.Event,g=h.each;h.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(a,b){this.parent(a,b);this.onRenderMenu=new h.util.Dispatcher(this);b.menu_container=b.menu_container||e.doc.body},showMenu:function(){var d=this,a,b,c=e.get(d.id),k;if(d.isDisabled()){return}if(!d.isMenuRendered){d.renderMenu();d.isMenuRendered=true}if(d.isMenuVisible){return d.hideMenu()}a=e.getPos(d.settings.menu_container);b=e.getPos(c);k=d.menu;k.settings.offset_x=b.x;k.settings.offset_y=b.y;k.settings.vp_offset_x=b.x;k.settings.vp_offset_y=b.y;k.settings.keyboard_focus=d._focused;k.showMenu(0,c.clientHeight);f.add(e.doc,"mousedown",d.hideMenu,d);d.setState("Selected",1);d.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons});b.onHideMenu.add(a.hideMenu,a);a.onRenderMenu.dispatch(a,b);a.menu=b},hideMenu:function(a){var b=this;if(a&&a.type=="mousedown"&&e.getParent(a.target,function(c){return c.id===b.id||c.id===b.id+"_open"})){return}if(!a||!e.getParent(a.target,".mceMenu")){b.setState("Selected",0);f.remove(e.doc,"mousedown",b.hideMenu,b);if(b.menu){b.menu.hideMenu()}}b.isMenuVisible=0},postRender:function(){var b=this,a=b.settings;f.add(b.id,"click",function(){if(!b.isDisabled()){if(a.onclick){a.onclick(b.value)}b.showMenu()}})}})})(tinymce);(function(h){var e=h.DOM,f=h.dom.Event,g=h.each;h.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b){this.parent(a,b);this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,b=c.settings,d;a="<tbody><tr>";if(b.image){d=e.createHTML("img ",{src:b.image,"class":"mceAction "+b["class"]})}else{d=e.createHTML("span",{"class":"mceAction "+b["class"]},"")}a+="<td>"+e.createHTML("a",{id:c.id+"_action",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},d)+"</td>";d=e.createHTML("span",{"class":"mceOpen "+b["class"]});a+="<td>"+e.createHTML("a",{id:c.id+"_open",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},d)+"</td>";a+="</tr></tbody>";return e.createHTML("table",{id:c.id,"class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:b.title},a)},postRender:function(){var b=this,a=b.settings;if(a.onclick){f.add(b.id+"_action","click",function(){if(!b.isDisabled()){a.onclick(b.value)}})}f.add(b.id+"_open","click",b.showMenu,b);f.add(b.id+"_open","focus",function(){b._focused=1});f.add(b.id+"_open","blur",function(){b._focused=0});if(h.isIE6||!e.boxModel){f.add(b.id,"mouseover",function(){if(!e.hasClass(b.id,"mceSplitButtonDisabled")){e.addClass(b.id,"mceSplitButtonHover")}});f.add(b.id,"mouseout",function(){if(!e.hasClass(b.id,"mceSplitButtonDisabled")){e.removeClass(b.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();f.clear(this.id+"_action");f.clear(this.id+"_open")}})})(tinymce);(function(i){var j=i.DOM,g=i.dom.Event,f=i.is,h=i.each;i.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b){var c=this;c.parent(a,b);c.settings=b=i.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},c.settings);c.onShowMenu=new i.util.Dispatcher(c);c.onHideMenu=new i.util.Dispatcher(c);c.value=b.default_color},showMenu:function(){var e=this,d,a,b,c;if(e.isDisabled()){return}if(!e.isMenuRendered){e.renderMenu();e.isMenuRendered=true}if(e.isMenuVisible){return e.hideMenu()}b=j.get(e.id);j.show(e.id+"_menu");j.addClass(b,"mceSplitButtonSelected");c=j.getPos(b);j.setStyles(e.id+"_menu",{left:c.x,top:c.y+b.clientHeight,zIndex:200000});b=0;g.add(j.doc,"mousedown",e.hideMenu,e);if(e._focused){e._keyHandler=g.add(e.id+"_menu","keydown",function(l){if(l.keyCode==27){e.hideMenu()}});j.select("a",e.id+"_menu")[0].focus()}e.onShowMenu.dispatch(e);e.isMenuVisible=1},hideMenu:function(a){var b=this;if(a&&a.type=="mousedown"&&j.getParent(a.target,function(c){return c.id===b.id+"_open"})){return}if(!a||!j.getParent(a.target,".mceSplitButtonMenu")){j.removeClass(b.id,"mceSplitButtonSelected");g.remove(j.doc,"mousedown",b.hideMenu,b);g.remove(b.id+"_menu","keydown",b._keyHandler);j.hide(b.id+"_menu")}b.onHideMenu.dispatch(b);b.isMenuVisible=0},renderMenu:function(){var b=this,m,c=0,a=b.settings,n,d,q,e;e=j.add(a.menu_container,"div",{id:b.id+"_menu","class":a.menu_class+" "+a["class"],style:"position:absolute;left:0;top:-1000px;"});m=j.add(e,"div",{"class":a["class"]+" mceSplitButtonMenu"});j.add(m,"span",{"class":"mceMenuLine"});n=j.add(m,"table",{"class":"mceColorSplitMenu"});d=j.add(n,"tbody");c=0;h(f(a.colors,"array")?a.colors:a.colors.split(","),function(k){k=k.replace(/^#/,"");if(!c--){q=j.add(d,"tr");c=a.grid_width-1}n=j.add(q,"td");n=j.add(n,"a",{href:"javascript:;",style:{backgroundColor:"#"+k},mce_color:"#"+k})});if(a.more_colors_func){n=j.add(d,"tr");n=j.add(n,"td",{colspan:a.grid_width,"class":"mceMoreColors"});n=j.add(n,"a",{id:b.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},a.more_colors_title);g.add(n,"click",function(k){a.more_colors_func.call(a.more_colors_scope||this);return g.cancel(k)})}j.addClass(m,"mceColorSplitMenu");g.add(b.id+"_menu","click",function(l){var k;l=l.target;if(l.nodeName=="A"&&(k=l.getAttribute("mce_color"))){b.setColor(k)}return g.cancel(l)});return e},setColor:function(a){var b=this;j.setStyle(b.id+"_preview","backgroundColor",a);b.value=a;b.hideMenu();b.settings.onselect(a)},postRender:function(){var b=this,a=b.id;b.parent();j.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});j.setStyle(b.id+"_preview","backgroundColor",b.value)},destroy:function(){this.parent();g.clear(this.id+"_menu");g.clear(this.id+"_more");j.remove(this.id+"_menu")}})})(tinymce);tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var h=this,q="",o,n,s=tinymce.DOM,c=h.settings,r,t,p,i;i=h.controls;for(r=0;r<i.length;r++){n=i[r];t=i[r-1];p=i[r+1];if(r===0){o="mceToolbarStart";if(n.Button){o+=" mceToolbarStartButton"}else{if(n.SplitButton){o+=" mceToolbarStartSplitButton"}else{if(n.ListBox){o+=" mceToolbarStartListBox"}}}q+=s.createHTML("td",{"class":o},s.createHTML("span",null,"<!-- IE -->"))}if(t&&n.ListBox){if(t.Button||t.SplitButton){q+=s.createHTML("td",{"class":"mceToolbarEnd"},s.createHTML("span",null,"<!-- IE -->"))}}if(s.stdMode){q+='<td style="position: relative">'+n.renderHTML()+"</td>"}else{q+="<td>"+n.renderHTML()+"</td>"}if(p&&n.ListBox){if(p.Button||p.SplitButton){q+=s.createHTML("td",{"class":"mceToolbarStart"},s.createHTML("span",null,"<!-- IE -->"))}}}o="mceToolbarEnd";if(n.Button){o+=" mceToolbarEndButton"}else{if(n.SplitButton){o+=" mceToolbarEndSplitButton"}else{if(n.ListBox){o+=" mceToolbarEndListBox"}}}q+=s.createHTML("td",{"class":o},s.createHTML("span",null,"<!-- IE -->"));return s.createHTML("table",{id:h.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:h.settings.align||""},"<tbody><tr>"+q+"</tr></tbody>")}});(function(d){var e=d.util.Dispatcher,f=d.each;d.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new e(this),get:function(a){return this.lookup[a]},requireLangPack:function(a){var c,b=d.EditorManager.settings;if(b&&b.language){c=this.urls[a]+"/langs/"+b.language+".js";if(!d.dom.Event.domLoaded&&!b.strict_mode){d.ScriptLoader.load(c)}else{d.ScriptLoader.add(c)}}},add:function(a,b){this.items.push(b);this.lookup[a]=b;this.onAdd.dispatch(this,a,b);return b},load:function(a,i,j,b){var c=this;if(c.urls[a]){return}if(i.indexOf("/")!=0&&i.indexOf("://")==-1){i=d.baseURL+"/"+i}c.urls[a]=i.substring(0,i.lastIndexOf("/"));d.ScriptLoader.add(i,j,b)}});d.PluginManager=new d.AddOnManager();d.ThemeManager=new d.AddOnManager()}(tinymce));(function(m){var l=m.each,k=m.extend,n=m.DOM,j=m.dom.Event,p=m.ThemeManager,i=m.PluginManager,o=m.explode;m.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var b=this,a=window.location;m.documentBaseURL=a.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(m.documentBaseURL)){m.documentBaseURL+="/"}m.baseURL=new m.util.URI(m.documentBaseURL).toAbsolute(m.baseURL);m.EditorManager.baseURI=new m.util.URI(m.baseURL);if(document.domain&&a.hostname!=document.domain){m.relaxedDomain=document.domain}b.onBeforeUnload=new m.util.Dispatcher(b);j.add(window,"beforeunload",function(c){b.onBeforeUnload.dispatch(b,c)})},init:function(a){var b=this,f,g=m.ScriptLoader,c,d,r=[],e;function h(s,q,x){var w=s[q];if(!w){return}if(m.is(w,"string")){x=w.replace(/\.\w+$/,"");x=x?m.resolve(x):0;w=m.resolve(w)}return w.apply(x||this,Array.prototype.slice.call(arguments,2))}a=k({theme:"simple",language:"en",strict_loading_mode:document.contentType=="application/xhtml+xml"},a);b.settings=a;if(!j.domLoaded&&!a.strict_loading_mode){if(a.language){g.add(m.baseURL+"/langs/"+a.language+".js")}if(a.theme&&a.theme.charAt(0)!="-"&&!p.urls[a.theme]){p.load(a.theme,"themes/"+a.theme+"/editor_template"+m.suffix+".js")}if(a.plugins){f=o(a.plugins);if(m.inArray(f,"compat2x")!=-1){i.load("compat2x","plugins/compat2x/editor_plugin"+m.suffix+".js")}l(f,function(q){if(q&&q.charAt(0)!="-"&&!i.urls[q]){if(!m.isWebKit&&q=="safari"){return}i.load(q,"plugins/"+q+"/editor_plugin"+m.suffix+".js")}})}g.loadQueue()}j.add(document,"init",function(){var v,q;h(a,"onpageload");if(a.browsers){v=false;l(o(a.browsers),function(s){switch(s){case"ie":case"msie":if(m.isIE){v=true}break;case"gecko":if(m.isGecko){v=true}break;case"safari":case"webkit":if(m.isWebKit){v=true}break;case"opera":if(m.isOpera){v=true}break}});if(!v){return}}switch(a.mode){case"exact":v=a.elements||"";if(v.length>0){l(o(v),function(s){if(n.get(s)){e=new m.Editor(s,a);r.push(e);e.render(1)}else{c=0;l(document.forms,function(t){l(t.elements,function(x){if(x.name===s){s="mce_editor_"+c;n.setAttrib(x,"id",s);e=new m.Editor(s,a);r.push(e);e.render(1)}})})}})}break;case"textareas":case"specific_textareas":function u(s,t){return t.constructor===RegExp?t.test(s.className):n.hasClass(s,t)}l(n.select("textarea"),function(s){if(a.editor_deselector&&u(s,a.editor_deselector)){return}if(!a.editor_selector||u(s,a.editor_selector)){d=n.get(s.name);if(!s.id&&!d){s.id=s.name}if(!s.id||b.get(s.id)){s.id=n.uniqueId()}e=new m.Editor(s.id,a);r.push(e);e.render(1)}});break}if(a.oninit){v=q=0;l(r,function(s){q++;if(!s.initialized){s.onInit.add(function(){v++;if(v==q){h(a,"oninit")}})}else{v++}if(v==q){h(a,"oninit")}})}})},get:function(a){return this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){this.editors[a.id]=a;this._setActive(a);return a},remove:function(a){var b=this;if(!b.editors[a.id]){return null}delete b.editors[a.id];if(b.activeEditor==a){l(b.editors,function(c){b._setActive(c);return false})}a.destroy();return a},execCommand:function(f,a,b){var g=this,c=g.get(b),e;switch(f){case"mceFocus":c.focus();return true;case"mceAddEditor":case"mceAddControl":if(!g.get(b)){new m.Editor(b,g.settings).render()}return true;case"mceAddFrameControl":e=b.window;e.tinyMCE=tinyMCE;e.tinymce=m;m.DOM.doc=e.document;m.DOM.win=e;c=new m.Editor(b.element_id,b);c.render();if(m.isIE){function d(){c.destroy();e.detachEvent("onunload",d);e=e.tinyMCE=e.tinymce=null}e.attachEvent("onunload",d)}b.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(c){c.remove()}return true;case"mceToggleEditor":if(!c){g.execCommand("mceAddControl",0,b);return true}if(c.isHidden()){c.show()}else{c.hide()}return true}if(g.activeEditor){return g.activeEditor.execCommand(f,a,b)}return false},execInstanceCommand:function(a,b,c,d){var e=this.get(a);if(e){return e.execCommand(b,c,d)}return false},triggerSave:function(){l(this.editors,function(a){a.save()})},addI18n:function(b,a){var d,c=this.i18n;if(!m.is(b,"string")){l(b,function(f,e){l(f,function(g,h){l(g,function(q,t){if(h==="common"){c[e+"."+t]=q}else{c[e+"."+h+"."+t]=q}})})})}else{l(a,function(f,e){c[b+"."+e]=f})}},_setActive:function(a){this.selectedInstance=this.activeEditor=a}});m.EditorManager.preInit()})(tinymce);var tinyMCE=window.tinyMCE=tinymce.EditorManager;(function(s){var r=s.DOM,v=s.dom.Event,A=s.extend,u=s.util.Dispatcher;var w=s.each,F=s.isGecko,E=s.isIE,B=s.isWebKit;var C=s.is,y=s.ThemeManager,D=s.PluginManager,x=s.EditorManager;var q=s.inArray,t=s.grep,z=s.explode;s.create("tinymce.Editor",{Editor:function(a,b){var c=this;c.id=c.editorId=a;c.execCommands={};c.queryStateCommands={};c.queryValueCommands={};c.plugins={};w(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(d){c[d]=new u(c)});c.settings=b=A({id:a,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:s.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:true,convert_fonts_to_spans:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,removeformat_selector:"span,b,strong,em,i,font,u,strike"},b);c.documentBaseURI=new s.util.URI(b.document_base_url||s.documentBaseURL,{base_uri:tinyMCE.baseURI});c.baseURI=x.baseURI;c.execCallback("setup",c)},render:function(d){var c=this,b=c.settings,a=c.id,f=s.ScriptLoader;if(!v.domLoaded){v.add(document,"init",function(){c.render()});return}if(!d){b.strict_loading_mode=1;tinyMCE.settings=b}if(!c.getElement()){return}if(b.strict_loading_mode){f.settings.strict_mode=b.strict_loading_mode;s.DOM.settings.strict=1}if(!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&b.hidden_input&&r.getParent(a,"form")){r.insertAfter(r.create("input",{type:"hidden",name:a}),a)}if(s.WindowManager){c.windowManager=new s.WindowManager(c)}if(b.encoding=="xml"){c.onGetContent.add(function(h,g){if(g.save){g.content=r.encode(g.content)}})}if(b.add_form_submit_trigger){c.onSubmit.addToTop(function(){if(c.initialized){c.save();c.isNotDirty=1}})}if(b.add_unload_trigger){c._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(c.initialized&&!c.destroyed&&!c.isHidden()){c.save({format:"raw",no_events:true})}})}s.addUnload(c.destroy,c);if(b.submit_patch){c.onBeforeRenderUI.add(function(){var g=c.getElement().form;if(!g){return}if(g._mceOldSubmit){return}if(!g.submit.nodeType&&!g.submit.length){c.formElement=g;g._mceOldSubmit=g.submit;g.submit=function(){x.triggerSave();c.isNotDirty=1;return this._mceOldSubmit(this)}}g=null})}function e(){if(b.language){f.add(s.baseURL+"/langs/"+b.language+".js")}if(b.theme&&b.theme.charAt(0)!="-"&&!y.urls[b.theme]){y.load(b.theme,"themes/"+b.theme+"/editor_template"+s.suffix+".js")}w(z(b.plugins),function(g){if(g&&g.charAt(0)!="-"&&!D.urls[g]){if(!B&&g=="safari"){return}D.load(g,"plugins/"+g+"/editor_plugin"+s.suffix+".js")}});f.loadQueue(function(){if(!c.removed){c.init()}})}if(b.plugins.indexOf("compat2x")!=-1){D.load("compat2x","plugins/compat2x/editor_plugin"+s.suffix+".js");f.loadQueue(e)}else{e()}},init:function(){var j,l=this,k=l.settings,c,g,e=l.getElement(),b,d,a,h,f,m;x.add(l);if(k.theme){k.theme=k.theme.replace(/-/,"");b=y.get(k.theme);l.theme=new b();if(l.theme.init&&k.init_theme){l.theme.init(l,y.urls[k.theme]||s.documentBaseURL.replace(/\/$/,""))}}w(z(k.plugins.replace(/\-/g,"")),function(n){var p=D.get(n),o=D.urls[n]||s.documentBaseURL.replace(/\/$/,""),G;if(p){G=new p(l,o);l.plugins[n]=G;if(G.init){G.init(l,o)}}});if(k.popup_css!==false){if(k.popup_css){k.popup_css=l.documentBaseURI.toAbsolute(k.popup_css)}else{k.popup_css=l.baseURI.toAbsolute("themes/"+k.theme+"/skins/"+k.skin+"/dialog.css")}}if(k.popup_css_add){k.popup_css+=","+l.documentBaseURI.toAbsolute(k.popup_css_add)}l.controlManager=new s.ControlManager(l);l.undoManager=new s.UndoManager(l);l.undoManager.onAdd.add(function(n,o){if(!o.initial){return l.onChange.dispatch(l,o,n)}});l.undoManager.onUndo.add(function(n,o){return l.onUndo.dispatch(l,o,n)});l.undoManager.onRedo.add(function(n,o){return l.onRedo.dispatch(l,o,n)});if(k.custom_undo_redo){l.onExecCommand.add(function(G,n,o,p,I){if(n!="Undo"&&n!="Redo"&&n!="mceRepaint"&&(!I||!I.skip_undo)){l.undoManager.add()}})}l.onExecCommand.add(function(o,n){if(!/^(FontName|FontSize)$/.test(n)){l.nodeChanged()}});if(F){function i(o,n){if(!n||!n.initial){l.execCommand("mceRepaint")}}l.onUndo.add(i);l.onRedo.add(i);l.onSetContent.add(i)}l.onBeforeRenderUI.dispatch(l,l.controlManager);if(k.render_ui){c=k.width||e.style.width||e.offsetWidth;g=k.height||e.style.height||e.offsetHeight;l.orgDisplay=e.style.display;m=/^[0-9\.]+(|px)$/i;if(m.test(""+c)){c=Math.max(parseInt(c)+(b.deltaWidth||0),100)}if(m.test(""+g)){g=Math.max(parseInt(g)+(b.deltaHeight||0),100)}b=l.theme.renderUI({targetNode:e,width:c,height:g,deltaWidth:k.delta_width,deltaHeight:k.delta_height});l.editorContainer=b.editorContainer}r.setStyles(b.sizeContainer||b.editorContainer,{width:c,height:g});g=(b.iframeHeight||g)+(typeof(g)=="number"?(b.deltaHeight||0):"");if(g<100){g=100}l.iframeHTML=k.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+l.documentBaseURI.getURI()+'" />';l.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(s.relaxedDomain){l.iframeHTML+='<script type="text/javascript">document.domain = "'+s.relaxedDomain+'";<\/script>'}h=k.body_id||"tinymce";if(h.indexOf("=")!=-1){h=l.getParam("body_id","","hash");h=h[l.id]||h}f=k.body_class||"";if(f.indexOf("=")!=-1){f=l.getParam("body_class","","hash");f=f[l.id]||""}l.iframeHTML+='</head><body id="'+h+'" class="mceContentBody '+f+'"></body></html>';if(s.relaxedDomain){if(E||(s.isOpera&&parseFloat(opera.version())>=9.5)){a='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+l.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}else{if(s.isOpera){a='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'}}}j=r.add(b.iframeContainer,"iframe",{id:l.id+"_ifr",src:a||'javascript:""',frameBorder:"0",style:{width:"100%",height:g}});l.contentAreaContainer=b.iframeContainer;r.get(b.editorContainer).style.display=l.orgDisplay;r.get(l.id).style.display="none";if(!E||!s.relaxedDomain){l.setupIframe()}e=j=b=null},setupIframe:function(){var d=this,c=d.settings,i=r.get(d.id),h=d.getDoc(),a,f;if(!E||!s.relaxedDomain){h.open();h.write(d.iframeHTML);h.close()}if(!E){try{if(!c.readonly){h.designMode="On"}}catch(g){}}if(E){f=d.getBody();r.hide(f);if(!c.readonly){f.contentEditable=true}r.show(f)}d.dom=new s.DOM.DOMUtils(d.getDoc(),{keep_values:true,url_converter:d.convertURL,url_converter_scope:d,hex_colors:c.force_hex_style_colors,class_filter:c.class_filter,update_styles:1,fix_ie_paragraphs:1});d.serializer=new s.dom.Serializer({entity_encoding:c.entity_encoding,entities:c.entities,valid_elements:c.verify_html===false?"*[*]":c.valid_elements,extended_valid_elements:c.extended_valid_elements,valid_child_elements:c.valid_child_elements,invalid_elements:c.invalid_elements,fix_table_elements:c.fix_table_elements,fix_list_elements:c.fix_list_elements,fix_content_duplication:c.fix_content_duplication,convert_fonts_to_spans:c.convert_fonts_to_spans,font_size_classes:c.font_size_classes,font_size_style_values:c.font_size_style_values,apply_source_formatting:c.apply_source_formatting,remove_linebreaks:c.remove_linebreaks,element_format:c.element_format,dom:d.dom});d.selection=new s.dom.Selection(d.dom,d.getWin(),d.serializer);d.forceBlocks=new s.ForceBlocks(d,{forced_root_block:c.forced_root_block});d.editorCommands=new s.EditorCommands(d);d.serializer.onPreProcess.add(function(k,j){return d.onPreProcess.dispatch(d,j,k)});d.serializer.onPostProcess.add(function(k,j){return d.onPostProcess.dispatch(d,j,k)});d.onPreInit.dispatch(d);if(!c.gecko_spellcheck){d.getBody().spellcheck=0}if(!c.readonly){d._addEvents()}d.controlManager.onPostRender.dispatch(d,d.controlManager);d.onPostRender.dispatch(d);if(c.directionality){d.getBody().dir=c.directionality}if(c.nowrap){d.getBody().style.whiteSpace="nowrap"}if(c.auto_resize){d.onNodeChange.add(d.resizeToContent,d)}if(c.custom_elements){function e(k,j){w(z(c.custom_elements),function(m){var l;if(m.indexOf("~")===0){m=m.substring(1);l="span"}else{l="div"}j.content=j.content.replace(new RegExp("<("+m+")([^>]*)>","g"),"<"+l+' mce_name="$1"$2>');j.content=j.content.replace(new RegExp("</("+m+")>","g"),"</"+l+">")})}d.onBeforeSetContent.add(e);d.onPostProcess.add(function(k,j){if(j.set){e(k,j)}})}if(c.handle_node_change_callback){d.onNodeChange.add(function(j,k,l){d.execCallback("handle_node_change_callback",d.id,l,-1,-1,true,d.selection.isCollapsed())})}if(c.save_callback){d.onSaveContent.add(function(k,l){var j=d.execCallback("save_callback",d.id,l.content,d.getBody());if(j){l.content=j}})}if(c.onchange_callback){d.onChange.add(function(j,k){d.execCallback("onchange_callback",d,k)})}if(c.convert_newlines_to_brs){d.onBeforeSetContent.add(function(k,j){if(j.initial){j.content=j.content.replace(/\r?\n/g,"<br />")}})}if(c.fix_nesting&&E){d.onBeforeSetContent.add(function(k,j){j.content=d._fixNesting(j.content)})}if(c.preformatted){d.onPostProcess.add(function(k,j){j.content=j.content.replace(/^\s*<pre.*?>/,"");j.content=j.content.replace(/<\/pre>\s*$/,"");if(j.set){j.content='<pre class="mceItemHidden">'+j.content+"</pre>"}})}if(c.verify_css_classes){d.serializer.attribValueFilter=function(k,m){var l,j;if(k=="class"){if(!d.classesRE){j=d.dom.getClasses();if(j.length>0){l="";w(j,function(n){l+=(l?"|":"")+n["class"]});d.classesRE=new RegExp("("+l+")","gi")}}return !d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(m)||d.classesRE.test(m)?m:""}return m}}if(c.convert_fonts_to_spans){d._convertFonts()}if(c.inline_styles){d._convertInlineElements()}if(c.cleanup_callback){d.onBeforeSetContent.add(function(k,j){j.content=d.execCallback("cleanup_callback","insert_to_editor",j.content,j)});d.onPreProcess.add(function(k,j){if(j.set){d.execCallback("cleanup_callback","insert_to_editor_dom",j.node,j)}if(j.get){d.execCallback("cleanup_callback","get_from_editor_dom",j.node,j)}});d.onPostProcess.add(function(k,j){if(j.set){j.content=d.execCallback("cleanup_callback","insert_to_editor",j.content,j)}if(j.get){j.content=d.execCallback("cleanup_callback","get_from_editor",j.content,j)}})}if(c.save_callback){d.onGetContent.add(function(k,j){if(j.save){j.content=d.execCallback("save_callback",d.id,j.content,d.getBody())}})}if(c.handle_event_callback){d.onEvent.add(function(k,j,l){if(d.execCallback("handle_event_callback",j,k,l)===false){v.cancel(j)}})}d.onSetContent.add(function(){d.addVisual(d.getBody())});if(c.padd_empty_editor){d.onPostProcess.add(function(k,j){j.content=j.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(F){function b(k,j){w(k.dom.select("a"),function(l){var m=l.parentNode;if(k.dom.isBlock(m)&&m.lastChild===l){k.dom.add(m,"br",{mce_bogus:1})}})}d.onExecCommand.add(function(k,j){if(j==="CreateLink"){b(k)}});d.onSetContent.add(d.selection.onSetContent.add(b))}if(F&&!c.readonly){try{h.designMode="Off";h.designMode="On"}catch(g){}}setTimeout(function(){if(d.removed){return}d.load({initial:true,format:(c.cleanup_on_startup?"html":"raw")});d.startContent=d.getContent({format:"raw"});d.undoManager.add({initial:true});d.initialized=true;d.onInit.dispatch(d);d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc());d.execCallback("init_instance_callback",d);d.focus(true);d.nodeChanged({initial:1});if(c.content_css){s.each(z(c.content_css),function(j){d.dom.loadCSS(d.documentBaseURI.toAbsolute(j))})}if(c.auto_focus){setTimeout(function(){var j=x.get(c.auto_focus);j.selection.select(j.getBody(),1);j.selection.collapse(1);j.getWin().focus()},100)}},1);i=null},focus:function(c){var a,d=this,b=d.settings.content_editable;if(!c){if(!b&&(!E||d.selection.getNode().ownerDocument!=d.getDoc())){d.getWin().focus()}}if(x.activeEditor!=d){if((a=x.activeEditor)!=null){a.onDeactivate.dispatch(a,d)}d.onActivate.dispatch(d,a)}x._setActive(d)},execCallback:function(a){var d=this,b=d.settings[a],c;if(!b){return}if(d.callbackLookup&&(c=d.callbackLookup[a])){b=c.func;c=c.scope}if(C(b,"string")){c=b.replace(/\.\w+$/,"");c=c?s.resolve(c):0;b=s.resolve(b);d.callbackLookup=d.callbackLookup||{};d.callbackLookup[a]={func:b,scope:c}}return b.apply(c||d,Array.prototype.slice.call(arguments,1))},translate:function(c){var a=this.settings.language||"en",b=x.i18n;if(!c){return""}return b[a+"."+c]||c.replace(/{\#([^}]+)\}/g,function(d,e){return b[a+"."+e]||"{#"+e+"}"})},getLang:function(a,b){return x.i18n[(this.settings.language||"en")+"."+a]||(C(b)?b:"{#"+a+"}")},getParam:function(a,d,f){var c=s.trim,e=C(this.settings[a])?this.settings[a]:d,b;if(f==="hash"){b={};if(C(e,"string")){w(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(g){g=g.split("=");if(g.length>1){b[c(g[0])]=c(g[1])}else{b[c(g[0])]=c(g)}})}else{b=e}return b}return e},nodeChanged:function(b){var d=this,c=d.selection,a=c.getNode()||d.getBody();if(d.initialized){d.onNodeChange.dispatch(d,b?b.controlManager||d.controlManager:d.controlManager,E&&a.ownerDocument!=d.getDoc()?d.getBody():a,c.isCollapsed(),b)}},addButton:function(a,b){var c=this;c.buttons=c.buttons||{};c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(d,b,f,c){var e=this,a;if(!e.settings.custom_shortcuts){return false}e.shortcuts=e.shortcuts||{};if(C(f,"string")){a=f;f=function(){e.execCommand(a,false,null)}}if(C(f,"object")){a=f;f=function(){e.execCommand(a[0],a[1],a[2])}}w(z(d),function(h){var g={func:f,scope:c||this,desc:b,alt:false,ctrl:false,shift:false};w(z(h,"+"),function(i){switch(i){case"alt":case"ctrl":case"shift":g[i]=true;break;default:g.charCode=i.charCodeAt(0);g.keyCode=i.toUpperCase().charCodeAt(0)}});e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g});return true},execCommand:function(a,b,g,f){var d=this,c=0,h,e;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!f||!f.skip_focus)){d.focus()}h={};d.onBeforeExecCommand.dispatch(d,a,b,g,h);if(h.terminate){return false}if(d.execCallback("execcommand_callback",d.id,d.selection.getNode(),a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}if(h=d.execCommands[a]){e=h.func.call(h.scope,b,g);if(e!==true){d.onExecCommand.dispatch(d,a,b,g,f);return e}}w(d.plugins,function(i){if(i.execCommand&&i.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);c=1;return false}});if(c){return true}if(d.theme&&d.theme.execCommand&&d.theme.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}if(s.GlobalCommands.execCommand(d,a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}if(d.editorCommands.execCommand(a,b,g)){d.onExecCommand.dispatch(d,a,b,g,f);return true}d.getDoc().execCommand(a,b,g);d.onExecCommand.dispatch(d,a,b,g,f)},queryCommandState:function(a){var d=this,b,c;if(d._isHidden()){return}if(b=d.queryStateCommands[a]){c=b.func.call(b.scope);if(c!==true){return c}}b=d.editorCommands.queryCommandState(a);if(b!==-1){return b}try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var d=this,b,c;if(d._isHidden()){return}if(b=d.queryValueCommands[a]){c=b.func.call(b.scope);if(c!==true){return c}}b=d.editorCommands.queryCommandValue(a);if(C(b)){return b}try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;r.show(a.getContainer());r.hide(a.id);a.load()},hide:function(){var b=this,a=b.getDoc();if(E&&a){a.execCommand("SelectAll")}b.save();r.hide(b.getContainer());r.setStyle(b.id,"display",b.orgDisplay)},isHidden:function(){return !r.isHidden(this.id)},setProgressState:function(c,b,a){this.onSetProgressState.dispatch(this,c,b,a);return c},resizeToContent:function(){var a=this;r.setStyle(a.id+"_ifr","height",a.getBody().scrollHeight)},load:function(a){var d=this,b=d.getElement(),c;if(b){a=a||{};a.load=true;c=d.setContent(C(b.value)?b.value:b.innerHTML,a);a.element=b;if(!a.no_events){d.onLoadContent.dispatch(d,a)}a.element=b=null;return c}},save:function(a){var e=this,b=e.getElement(),d,c;if(!b||!e.initialized){return}a=a||{};a.save=true;if(!a.no_events){e.undoManager.typing=0;e.undoManager.add()}a.element=b;d=a.content=e.getContent(a);if(!a.no_events){e.onSaveContent.dispatch(e,a)}d=a.content;if(!/TEXTAREA|INPUT/i.test(b.nodeName)){b.innerHTML=d;if(c=r.getParent(e.id,"form")){w(c.elements,function(f){if(f.name==e.id){f.value=d;return false}})}}else{b.value=d}a.element=b=null;return d},setContent:function(b,a){var c=this;a=a||{};a.format=a.format||"html";a.set=true;a.content=b;if(!a.no_events){c.onBeforeSetContent.dispatch(c,a)}if(!s.isIE&&(b.length===0||/^\s+$/.test(b))){a.content=c.dom.setHTML(c.getBody(),'<br mce_bogus="1" />');a.format="raw"}a.content=c.dom.setHTML(c.getBody(),s.trim(a.content));if(a.format!="raw"&&c.settings.cleanup){a.getInner=true;a.content=c.dom.setHTML(c.getBody(),c.serializer.serialize(c.getBody(),a))}if(!a.no_events){c.onSetContent.dispatch(c,a)}return a.content},getContent:function(a){var c=this,b;a=a||{};a.format=a.format||"html";a.get=true;if(!a.no_events){c.onBeforeGetContent.dispatch(c,a)}if(a.format!="raw"&&c.settings.cleanup){a.getInner=true;b=c.serializer.serialize(c.getBody(),a)}else{b=c.getBody().innerHTML}b=b.replace(/^\s*|\s*$/g,"");a.content=b;if(!a.no_events){c.onGetContent.dispatch(c,a)}return a.content},isDirty:function(){var a=this;return s.trim(a.startContent)!=s.trim(a.getContent({format:"raw",no_events:1}))&&!a.isNotDirty},getContainer:function(){var a=this;if(!a.container){a.container=r.get(a.editorContainer||a.id+"_parent")}return a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return r.get(this.settings.content_element||this.id)},getWin:function(){var b=this,a;if(!b.contentWindow){a=r.get(b.id+"_ifr");if(a){b.contentWindow=a.contentWindow}}return b.contentWindow},getDoc:function(){var a=this,b;if(!a.contentDocument){b=a.getWin();if(b){a.contentDocument=b.document}}return a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,a,b){var d=this,c=d.settings;if(c.urlconverter_callback){return d.execCallback("urlconverter_callback",e,b,true,a)}if(!c.convert_urls||(b&&b.nodeName=="LINK")||e.indexOf("file:")===0){return e}if(c.relative_urls){return d.documentBaseURI.toRelative(e)}e=d.documentBaseURI.toAbsolute(e,c.remove_script_host);return e},addVisual:function(a){var c=this,b=c.settings;a=a||c.getBody();if(!C(c.hasVisual)){c.hasVisual=b.visual}w(c.dom.select("table,a",a),function(d){var e;switch(d.nodeName){case"TABLE":e=c.dom.getAttrib(d,"border");if(!e||e=="0"){if(c.hasVisual){c.dom.addClass(d,b.visual_table_class)}else{c.dom.removeClass(d,b.visual_table_class)}}return;case"A":e=c.dom.getAttrib(d,"name");if(e){if(c.hasVisual){c.dom.addClass(d,"mceItemAnchor")}else{c.dom.removeClass(d,"mceItemAnchor")}}return}});c.onVisualAid.dispatch(c,a,c.hasVisual)},remove:function(){var b=this,a=b.getContainer();b.removed=1;b.hide();b.execCallback("remove_instance_callback",b);b.onRemove.dispatch(b);b.onExecCommand.listeners=[];x.remove(b);r.remove(a)},destroy:function(a){var b=this;if(b.destroyed){return}if(!a){s.removeUnload(b.destroy);tinyMCE.onBeforeUnload.remove(b._beforeUnload);if(b.theme&&b.theme.destroy){b.theme.destroy()}b.controlManager.destroy();b.selection.destroy();b.dom.destroy();if(!b.settings.content_editable){v.clear(b.getWin());v.clear(b.getDoc())}v.clear(b.getBody());v.clear(b.formElement)}if(b.formElement){b.formElement.submit=b.formElement._mceOldSubmit;b.formElement._mceOldSubmit=null}b.contentAreaContainer=b.formElement=b.container=b.settings.content_element=b.bodyElement=b.contentDocument=b.contentWindow=null;if(b.selection){b.selection=b.selection.win=b.selection.dom=b.selection.dom.doc=null}b.destroyed=1},_addEvents:function(){var b=this,c,h=b.settings,a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function d(j,i){var k=j.type;if(b.removed){return}if(b.onEvent.dispatch(b,j,i)!==false){b[a[j.fakeType||j.type]].dispatch(b,j,i)}}w(a,function(i,j){switch(j){case"contextmenu":if(s.isOpera){v.add(b.getBody(),"mousedown",function(k){if(k.ctrlKey){k.fakeType="contextmenu";d(k)}})}else{v.add(b.getBody(),j,d)}break;case"paste":v.add(b.getBody(),j,function(l){var k,n,o,m;if(l.clipboardData){k=l.clipboardData.getData("text/plain")}else{if(s.isIE){k=b.getWin().clipboardData.getData("Text")}}d(l,{text:k,html:n})});break;case"submit":case"reset":v.add(b.getElement().form||r.getParent(b.id,"form"),j,d);break;default:v.add(h.content_editable?b.getBody():b.getDoc(),j,d)}});v.add(h.content_editable?b.getBody():(F?b.getDoc():b.getWin()),"focus",function(i){b.focus(true)});if(s.isGecko){v.add(b.getDoc(),"DOMNodeInserted",function(i){var j;i=i.target;if(i.nodeType===1&&i.nodeName==="IMG"&&(j=i.getAttribute("mce_src"))){i.src=b.documentBaseURI.toAbsolute(j)}})}if(F){function f(){var l=this,j=l.getDoc(),k=l.settings;if(F&&!k.readonly){if(l._isHidden()){try{if(!k.content_editable){j.designMode="On"}}catch(i){}}try{j.execCommand("styleWithCSS",0,false)}catch(i){if(!l._isHidden()){try{j.execCommand("useCSS",0,true)}catch(i){}}}if(!k.table_inline_editing){try{j.execCommand("enableInlineTableEditing",false,false)}catch(i){}}if(!k.object_resizing){try{j.execCommand("enableObjectResizing",false,false)}catch(i){}}}}b.onBeforeExecCommand.add(f);b.onMouseDown.add(f)}b.onMouseUp.add(b.nodeChanged);b.onClick.add(b.nodeChanged);b.onKeyUp.add(function(k,j){var i=j.keyCode;if((i>=33&&i<=36)||(i>=37&&i<=40)||i==13||i==45||i==46||i==8||(s.isMac&&(i==91||i==93))||j.ctrlKey){b.nodeChanged()}});b.onReset.add(function(){b.setContent(b.startContent,{format:"raw"})});if(h.custom_shortcuts){if(h.custom_undo_redo_keyboard_shortcuts){b.addShortcut("ctrl+z",b.getLang("undo_desc"),"Undo");b.addShortcut("ctrl+y",b.getLang("redo_desc"),"Redo")}if(F){b.addShortcut("ctrl+b",b.getLang("bold_desc"),"Bold");b.addShortcut("ctrl+i",b.getLang("italic_desc"),"Italic");b.addShortcut("ctrl+u",b.getLang("underline_desc"),"Underline")}for(c=1;c<=6;c++){b.addShortcut("ctrl+"+c,"",["FormatBlock",false,"<h"+c+">"])}b.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);b.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);b.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function g(i){var j=null;if(!i.altKey&&!i.ctrlKey&&!i.metaKey){return j}w(b.shortcuts,function(k){if(s.isMac&&k.ctrl!=i.metaKey){return}else{if(!s.isMac&&k.ctrl!=i.ctrlKey){return}}if(k.alt!=i.altKey){return}if(k.shift!=i.shiftKey){return}if(i.keyCode==k.keyCode||(i.charCode&&i.charCode==k.charCode)){j=k;return false}});return j}b.onKeyUp.add(function(k,j){var i=g(j);if(i){return v.cancel(j)}});b.onKeyPress.add(function(k,j){var i=g(j);if(i){return v.cancel(j)}});b.onKeyDown.add(function(k,j){var i=g(j);if(i){i.func.call(i.scope);return v.cancel(j)}})}if(s.isIE){v.add(b.getDoc(),"controlselect",function(i){var j=b.resizeInfo,k;i=i.target;if(i.nodeName!=="IMG"){return}if(j){v.remove(j.node,j.ev,j.cb)}if(!b.dom.hasClass(i,"mceItemNoResize")){ev="resizeend";k=v.add(i,ev,function(l){var m;l=l.target;if(m=b.dom.getStyle(l,"width")){b.dom.setAttrib(l,"width",m.replace(/[^0-9%]+/g,""));b.dom.setStyle(l,"width","")}if(m=b.dom.getStyle(l,"height")){b.dom.setAttrib(l,"height",m.replace(/[^0-9%]+/g,""));b.dom.setStyle(l,"height","")}})}else{ev="resizestart";k=v.add(i,"resizestart",v.cancel,v)}j=b.resizeInfo={node:i,ev:ev,cb:k}});b.onKeyDown.add(function(j,i){switch(i.keyCode){case 8:if(b.selection.getRng().item){b.selection.getRng().item(0).removeNode();return v.cancel(i)}}})}if(s.isOpera){b.onClick.add(function(j,i){v.prevent(i)})}if(h.custom_undo_redo){function e(){b.undoManager.typing=0;b.undoManager.add()}if(s.isIE){v.add(b.getWin(),"blur",function(j){var i;if(b.selection){i=b.selection.getNode();if(!b.removed&&i.ownerDocument&&i.ownerDocument!=b.getDoc()){e()}}})}else{v.add(b.getDoc(),"blur",function(){if(b.selection&&!b.removed){e()}})}b.onMouseDown.add(e);b.onKeyUp.add(function(j,i){if((i.keyCode>=33&&i.keyCode<=36)||(i.keyCode>=37&&i.keyCode<=40)||i.keyCode==13||i.keyCode==45||i.ctrlKey){b.undoManager.typing=0;b.undoManager.add()}});b.onKeyDown.add(function(j,i){if((i.keyCode>=33&&i.keyCode<=36)||(i.keyCode>=37&&i.keyCode<=40)||i.keyCode==13||i.keyCode==45){if(b.undoManager.typing){b.undoManager.add();b.undoManager.typing=0}return}if(!b.undoManager.typing){b.undoManager.add();b.undoManager.typing=1}})}},_convertInlineElements:function(){var e=this,c=e.settings,a=e.dom,f,h,i,d,b;function g(k,j){if(!c.inline_styles){return}if(j.get){w(e.dom.select("table,u,strike",j.node),function(l){switch(l.nodeName){case"TABLE":if(f=a.getAttrib(l,"height")){a.setStyle(l,"height",f);a.setAttrib(l,"height","")}break;case"U":case"STRIKE":l.style.textDecoration=l.nodeName=="U"?"underline":"line-through";a.setAttrib(l,"mce_style","");a.setAttrib(l,"mce_name","span");break}})}else{if(j.set){w(e.dom.select("table,span",j.node).reverse(),function(l){if(l.nodeName=="TABLE"){if(f=a.getStyle(l,"height")){a.setAttrib(l,"height",f.replace(/[^0-9%]+/g,""))}}else{if(l.style.textDecoration=="underline"){i="u"}else{if(l.style.textDecoration=="line-through"){i="strike"}else{i=""}}if(i){l.style.textDecoration="";a.setAttrib(l,"mce_style","");h=a.create(i,{style:a.getAttrib(l,"style")});a.replace(h,l,1)}}})}}}e.onPreProcess.add(g);if(!c.cleanup_on_startup){e.onSetContent.add(function(k,j){if(j.initial){g(e,{node:e.getBody(),set:1})}})}},_convertFonts:function(){var b=this,a=b.settings,g=b.dom,c,e,f,d;if(!a.inline_styles){return}c=[8,10,12,14,18,24,36];e=["xx-small","x-small","small","medium","large","x-large","xx-large"];if(f=a.font_size_style_values){f=z(f)}if(d=a.font_size_classes){d=z(d)}function h(m){var l,i,j,k;if(!a.inline_styles){return}j=b.dom.select("font",m);for(k=j.length-1;k>=0;k--){l=j[k];i=g.create("span",{style:g.getAttrib(l,"style"),"class":g.getAttrib(l,"class")});g.setStyles(i,{fontFamily:g.getAttrib(l,"face"),color:g.getAttrib(l,"color"),backgroundColor:l.style.backgroundColor});if(l.size){if(f){g.setStyle(i,"fontSize",f[parseInt(l.size)-1])}else{g.setAttrib(i,"class",d[parseInt(l.size)-1])}}g.setAttrib(i,"mce_style","");g.replace(i,l,1)}}b.onPreProcess.add(function(j,i){if(i.get){h(i.node)}});b.onSetContent.add(function(j,i){if(i.initial){h(i.node)}})},_isHidden:function(){var a;if(!F){return 0}a=this.selection.getSel();return(!a||!a.rangeCount||a.rangeCount==0)},_fixNesting:function(b){var a=[],c;b=b.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(f,g,d){var e;if(g==="/"){if(!a.length){return""}if(d!==a[a.length-1].tag){for(c=a.length-1;c>=0;c--){if(a[c].tag===d){a[c].close=1;break}}return""}else{a.pop();if(a.length&&a[a.length-1].close){f=f+"</"+a[a.length-1].tag+">";a.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(d)){return f}if(/\/>$/.test(f)){return f}a.push({tag:d})}return f});for(c=a.length-1;c>=0;c--){b+="</"+a[c].tag+">"}return b}})})(tinymce);(function(k){var i=k.each,l=k.isIE,h=k.isGecko,g=k.isOpera,j=k.isWebKit;k.create("tinymce.EditorCommands",{EditorCommands:function(a){this.editor=a},execCommand:function(b,c,a){var e=this,f=e.editor,d;switch(b){case"mceResetDesignMode":case"mceBeginUndoLevel":return true;case"unlink":e.UnLink();return true;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":e.mceJustify(b,b.substring(7).toLowerCase());return true;default:d=this[b];if(d){d.call(this,c,a);return true}}return false},Indent:function(){var f=this.editor,a=f.dom,c=f.selection,b,e,d;e=f.settings.indentation;d=/[a-z%]+$/i.exec(e);e=parseInt(e);if(f.settings.inline_styles&&(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList())){i(c.getSelectedBlocks(),function(n){a.setStyle(n,"paddingLeft",(parseInt(n.style.paddingLeft||0)+e)+d)});return}f.getDoc().execCommand("Indent",false,null);if(l){a.getParent(c.getNode(),function(n){if(n.nodeName=="BLOCKQUOTE"){n.dir=n.style.cssText=""}})}},Outdent:function(){var f=this.editor,a=f.dom,c=f.selection,b,n,e,d;e=f.settings.indentation;d=/[a-z%]+$/i.exec(e);e=parseInt(e);if(f.settings.inline_styles&&(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList())){i(c.getSelectedBlocks(),function(m){n=Math.max(0,parseInt(m.style.paddingLeft||0)-e);a.setStyle(m,"paddingLeft",n?n+d:"")});return}f.getDoc().execCommand("Outdent",false,null)},mceSetContent:function(a,b){this.editor.setContent(b)},mceToggleVisualAid:function(){var a=this.editor;a.hasVisual=!a.hasVisual;a.addVisual()},mceReplaceContent:function(b,c){var a=this.editor.selection;a.setContent(c.replace(/\{\$selection\}/g,a.getContent({format:"text"})))},mceInsertLink:function(d,e){var f=this.editor,c=f.selection,b=f.dom.getParent(c.getNode(),"A");if(k.is(e,"string")){e={href:e}}function a(n){i(e,function(m,p){f.dom.setAttrib(n,p,m)})}if(!b){f.execCommand("CreateLink",false,"javascript:mctmp(0);");i(f.dom.select("a[href=javascript:mctmp(0);]"),function(n){a(n)})}else{if(e.href){a(b)}else{f.dom.remove(b,1)}}},UnLink:function(){var b=this.editor,a=b.selection;if(a.isCollapsed()){a.select(a.getNode())}b.getDoc().execCommand("unlink",false,null);a.collapse(0)},FontName:function(d,e){var c=this,f=c.editor,b=f.selection,a;if(!e){if(b.isCollapsed()){b.select(b.getNode())}}else{if(f.settings.convert_fonts_to_spans){c._applyInlineStyle("span",{style:{fontFamily:e}})}else{f.getDoc().execCommand("FontName",false,e)}}},FontSize:function(c,d){var e=this.editor,a=e.settings,b,f;if(a.convert_fonts_to_spans&&d>=1&&d<=7){f=k.explode(a.font_size_style_values);b=k.explode(a.font_size_classes);if(b){d=b[d-1]||d}else{d=f[d-1]||d}}if(d>=1&&d<=7){e.getDoc().execCommand("FontSize",false,d)}else{this._applyInlineStyle("span",{style:{fontSize:d}})}},queryCommandValue:function(a){var b=this["queryValue"+a];if(b){return b.call(this,a)}return false},queryCommandState:function(a){var b;switch(a){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(a,a.substring(7).toLowerCase());default:if(b=this["queryState"+a]){return b.call(this,a)}}return -1},_queryState:function(a){try{return this.editor.getDoc().queryCommandState(a)}catch(b){}},_queryVal:function(a){try{return this.editor.getDoc().queryCommandValue(a)}catch(b){}},queryValueFontSize:function(){var b=this.editor,c=0,a;if(a=b.dom.getParent(b.selection.getNode(),"SPAN")){c=a.style.fontSize}if(!c&&(g||j)){if(a=b.dom.getParent(b.selection.getNode(),"FONT")){c=a.size}return c}return c||this._queryVal("FontSize")},queryValueFontName:function(){var b=this.editor,c=0,a;if(a=b.dom.getParent(b.selection.getNode(),"FONT")){c=a.face}if(a=b.dom.getParent(b.selection.getNode(),"SPAN")){c=a.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}if(!c){c=this._queryVal("FontName")}return c},mceJustify:function(c,b){var f=this.editor,d=f.selection,t=d.getNode(),a=t.nodeName,s,n,r=f.dom,e;if(f.settings.inline_styles&&this.queryStateJustify(c,b)){e=1}s=r.getParent(t,f.dom.isBlock);if(a=="IMG"){if(b=="full"){return}if(e){if(b=="center"){r.setStyle(s||t.parentNode,"textAlign","")}r.setStyle(t,"float","");this.mceRepaint();return}if(b=="center"){if(s&&/^(TD|TH)$/.test(s.nodeName)){s=0}if(!s||s.childNodes.length>1){n=r.create("p");n.appendChild(t.cloneNode(false));if(s){r.insertAfter(n,s)}else{r.insertAfter(n,t)}r.remove(t);t=n.firstChild;s=n}r.setStyle(s,"textAlign",b);r.setStyle(t,"float","")}else{r.setStyle(t,"float",b);r.setStyle(s||t.parentNode,"textAlign","")}this.mceRepaint();return}if(f.settings.inline_styles&&f.settings.forced_root_block){if(e){b=""}i(d.getSelectedBlocks(r.getParent(d.getStart(),r.isBlock),r.getParent(d.getEnd(),r.isBlock)),function(m){r.setAttrib(m,"align","");r.setStyle(m,"textAlign",b=="full"?"justify":b)});return}else{if(!e){f.getDoc().execCommand(c,false,null)}}if(f.settings.inline_styles){if(e){r.getParent(f.selection.getNode(),function(m){if(m.style&&m.style.textAlign){r.setStyle(m,"textAlign","")}});return}i(r.select("*"),function(m){var o=m.align;if(o){if(o=="full"){o="justify"}r.setStyle(m,"textAlign",o);r.setAttrib(m,"align","")}})}},mceSetCSSClass:function(a,b){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:b})},getSelectedElement:function(){var C=this,c=C.editor,d=c.dom,F=c.selection,z=F.getRng(),f,r,E,b,t,A,a,y,B,D;if(F.isCollapsed()||z.item){return F.getNode()}D=c.settings.merge_styles_invalid_parents;if(k.is(D,"string")){D=new RegExp(D,"i")}if(l){f=z.duplicate();f.collapse(true);E=f.parentElement();r=z.duplicate();r.collapse(false);b=r.parentElement();if(E!=b){f.move("character",1);E=f.parentElement()}if(E==b){f=z.duplicate();f.moveToElementText(E);if(f.compareEndPoints("StartToStart",z)==0&&f.compareEndPoints("EndToEnd",z)==0){return D&&D.test(E.nodeName)?null:E}}}else{function e(m){return d.getParent(m,"*")}E=z.startContainer;b=z.endContainer;t=z.startOffset;A=z.endOffset;if(!z.collapsed){if(E==b){if(t-A<2){if(E.hasChildNodes()){y=E.childNodes[t];return D&&D.test(y.nodeName)?null:y}}}}if(E.nodeType!=3||b.nodeType!=3){return null}if(t==0){y=e(E);if(y&&y.firstChild!=E){y=null}}if(t==E.nodeValue.length){a=E.nextSibling;if(a&&a.nodeType==1){y=E.nextSibling}}if(A==0){a=b.previousSibling;if(a&&a.nodeType==1){B=a}}if(A==b.nodeValue.length){B=e(b);if(B&&B.lastChild!=b){B=null}}if(y==B){return D&&y&&D.test(y.nodeName)?null:y}}return null},mceSetStyleInfo:function(e,f){var b=this,w=b.editor,u=w.getDoc(),x=w.dom,v,t,a=w.selection,c=f.wrapper||"span",t=a.getBookmark(),d;function s(m,n){if(m.nodeType==1){switch(f.command){case"setattrib":return x.setAttrib(m,f.name,f.value);case"setstyle":return x.setStyle(m,f.name,f.value);case"removeformat":return x.setAttrib(m,"class","")}}}d=w.settings.merge_styles_invalid_parents;if(k.is(d,"string")){d=new RegExp(d,"i")}if((v=b.getSelectedElement())&&!w.settings.force_span_wrappers){s(v,1)}else{u.execCommand("FontName",false,"__");i(x.select("span,font"),function(m){var o,n;if(x.getAttrib(m,"face")=="__"||m.style.fontFamily==="__"){o=x.create(c,{mce_new:"1"});s(o);i(m.childNodes,function(p){o.appendChild(p.cloneNode(true))});x.replace(o,m)}})}i(x.select(c).reverse(),function(m){var n=m.parentNode;if(!x.getAttrib(m,"mce_new")){n=x.getParent(m,"*[mce_new]");if(n){x.remove(m,1)}}});i(x.select(c).reverse(),function(m){var n=m.parentNode;if(!n||!x.getAttrib(m,"mce_new")){return}if(w.settings.force_span_wrappers&&n.nodeName!="SPAN"){return}if(n.nodeName==c.toUpperCase()&&n.childNodes.length==1){return x.remove(n,1)}if(m.nodeType==1&&(!d||!d.test(n.nodeName))&&n.childNodes.length==1){s(n);x.setAttrib(m,"class","")}});i(x.select(c).reverse(),function(m){if(x.getAttrib(m,"mce_new")||(x.getAttribs(m).length<=1&&m.className==="")){if(!x.getAttrib(m,"class")&&!x.getAttrib(m,"style")){return x.remove(m,1)}x.setAttrib(m,"mce_new","")}});a.moveToBookmark(t)},queryStateJustify:function(a,d){var e=this.editor,b=e.selection.getNode(),c=e.dom;if(b&&b.nodeName=="IMG"){if(c.getStyle(b,"float")==d){return 1}return b.parentNode.style.textAlign==d}b=c.getParent(e.selection.getStart(),function(f){return f.nodeType==1&&f.style.textAlign});if(d=="full"){d="justify"}if(e.settings.inline_styles){return(b&&b.style.textAlign==d)}return this._queryState(a)},ForeColor:function(a,b){var c=this.editor;if(c.settings.convert_fonts_to_spans){this._applyInlineStyle("span",{style:{color:b}});return}else{c.getDoc().execCommand("ForeColor",false,b)}},HiliteColor:function(d,b){var e=this,f=e.editor,c=f.getDoc();if(f.settings.convert_fonts_to_spans){this._applyInlineStyle("span",{style:{backgroundColor:b}});return}function a(p){if(!h){return}try{c.execCommand("styleWithCSS",0,p)}catch(o){c.execCommand("useCSS",0,!p)}}if(h||g){a(true);c.execCommand("hilitecolor",false,b);a(false)}else{c.execCommand("BackColor",false,b)}},FormatBlock:function(c,s){var b=this,e=b.editor,a=e.selection,q=e.dom,t,f,d;function r(m){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(m.nodeName)}t=q.getParent(a.getNode(),function(m){return r(m)});if(t){if((l&&r(t.parentNode))||t.nodeName=="DIV"){f=e.dom.create(s);i(q.getAttribs(t),function(m){q.setAttrib(f,m.nodeName,q.getAttrib(t,m.nodeName))});d=a.getBookmark();q.replace(f,t,1);a.moveToBookmark(d);e.nodeChanged();return}}s=e.settings.forced_root_block?(s||"<p>"):s;if(s.indexOf("<")==-1){s="<"+s+">"}if(k.isGecko){s=s.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")}e.getDoc().execCommand("FormatBlock",false,s)},mceCleanup:function(){var b=this.editor,a=b.selection,c=a.getBookmark();b.setContent(b.getContent());a.moveToBookmark(c)},mceRemoveNode:function(c,b){var e=this.editor,d=e.selection,f,a=b||d.getNode();if(a==e.getBody()){return}f=d.getBookmark();e.dom.remove(a,1);d.moveToBookmark(f);e.nodeChanged()},mceSelectNodeDepth:function(c,b){var e=this.editor,d=e.selection,a=0;e.dom.getParent(d.getNode(),function(f){if(f.nodeType==1&&a++==b){d.select(f);e.nodeChanged();return false}},e.getBody())},mceSelectNode:function(a,b){this.editor.selection.select(b)},mceInsertContent:function(b,a){this.editor.selection.setContent(a)},mceInsertRawHTML:function(b,a){var c=this.editor;c.selection.setContent("tiny_mce_marker");c.setContent(c.getContent().replace(/tiny_mce_marker/g,a))},mceRepaint:function(){var b,d,a=this.editor;if(k.isGecko){try{b=a.selection;d=b.getBookmark(true);if(b.getSel()){b.getSel().selectAllChildren(a.getBody())}b.collapse(true);b.moveToBookmark(d)}catch(c){}}},queryStateUnderline:function(){var b=this.editor,a=b.selection.getNode();if(a&&a.nodeName=="A"){return false}return this._queryState("Underline")},queryStateOutdent:function(){var b=this.editor,a;if(b.settings.inline_styles){if((a=b.dom.getParent(b.selection.getStart(),b.dom.isBlock))&&parseInt(a.style.paddingLeft)>0){return true}if((a=b.dom.getParent(b.selection.getEnd(),b.dom.isBlock))&&parseInt(a.style.paddingLeft)>0){return true}}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||(!b.settings.inline_styles&&!!b.dom.getParent(b.selection.getNode(),"BLOCKQUOTE"))},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return !!this.editor.dom.getParent(this.editor.selection.getStart(),function(a){return a.nodeName==="BLOCKQUOTE"})},_applyInlineStyle:function(d,u,f){var b=this,e=b.editor,s=e.dom,v,c={},t,a;d=d.toUpperCase();if(f&&f.check_classes&&u["class"]){f.check_classes.push(u["class"])}function w(){i(s.select(d).reverse(),function(m){var n=0;i(s.getAttribs(m),function(o){if(o.nodeName.substring(0,1)!="_"&&s.getAttrib(m,o.nodeName)!=""){n++}});if(n==0){s.remove(m,1)}})}function x(){var m;i(s.select("span,font"),function(n){if(n.style.fontFamily=="mceinline"||n.face=="mceinline"){if(!m){m=e.selection.getBookmark()}u._mce_new="1";s.replace(s.create(d,u),n,1)}});i(s.select(d+"[_mce_new]"),function(n){function o(p){if(p.nodeType==1){i(u.style,function(q,r){s.setStyle(p,r,"")});if(u["class"]&&p.className&&f){i(f.check_classes,function(q){if(s.hasClass(p,q)){s.removeClass(p,q)}})}}}i(s.select(d,n),o);if(n.parentNode&&n.parentNode.nodeType==1&&n.parentNode.childNodes.length==1){o(n.parentNode)}s.getParent(n.parentNode,function(p){if(p.nodeType==1){if(u.style){i(u.style,function(z,q){var r;if(!c[q]&&(r=s.getStyle(p,q))){if(r===z){s.setStyle(n,q,"")}c[q]=1}})}if(u["class"]&&p.className&&f){i(f.check_classes,function(q){if(s.hasClass(p,q)){s.removeClass(n,q)}})}}return false});n.removeAttribute("_mce_new")});w();e.selection.moveToBookmark(m);return !!m}e.focus();e.getDoc().execCommand("FontName",false,"mceinline");x();if(t=b._applyInlineStyle.keyhandler){e.onKeyUp.remove(t);e.onKeyPress.remove(t);e.onKeyDown.remove(t);e.onSetContent.remove(b._applyInlineStyle.chandler)}if(e.selection.isCollapsed()){if(!l){i(s.getParents(e.selection.getNode(),"span"),function(m){i(u.style,function(o,p){var n;if(n=s.getStyle(m,p)){if(n==o){s.setStyle(m,p,"");a=2;return false}a=1;return false}});if(a){return false}});if(a==2){v=e.selection.getBookmark();w();e.selection.moveToBookmark(v);window.setTimeout(function(){e.nodeChanged()},1);return}}b._pendingStyles=k.extend(b._pendingStyles||{},u.style);b._applyInlineStyle.chandler=e.onSetContent.add(function(){delete b._pendingStyles});b._applyInlineStyle.keyhandler=t=function(m){if(b._pendingStyles){u.style=b._pendingStyles;delete b._pendingStyles}if(x()){e.onKeyDown.remove(b._applyInlineStyle.keyhandler);e.onKeyPress.remove(b._applyInlineStyle.keyhandler)}if(m.type=="keyup"){e.onKeyUp.remove(b._applyInlineStyle.keyhandler)}};e.onKeyDown.add(t);e.onKeyPress.add(t);e.onKeyUp.add(t)}else{b._pendingStyles=0}}})})(tinymce);(function(b){b.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(f){var e=this,a=b.util.Dispatcher;e.editor=f;e.data=[];e.onAdd=new a(this);e.onUndo=new a(this);e.onRedo=new a(this)},add:function(n){var k=this,l,m=k.editor,o,i=m.settings,a;n=n||{};n.content=n.content||m.getContent({format:"raw",no_events:1});n.content=n.content.replace(/^\s*|\s*$/g,"");a=k.data[k.index>0&&(k.index==0||k.index==k.data.length)?k.index-1:k.index];if(!n.initial&&a&&n.content==a.content){return null}if(i.custom_undo_redo_levels){if(k.data.length>i.custom_undo_redo_levels){for(l=0;l<k.data.length-1;l++){k.data[l]=k.data[l+1]}k.data.length--;k.index=k.data.length}}if(i.custom_undo_redo_restore_selection&&!n.initial){n.bookmark=o=n.bookmark||m.selection.getBookmark()}if(k.index<k.data.length){k.index++}if(k.data.length===0&&!n.initial){return null}k.data.length=k.index+1;k.data[k.index++]=n;if(n.initial){k.index=0}if(k.data.length==2&&k.data[0].initial){k.data[0].bookmark=o}k.onAdd.dispatch(k,n);m.isNotDirty=0;return n},undo:function(){var f=this,h=f.editor,a=a,g;if(f.typing){f.add();f.typing=0}if(f.index>0){if(f.index==f.data.length&&f.index>1){g=f.index;f.typing=0;if(!f.add()){f.index=g}--f.index}a=f.data[--f.index];h.setContent(a.content,{format:"raw"});h.selection.moveToBookmark(a.bookmark);f.onUndo.dispatch(f,a)}return a},redo:function(){var e=this,f=e.editor,a=null;if(e.index<e.data.length-1){a=e.data[++e.index];f.setContent(a.content,{format:"raw"});f.selection.moveToBookmark(a.bookmark);e.onRedo.dispatch(e,a)}return a},clear:function(){var a=this;a.data=[];a.index=0;a.typing=0;a.add({initial:true})},hasUndo:function(){return this.index!=0||this.typing},hasRedo:function(){return this.index<this.data.length-1}})})(tinymce);(function(l){var h,m,i,n,k,j;h=l.dom.Event;m=l.isIE;i=l.isGecko;n=l.isOpera;k=l.each;j=l.extend;l.create("tinymce.ForceBlocks",{ForceBlocks:function(d){var c=this,b=d.settings,a;c.editor=d;c.dom=d.dom;a=(b.forced_root_block||"p").toLowerCase();b.element=a.toUpperCase();d.onPreInit.add(c.setup,c);c.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+a+">","gi");c.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,a),"gi");c.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,a),"gi");c.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,a),"gi");c.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,a),"gi");c.reTrailBr=new RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,a),"gi");function e(f,g){if(n){g.content=g.content.replace(c.reOpera,"</"+a+">")}g.content=g.content.replace(c.rePadd,"<"+a+"$1$2$3$4$5$6>\u00a0</"+a+">");if(!m&&!n&&g.set){g.content=g.content.replace(c.reNbsp2BR1,"<"+a+"$1$2><br /></"+a+">");g.content=g.content.replace(c.reNbsp2BR2,"<"+a+"$1$2><br /></"+a+">")}else{g.content=g.content.replace(c.reBR2Nbsp,"<"+a+"$1$2>\u00a0</"+a+">");g.content=g.content.replace(c.reTrailBr,"</"+a+">")}}d.onBeforeSetContent.add(e);d.onPostProcess.add(e);if(b.forced_root_block){d.onInit.add(c.forceRoots,c);d.onSetContent.add(c.forceRoots,c);d.onBeforeGetContent.add(c.forceRoots,c)}},setup:function(){var c=this,d=c.editor,b=d.settings;if(b.forced_root_block){d.onKeyUp.add(c.forceRoots,c);d.onPreProcess.add(c.forceRoots,c)}if(b.force_br_newlines){if(m){d.onKeyPress.add(function(f,q){var g,e=f.selection;if(q.keyCode==13&&e.getNode().nodeName!="LI"){e.setContent('<br id="__" /> ',{format:"raw"});g=f.dom.get("__");g.removeAttribute("id");e.select(g);e.collapse();return h.cancel(q)}})}return}if(!m&&b.force_p_newlines){d.onKeyPress.add(function(f,e){if(e.keyCode==13&&!e.shiftKey){if(!c.insertPara(e)){h.cancel(e)}}});if(i){d.onKeyDown.add(function(f,e){if((e.keyCode==8||e.keyCode==46)&&!e.shiftKey){c.backspaceDelete(e,e.keyCode==8)}})}}function a(e,f){var g=d.dom.create(f);k(e.attributes,function(p){if(p.specified&&p.nodeValue){g.setAttribute(p.nodeName.toLowerCase(),p.nodeValue)}});k(e.childNodes,function(p){g.appendChild(p.cloneNode(true))});e.parentNode.replaceChild(g,e);return g}if(m&&b.element!="P"){d.onKeyPress.add(function(f,e){c.lastElm=f.selection.getNode().nodeName});d.onKeyUp.add(function(e,t){var g,u=e.selection,s=u.getNode(),f=e.getBody();if(f.childNodes.length===1&&s.nodeName=="P"){s=a(s,b.element);u.select(s);u.collapse();e.nodeChanged()}else{if(t.keyCode==13&&!t.shiftKey&&c.lastElm!="P"){g=e.dom.getParent(s,"P");if(g){a(g,b.element);e.nodeChanged()}}}})}},find:function(a,d,c){var e=this.editor,f=e.getDoc().createTreeWalker(a,4,null,false),b=-1;while(a=f.nextNode()){b++;if(d==0&&a==c){return b}if(d==1&&b==c){return a}}return -1},forceRoots:function(S,N){var P=this,S=P.editor,r=S.getBody(),M=S.getDoc(),c=S.selection,K=c.getSel(),s=c.getRng(),g=-2,T,R,X,W,L=-16777215;var t,V,e,a,f,U=r.childNodes,b,d,Q;for(b=U.length-1;b>=0;b--){t=U[b];if(t.nodeType==3||(!P.dom.isBlock(t)&&t.nodeType!=8)){if(!V){if(t.nodeType!=3||/[^\s]/g.test(t.nodeValue)){if(g==-2&&s){if(!m){if(s.startContainer.nodeType==1&&(d=s.startContainer.childNodes[s.startOffset])&&d.nodeType==1){Q=d.getAttribute("id");d.setAttribute("id","__mce")}else{if(S.dom.getParent(s.startContainer,function(o){return o===r})){R=s.startOffset;X=s.endOffset;g=P.find(r,0,s.startContainer);T=P.find(r,0,s.endContainer)}}}else{W=M.body.createTextRange();W.moveToElementText(r);W.collapse(1);e=W.move("character",L)*-1;W=s.duplicate();W.collapse(1);a=W.move("character",L)*-1;W=s.duplicate();W.collapse(0);f=(W.move("character",L)*-1)-a;g=a-e;T=f}}V=S.dom.create(S.settings.forced_root_block);V.appendChild(t.cloneNode(1));t.parentNode.replaceChild(V,t)}}else{if(V.hasChildNodes()){V.insertBefore(t,V.firstChild)}else{V.appendChild(t)}}}else{V=null}}if(g!=-2){if(!m){V=r.getElementsByTagName(S.settings.element)[0];s=M.createRange();if(g!=-1){s.setStart(P.find(r,1,g),R)}else{s.setStart(V,0)}if(T!=-1){s.setEnd(P.find(r,1,T),X)}else{s.setEnd(V,0)}if(K){K.removeAllRanges();K.addRange(s)}}else{try{s=K.createRange();s.moveToElementText(r);s.collapse(1);s.moveStart("character",g);s.moveEnd("character",T);s.select()}catch(O){}}}else{if(!m&&(d=S.dom.get("__mce"))){if(Q){d.setAttribute("id",Q)}else{d.removeAttribute("id")}s=M.createRange();s.setStartBefore(d);s.setEndBefore(d);c.setRng(s)}}},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(f){var s=this,ah=s.editor,S=ah.dom,e=ah.getDoc(),a=ah.settings,ad=ah.selection.getSel(),ab=ad.getRangeAt(0),b=e.body;var Y,W,aa,r,t,aj,al,ai,af,am,U,c,ak,ag,Z,T=S.getViewPort(ah.getWin()),V,y,X;function ae(o){o=o.innerHTML;o=o.replace(/<(img|hr|table)/gi,"-");o=o.replace(/<[^>]+>/g,"");return o.replace(/[ \t\r\n]+/g,"")==""}Y=e.createRange();Y.setStart(ad.anchorNode,ad.anchorOffset);Y.collapse(true);W=e.createRange();W.setStart(ad.focusNode,ad.focusOffset);W.collapse(true);aa=Y.compareBoundaryPoints(Y.START_TO_END,W)<0;r=aa?ad.anchorNode:ad.focusNode;t=aa?ad.anchorOffset:ad.focusOffset;aj=aa?ad.focusNode:ad.anchorNode;al=aa?ad.focusOffset:ad.anchorOffset;if(r===aj&&/^(TD|TH)$/.test(r.nodeName)){S.remove(r.firstChild);ah.dom.add(r,a.element,null,"<br />");c=ah.dom.add(r,a.element,null,"<br />");ab=e.createRange();ab.selectNodeContents(c);ab.collapse(1);ah.selection.setRng(ab);return false}if(r==b&&aj==b&&b.firstChild&&ah.dom.isBlock(b.firstChild)){r=aj=r.firstChild;t=al=0;Y=e.createRange();Y.setStart(r,0);W=e.createRange();W.setStart(aj,0)}r=r.nodeName=="HTML"?e.body:r;r=r.nodeName=="BODY"?r.firstChild:r;aj=aj.nodeName=="HTML"?e.body:aj;aj=aj.nodeName=="BODY"?aj.firstChild:aj;ai=s.getParentBlock(r);af=s.getParentBlock(aj);am=ai?ai.nodeName:a.element;if(s.dom.getParent(ai,"OL,UL,PRE")){return true}if(ai&&(ai.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(S.getStyle(ai,"position",1)))){am=a.element;ai=null}if(af&&(af.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(S.getStyle(ai,"position",1)))){am=a.element;af=null}if(/(TD|TABLE|TH|CAPTION)/.test(am)||(ai&&am=="DIV"&&/left|right/gi.test(S.getStyle(ai,"float",1)))){am=a.element;ai=af=null}U=(ai&&ai.nodeName==am)?ai.cloneNode(0):ah.dom.create(am);c=(af&&af.nodeName==am)?af.cloneNode(0):ah.dom.create(am);c.removeAttribute("id");if(/^(H[1-6])$/.test(am)&&r.nodeValue&&t==r.nodeValue.length){c=ah.dom.create(a.element)}Z=ak=r;do{if(Z==b||Z.nodeType==9||s.dom.isBlock(Z)||/(TD|TABLE|TH|CAPTION)/.test(Z.nodeName)){break}ak=Z}while((Z=Z.previousSibling?Z.previousSibling:Z.parentNode));Z=ag=aj;do{if(Z==b||Z.nodeType==9||s.dom.isBlock(Z)||/(TD|TABLE|TH|CAPTION)/.test(Z.nodeName)){break}ag=Z}while((Z=Z.nextSibling?Z.nextSibling:Z.parentNode));if(ak.nodeName==am){Y.setStart(ak,0)}else{Y.setStartBefore(ak)}Y.setEnd(r,t);U.appendChild(Y.cloneContents()||e.createTextNode(""));try{W.setEndAfter(ag)}catch(g){}W.setStart(aj,al);c.appendChild(W.cloneContents()||e.createTextNode(""));ab=e.createRange();if(!ak.previousSibling&&ak.parentNode.nodeName==am){ab.setStartBefore(ak.parentNode)}else{if(Y.startContainer.nodeName==am&&Y.startOffset==0){ab.setStartBefore(Y.startContainer)}else{ab.setStart(Y.startContainer,Y.startOffset)}}if(!ag.nextSibling&&ag.parentNode.nodeName==am){ab.setEndAfter(ag.parentNode)}else{ab.setEnd(W.endContainer,W.endOffset)}ab.deleteContents();if(n){ah.getWin().scrollTo(0,T.y)}if(U.firstChild&&U.firstChild.nodeName==am){U.innerHTML=U.firstChild.innerHTML}if(c.firstChild&&c.firstChild.nodeName==am){c.innerHTML=c.firstChild.innerHTML}if(ae(U)){U.innerHTML="<br />"}function d(w,u){var v=[],o,q,p;w.innerHTML="";if(a.keep_styles){q=u;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(q.nodeName)){o=q.cloneNode(false);S.setAttrib(o,"id","");v.push(o)}}while(q=q.parentNode)}if(v.length>0){for(p=v.length-1,o=w;p>=0;p--){o=o.appendChild(v[p])}v[0].innerHTML=n?"&nbsp;":"<br />";return v[0]}else{w.innerHTML=n?"&nbsp;":"<br />"}}if(ae(c)){X=d(c,aj)}if(n&&parseFloat(opera.version())<9.5){ab.insertNode(U);ab.insertNode(c)}else{ab.insertNode(c);ab.insertNode(U)}c.normalize();U.normalize();function ac(o){return e.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,false).nextNode()||o}ab=e.createRange();ab.selectNodeContents(i?ac(X||c):X||c);ab.collapse(1);ad.removeAllRanges();ad.addRange(ab);V=ah.dom.getPos(c).y;y=c.clientHeight;if(V<T.y||V+y>T.y+T.h){ah.getWin().scrollTo(0,V<T.y?V:V-T.h+25)}return false},backspaceDelete:function(f,y){var w=this,g=w.editor,c=g.getBody(),r,e=g.selection,t=e.getRng(),d=t.startContainer,r,b,a;if(d&&g.dom.isBlock(d)&&!/^(TD|TH)$/.test(d.nodeName)&&y){if(d.childNodes.length==0||(d.childNodes.length==1&&d.firstChild.nodeName=="BR")){r=d;while((r=r.previousSibling)&&!g.dom.isBlock(r)){}if(r){if(d!=c.firstChild){b=g.dom.doc.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,false);while(a=b.nextNode()){r=a}t=g.getDoc().createRange();t.setStart(r,r.nodeValue?r.nodeValue.length:0);t.setEnd(r,r.nodeValue?r.nodeValue.length:0);e.setRng(t);g.dom.remove(d)}return h.cancel(f)}}}function x(p){var o;p=p.target;if(p&&p.parentNode&&p.nodeName=="BR"&&(r=w.getParentBlock(p))){o=p.previousSibling;h.remove(c,"DOMNodeInserted",x);if(o&&o.nodeType==3&&/\s+$/.test(o.nodeValue)){return}if(p.previousSibling||p.nextSibling){g.dom.remove(p)}}}h._add(c,"DOMNodeInserted",x);window.setTimeout(function(){h._remove(c,"DOMNodeInserted",x)},1)}})})(tinymce);(function(j){var f=j.DOM,g=j.dom.Event,i=j.each,h=j.extend;j.create("tinymce.ControlManager",{ControlManager:function(d,a){var b=this,c;a=a||{};b.editor=d;b.controls={};b.onAdd=new j.util.Dispatcher(b);b.onPostRender=new j.util.Dispatcher(b);b.prefix=a.prefix||d.id+"_";b._cls={};b.onPostRender.add(function(){i(b.controls,function(e){e.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,c){var b=null;if(b=this.get(a)){b.setActive(c)}return b},setDisabled:function(a,c){var b=null;if(b=this.get(a)){b.setDisabled(c)}return b},add:function(a){var b=this;if(a){b.controls[a.id]=a;b.onAdd.dispatch(a,b)}return a},createControl:function(a){var b,c=this,d=c.editor;i(d.plugins,function(e){if(e.createControl){b=e.createControl(a,c);if(b){return false}}});switch(a){case"|":case"separator":return c.createSeparator()}if(!b&&d.buttons&&(b=d.buttons[a])){return c.createButton(a,b)}return c.add(b)},createDropMenu:function(r,a,p){var b=this,o=b.editor,e,q,d,c;a=h({"class":"mceDropDown",constrain:o.settings.constrain_menus},a);a["class"]=a["class"]+" "+o.getParam("skin")+"Skin";if(d=o.getParam("skin_variant")){a["class"]+=" "+o.getParam("skin")+"Skin"+d.substring(0,1).toUpperCase()+d.substring(1)}r=b.prefix+r;c=p||b._cls.dropmenu||j.ui.DropMenu;e=b.controls[r]=new c(r,a);e.onAddItem.add(function(k,l){var m=l.settings;m.title=o.getLang(m.title,m.title);if(!m.onclick){m.onclick=function(n){o.execCommand(m.cmd,m.ui||false,m.value)}}});o.onRemove.add(function(){e.destroy()});if(j.isIE){e.onShowMenu.add(function(){q=o.selection.getBookmark(1)});e.onHideMenu.add(function(){if(q){o.selection.moveToBookmark(q);q=0}})}return b.add(e)},createListBox:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.scope=e.scope||o;if(!e.onselect){e.onselect=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}e=h({title:e.title,"class":"mce_"+a,scope:e.scope,control_manager:n},e);a=n.prefix+a;if(o.settings.use_native_selects){c=new j.ui.NativeListBox(a,e)}else{p=b||n._cls.listbox||j.ui.ListBox;c=new p(a,e)}n.controls[a]=c;if(j.isWebKit){c.onPostRender.add(function(k,l){g.add(l,"mousedown",function(){o.bookmark=o.selection.getBookmark("simple")});g.add(l,"focus",function(){o.selection.moveToBookmark(o.bookmark);o.bookmark=null})})}if(c.hideMenu){o.onMouseDown.add(c.hideMenu,c)}return n.add(c)},createButton:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.label=o.translate(e.label);e.scope=e.scope||o;if(!e.onclick&&!e.menu_button){e.onclick=function(){o.execCommand(e.cmd,e.ui||false,e.value)}}e=h({title:e.title,"class":"mce_"+a,unavailable_prefix:o.getLang("unavailable",""),scope:e.scope,control_manager:n},e);a=n.prefix+a;if(e.menu_button){p=b||n._cls.menubutton||j.ui.MenuButton;c=new p(a,e);o.onMouseDown.add(c.hideMenu,c)}else{p=n._cls.button||j.ui.Button;c=new p(a,e)}return n.add(c)},createMenuButton:function(a,c,b){c=c||{};c.menu_button=1;return this.createButton(a,c,b)},createSplitButton:function(a,e,b){var n=this,o=n.editor,d,c,p;if(n.get(a)){return null}e.title=o.translate(e.title);e.scope=e.scope||o;if(!e.onclick){e.onclick=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}if(!e.onselect){e.onselect=function(k){o.execCommand(e.cmd,e.ui||false,k||e.value)}}e=h({title:e.title,"class":"mce_"+a,scope:e.scope,control_manager:n},e);a=n.prefix+a;p=b||n._cls.splitbutton||j.ui.SplitButton;c=n.add(new p(a,e));o.onMouseDown.add(c.hideMenu,c);return c},createColorSplitButton:function(r,a,p){var c=this,e=c.editor,o,d,b,q;if(c.get(r)){return null}a.title=e.translate(a.title);a.scope=a.scope||e;if(!a.onclick){a.onclick=function(k){if(j.isIE){q=e.selection.getBookmark(1)}e.execCommand(a.cmd,a.ui||false,k||a.value)}}if(!a.onselect){a.onselect=function(k){e.execCommand(a.cmd,a.ui||false,k||a.value)}}a=h({title:a.title,"class":"mce_"+r,menu_class:e.getParam("skin")+"Skin",scope:a.scope,more_colors_title:e.getLang("more_colors")},a);r=c.prefix+r;b=p||c._cls.colorsplitbutton||j.ui.ColorSplitButton;d=new b(r,a);e.onMouseDown.add(d.hideMenu,d);e.onRemove.add(function(){d.destroy()});if(j.isIE){d.onHideMenu.add(function(){if(q){e.selection.moveToBookmark(q);q=0}})}return c.add(d)},createToolbar:function(a,d,b){var c,e=this,l;a=e.prefix+a;l=b||e._cls.toolbar||j.ui.Toolbar;c=new l(a,d);if(e.get(a)){return null}return e.add(c)},createSeparator:function(a){var b=a||this._cls.separator||j.ui.Separator;return new b()},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){i(this.controls,function(a){a.destroy()});this.controls=null}})})(tinymce);(function(i){var g=i.util.Dispatcher,h=i.each,j=i.isIE,f=i.isOpera;i.create("tinymce.WindowManager",{WindowManager:function(b){var a=this;a.editor=b;a.onOpen=new g(a);a.onClose=new g(a);a.params={};a.features={}},open:function(y,w){var A=this,s="",d,e,u=A.editor.settings.dialog_type=="modal",b,c,t,x=i.DOM.getViewPort(),a;y=y||{};w=w||{};c=f?x.w:screen.width;t=f?x.h:screen.height;y.name=y.name||"mc_"+new Date().getTime();y.width=parseInt(y.width||320);y.height=parseInt(y.height||240);y.resizable=true;y.left=y.left||parseInt(c/2)-(y.width/2);y.top=y.top||parseInt(t/2)-(y.height/2);w.inline=false;w.mce_width=y.width;w.mce_height=y.height;w.mce_auto_focus=y.auto_focus;if(u){if(j){y.center=true;y.help=false;y.dialogWidth=y.width+"px";y.dialogHeight=y.height+"px";y.scroll=y.scrollbars||false}}h(y,function(l,k){if(i.is(l,"boolean")){l=l?"yes":"no"}if(!/^(name|url)$/.test(k)){if(j&&u){s+=(s?";":"")+k+":"+l}else{s+=(s?",":"")+k+"="+l}}});A.features=y;A.params=w;A.onOpen.dispatch(A,y,w);a=y.url||y.file;a=i._addVer(a);try{if(j&&u){b=1;window.showModalDialog(a,window,s)}else{b=window.open(a,y.name,s)}}catch(p){}if(!b){alert(A.editor.getLang("popup_blocked"))}},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(e,n,o,a,b,c){var d=i.resolve(e);return new d(n,o,a,b,c)},confirm:function(b,d,a,c){c=c||window;d.call(a||this,c.confirm(this._decode(this.editor.getLang(b,b))))},alert:function(c,e,a,d){var b=this;d=d||window;d.alert(b._decode(b.editor.getLang(c,c)));if(e){e.call(a||b)}},_decode:function(a){return i.DOM.decode(a).replace(/\\n/g,"\n")}})}(tinymce));(function(b){b.CommandManager=function(){var h={},a={},g={};function f(c,d,e,j){if(typeof(d)=="string"){d=[d]}b.each(d,function(i){c[i.toLowerCase()]={func:e,scope:j}})}b.extend(this,{add:function(c,d,e){f(h,c,d,e)},addQueryStateHandler:function(c,d,e){f(a,c,d,e)},addQueryValueHandler:function(c,d,e){f(g,c,d,e)},execCommand:function(k,c,d,e,l){if(c=h[c.toLowerCase()]){if(c.func.call(k||c.scope,d,e,l)!==false){return true}}},queryCommandValue:function(){if(cmd=g[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}},queryCommandState:function(){if(cmd=a[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}}})};b.GlobalCommands=new b.CommandManager()})(tinymce);(function(c){function d(p,u,q,a){var o,r,t,b,s;function n(e,f){do{if(e.parentNode==f){return e}e=e.parentNode}while(e)}function v(e){a(e);c.walk(e,a,"childNodes")}o=p.findCommonAncestor(u,q);t=n(u,o)||u;b=n(q,o)||q;for(r=u;r&&r!=t;r=r.parentNode){for(s=r.nextSibling;s;s=s.nextSibling){v(s)}}if(t!=b){for(r=t.nextSibling;r&&r!=b;r=r.nextSibling){v(r)}}else{v(t)}for(r=q;r&&r!=b;r=r.parentNode){for(s=r.previousSibling;s;s=s.previousSibling){v(s)}}}c.GlobalCommands.add("RemoveFormat",function(){var r=this,s=r.dom,E=r.selection,C=E.getRng(1),B=[],y,A,w,a,z,n,D,x;function v(e){var f;s.getParent(e,function(g){if(s.is(g,r.getParam("removeformat_selector"))){f=g}return s.isBlock(g)},r.getBody());return f}function b(e){if(s.is(e,r.getParam("removeformat_selector"))){B.push(e)}}function F(e){b(e);c.walk(e,b,"childNodes")}y=E.getBookmark();a=C.startContainer;n=C.endContainer;z=C.startOffset;D=C.endOffset;a=a.nodeType==1?a.childNodes[z]:a;n=n.nodeType==1?n.childNodes[D-1]:n;if(a==n){A=v(a);if(a.nodeType==3){if(A&&A.nodeType==1){x=a.splitText(z);x.splitText(D-z);s.split(A,x);E.moveToBookmark(y)}return}F(s.split(A,a)||a)}else{A=v(a);w=v(n);if(A){if(a.nodeType==3){if(z==a.nodeValue.length){a.nodeValue+="\uFEFF"}a=a.splitText(z)}}if(w){if(n.nodeType==3){n.splitText(D)}}if(A&&A==w){s.replace(s.create("span",{id:"__end"},n.cloneNode(true)),n)}if(A){A=s.split(A,a)}else{A=a}if(x=s.get("__end")){n=x;w=v(n)}if(w){w=s.split(w,n)}else{w=n}d(s,A,w,b);if(a.nodeValue=="\uFEFF"){a.nodeValue=""}F(n);F(a)}c.each(B,function(e){s.remove(e,1)});s.remove("__end",1);E.moveToBookmark(y)})})(tinymce);(function(b){b.GlobalCommands.add("mceBlockQuote",function(){var s=this,i=s.selection,v=s.dom,q,r,w,x,a,y,n,t,z;function u(c){return v.getParent(c,function(d){return d.nodeName==="BLOCKQUOTE"})}q=v.getParent(i.getStart(),v.isBlock);r=v.getParent(i.getEnd(),v.isBlock);if(a=u(q)){if(q!=r||q.childNodes.length>1||(q.childNodes.length==1&&q.firstChild.nodeName!="BR")){x=i.getBookmark()}if(u(r)){n=a.cloneNode(false);while(w=r.nextSibling){n.appendChild(w.parentNode.removeChild(w))}}if(n){v.insertAfter(n,a)}z=i.getSelectedBlocks(q,r);for(t=z.length-1;t>=0;t--){v.insertAfter(z[t],a)}if(/^\s*$/.test(a.innerHTML)){v.remove(a,1)}if(n&&/^\s*$/.test(n.innerHTML)){v.remove(n,1)}if(!x){if(!b.isIE){y=s.getDoc().createRange();y.setStart(q,0);y.setEnd(q,0);i.setRng(y)}else{i.select(q);i.collapse(0);if(v.getParent(i.getStart(),v.isBlock)!=q){y=i.getRng();y.move("character",-1);y.select()}}}else{s.selection.moveToBookmark(x)}return}if(b.isIE&&!q&&!r){s.getDoc().execCommand("Indent");w=u(i.getNode());w.style.margin=w.dir="";return}if(!q||!r){return}if(q!=r||q.childNodes.length>1||(q.childNodes.length==1&&q.firstChild.nodeName!="BR")){x=i.getBookmark()}b.each(i.getSelectedBlocks(u(i.getStart()),u(i.getEnd())),function(c){if(c.nodeName=="BLOCKQUOTE"&&!a){a=c;return}if(!a){a=v.create("blockquote");c.parentNode.insertBefore(a,c)}if(c.nodeName=="BLOCKQUOTE"&&a){w=c.firstChild;while(w){a.appendChild(w.cloneNode(true));w=w.nextSibling}v.remove(c);return}a.appendChild(v.remove(c))});if(!x){if(!b.isIE){y=s.getDoc().createRange();y.setStart(q,0);y.setEnd(q,0);i.setRng(y)}else{i.select(q);i.collapse(1)}}else{i.moveToBookmark(x)}})})(tinymce);(function(b){b.each(["Cut","Copy","Paste"],function(a){b.GlobalCommands.add(a,function(){var h=this,f=h.getDoc();try{f.execCommand(a,false,null);if(!f.queryCommandSupported(a)){throw"Error"}}catch(g){h.windowManager.alert(h.getLang("clipboard_no_support"))}})})})(tinymce);(function(b){b.GlobalCommands.add("InsertHorizontalRule",function(){if(b.isOpera){return this.getDoc().execCommand("InsertHorizontalRule",false,"")}this.selection.setContent("<hr />")})})(tinymce);(function(){var b=tinymce.GlobalCommands;b.add(["mceEndUndoLevel","mceAddUndoLevel"],function(){this.undoManager.add()});b.add("Undo",function(){var a=this;if(a.settings.custom_undo_redo){a.undoManager.undo();a.nodeChanged();return true}return false});b.add("Redo",function(){var a=this;if(a.settings.custom_undo_redo){a.undoManager.redo();a.nodeChanged();return true}return false})})();var tinymce_advanced_options={mode:"textareas",theme:"advanced",editor_deselector:"mceNoEditor",skin:"o2k7",skin_variant:"black",theme_advanced_resizing_min_width:500,theme_advanced_resizing_max_width:800,plugins:"autoresize,paste,safari,table,paste",width:"760",button_title_map:false,apply_source_formatting:true,theme_advanced_toolbar_align:"left",theme_advanced_buttons1:"formatselect,outdent,indent,seperator,undo,redo",theme_advanced_buttons2:"justifyleft,justifycenter,justifyright,separator,bold,italic,separator,bullist,numlist,link",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"bottom",theme_advanced_resizing:true,theme_advanced_blockformats:"p,h2,h3,blockquote"};tinyMCE.init(tinymce_advanced_options);if(typeof Ajax.InPlaceEditor=="undefined"){throw ("InPlaceRichEditor requires including script.aculo.us' controls.js library")}if(typeof tinyMCE=="undefined"){throw ("InPlaceRichEditor requires including moxiecode' tiny_mce.js library and proper initialization")}tinymce.EditorManager.oldAdd=tinymce.EditorManager.add;tinymce.EditorManager.add=function(a){a.onInit.add(function(b){$(b.id).fire("tinymce:onInit",b)});return tinymce.EditorManager.oldAdd(a)};Ajax.InPlaceRichEditor=Class.create(Ajax.InPlaceEditor,{initialize:function(d,c,b,a){this.url=c;this.element=d=$(d);this.prepareOptions();this.tinymceOptions=Object.clone(a);this._controls={};Object.extend(this.options,b||{});this.prepareTinymceSave();if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-"+this.options.formIdSuffix;if($(this.options.formId)){this.options.formId=""}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl)}if(!this.options.externalControl){this.options.externalControlOnly=false}this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners();if(this.options.editOnBlank&&this.getText().length==0){this.enterEditMode()}},createControl:function($super,c,b,a){$super(c,b,a)},createEditField:function(){var b=(this.options.loadTextURL?this.options.loadingText:this.getText());var a;a=document.createElement("textarea");a.id=this.element.id+"-"+this.options.textareaIdSuffix;a.rows=3;a.cols=40;a.name=this.options.paramName;a.value=b;a.className=this.options.editorClassName;this._controls.editor=a;if(this.options.loadTextURL){this.loadExternalText()}this._form.appendChild(this._controls.editor)},enterEditMode:function($super,b){if(this.options.tinymceToElementSize){var a=this.element.getDimensions()}$super(b);this.tinymce=new tinymce.Editor(this._controls.editor.id,this.tinymceOptions);this.tinymce.onInit.add(function(c){if(this._form.hasClassName(this.options.loadingClassName)){this.tinymce.setProgressState(1)}}.bind(this));this.tinymce.inplacericheditor=this;if(this.options.tinymceToElementSize){this.tinymce.settings.height=a.height;this.tinymce.settings.width=a.width}this.tinymce.render()},getText:function(){return this.element.innerHTML},handleAJAXFailure:function($super,a){$super(a);this.tinymce.setContent(this.element.innerHTML)},handleFormSubmission:function($super,a){this.tinymce.save();$super(a)},removeForm:function($super){try{this.tinymce.remove()}catch(a){}$super()},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=true;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:function(){this.tinymce.setProgressState(0)}.bind(this),onSuccess:function(c){this._form.removeClassName(this.options.loadingClassName);var b=c.responseText;if(this.options.stripLoadedTextTags){b=b.stripTags()}this._controls.editor.value=b;this.tinymce.setContent(b);this._controls.editor.disabled=false;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;$(this._controls.editor.id).observe("tinymce:onInit",function(b){if(a){if(a=="focus"){b.memo.focus()}else{if(a=="activate"){b.memo.execCommand("SelectAll")}}}})},prepareTinymceSave:function(){if(this.options.tinymceSave){if(this.tinymceOptions.theme=="simple"){this.options.tinymceSave=false;return}if((!(this.tinymceOptions.theme_advanced_buttons1&&this.tinymceOptions.theme_advanced_buttons1.match(/(^|,)save(,|$)/))&&!(this.tinymceOptions.theme_advanced_buttons2&&this.tinymceOptions.theme_advanced_buttons2.match(/(^|,)save(,|$)/))&&!(this.tinymceOptions.theme_advanced_buttons3&&this.tinymceOptions.theme_advanced_buttons3.match(/(^|,)save(,|$)/)))||(this.tinymceOptions.plugins==undefined||!this.tinymceOptions.plugins.match(/(^|,)save(,|$)/))){throw ("InPlaceRichEditor' tinymceSave option require at least the save button and the save plugin in tinyMCE initialization.")}if(this.options.onTinymceSave){this.tinymceOptions.save_onsavecallback=this.options.onTinymceSave}if(this.options.onTinymceCancel){this.tinymceOptions.save_oncancelcallback=this.options.onTinymceCancel}}},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceRichEditor.DefaultOptions);Object.extend(this.options,Ajax.InPlaceRichEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))}});Object.extend(Ajax.InPlaceRichEditor,{DefaultOptions:Object.extend(Object.clone(Ajax.InPlaceEditor.DefaultOptions),{editorClassName:"editor_field",fieldPostCreation:"focus",formClassName:"inplacericheditor-form",formIdSuffix:"inplacericheditor",loadingClassName:"inplacericheditor-loading",savingClassName:"inplacericheditor-saving",textareaIdSuffix:"textarea-inplacericheditor",tinymceSave:false,tinymceToElementSize:false}),DefaultCallbacks:Object.extend(Object.clone(Ajax.InPlaceEditor.DefaultCallbacks),{onTinymceSave:function(a){a.inplacericheditor._boundSubmitHandler()},onTinymceCancel:function(a){a.inplacericheditor._boundCancelHandler()}})});